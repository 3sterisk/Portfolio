import{A as qr,B as Ch,C as mu,D as V_,E as UA,F as $A,G as HA,H as gu,I as bh,J as en,K as j_,L as Th,M as B_,N as U_,O as yn,a as U,b as de,c as MA,d as x_,e as A,f as NA,g as wh,h as xA,i as PA,j as kA,k as P_,l as OA,m as k_,n as O_,o as FA,p as LA,q as VA,r as pu,s as F_,t as L_,u as Ih,v as jA,w as BA,x as Dh,y as st,z as ls}from"./chunk-MSVAWT5V.js";var $_;function Sh(){return $_}function zr(n){let e=$_;return $_=n,e}var qA=Symbol("NotFound");function Va(n){return n===qA||n?.name==="\u0275NotFound"}function xh(n,e){return Object.is(n,e)}var tn=null,Ah=!1,H_=1,U2=null,nn=Symbol("SIGNAL");function Ee(n){let e=tn;return tn=n,e}function Ph(){return tn}var us={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ja(n){if(Ah)throw new Error("");if(tn===null)return;tn.consumerOnSignalRead(n);let e=tn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=tn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:tn.producers,t!==void 0&&t.producer===n)){tn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===tn&&(!r||H2(i,tn)))return;let o=Ua(tn),s={producer:n,consumer:tn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};tn.producersTail=s,e!==void 0?e.nextProducer=s:tn.producers=s,o&&GA(n,s)}function zA(){H_++}function kh(n){if(!(Ua(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===H_)){if(!n.producerMustRecompute(n)&&!vu(n)){Nh(n);return}n.producerRecomputeValue(n),Nh(n)}}function q_(n){if(n.consumers===void 0)return;let e=Ah;Ah=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||$2(r)}}finally{Ah=e}}function z_(){return tn?.consumerAllowSignalWrites!==!1}function $2(n){n.dirty=!0,q_(n),n.consumerMarkedDirty?.(n)}function Nh(n){n.dirty=!1,n.lastCleanEpoch=H_}function ds(n){return n&&(n.producersTail=void 0,n.recomputing=!0),Ee(n)}function Ba(n,e){if(Ee(e),!n)return;n.recomputing=!1;let t=n.producersTail,r=t!==void 0?t.nextProducer:n.producers;if(r!==void 0){if(Ua(n))do r=G_(r);while(r!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function vu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(kh(t),r!==t.version))return!0}return!1}function Oh(n){if(Ua(n)){let e=n.producers;for(;e!==void 0;)e=G_(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function GA(n,e){let t=n.consumersTail,r=Ua(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)GA(i.producer,i)}function G_(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ua(e)){let o=e.producers;for(;o!==void 0;)o=G_(o)}return t}function Ua(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Fh(n){U2?.(n)}function H2(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lh(n,e){let t=Object.create(q2);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(kh(t),ja(t),t.value===yu)throw t.error;return t.value};return r[nn]=t,Fh(t),r}var Rh=Symbol("UNSET"),Mh=Symbol("COMPUTING"),yu=Symbol("ERRORED"),q2=de(U({},us),{value:Rh,dirty:!0,error:null,equal:xh,kind:"computed",producerMustRecompute(n){return n.value===Rh||n.value===Mh},producerRecomputeValue(n){if(n.value===Mh)throw new Error("");let e=n.value;n.value=Mh;let t=ds(n),r,i=!1;try{r=n.computation(),Ee(null),i=e!==Rh&&e!==yu&&r!==yu&&n.equal(e,r)}catch(o){r=yu,n.error=o}finally{Ba(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function z2(){throw new Error}var WA=z2;function KA(n){WA(n)}function W_(n){WA=n}var G2=null;function K_(n,e){let t=Object.create(Vh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>QA(t);return r[nn]=t,Fh(t),[r,s=>$a(t,s),s=>Q_(t,s)]}function QA(n){return ja(n),n.value}function $a(n,e){z_()||KA(n),n.equal(n.value,e)||(n.value=e,W2(n))}function Q_(n,e){z_()||KA(n),$a(n,e(n.value))}var Vh=de(U({},us),{equal:xh,value:void 0,kind:"signal"});function W2(n){n.version++,zA(),q_(n),G2?.(n)}function pe(n){return typeof n=="function"}function Ha(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jh=Ha(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof jh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{YA(o)}catch(s){e=e??[],s instanceof jh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)YA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fs(t,e)}remove(e){let{_finalizers:t}=this;t&&fs(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var Y_=rt.EMPTY;function Bh(n){return n instanceof rt||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function YA(n){pe(n)?n():n.unsubscribe()}var pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qa={setTimeout(n,e,...t){let{delegate:r}=qa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Uh(n){qa.setTimeout(()=>{let{onUnhandledError:e}=pr;if(e)e(n);else throw n})}function _u(){}var ZA=Z_("C",void 0,void 0);function JA(n){return Z_("E",void 0,n)}function XA(n){return Z_("N",n,void 0)}function Z_(n,e,t){return{kind:n,value:e,error:t}}var hs=null;function za(n){if(pr.useDeprecatedSynchronousErrorHandling){let e=!hs;if(e&&(hs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=hs;if(hs=null,t)throw r}}else n()}function eR(n){pr.useDeprecatedSynchronousErrorHandling&&hs&&(hs.errorThrown=!0,hs.error=n)}var ps=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bh(e)&&e.add(this)):this.destination=Y2}static create(e,t,r){return new Ti(e,t,r)}next(e){this.isStopped?X_(XA(e),this):this._next(e)}error(e){this.isStopped?X_(JA(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?X_(ZA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},K2=Function.prototype.bind;function J_(n,e){return K2.call(n,e)}var eE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$h(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$h(r)}else $h(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$h(t)}}},Ti=class extends ps{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&pr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&J_(e.next,o),error:e.error&&J_(e.error,o),complete:e.complete&&J_(e.complete,o)}):i=e}this.destination=new eE(i)}};function $h(n){pr.useDeprecatedSynchronousErrorHandling?eR(n):Uh(n)}function Q2(n){throw n}function X_(n,e){let{onStoppedNotification:t}=pr;t&&qa.setTimeout(()=>t(n,e))}var Y2={closed:!0,next:_u,error:Q2,complete:_u};var Ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vn(n){return n}function tE(...n){return nE(n)}function nE(n){return n.length===0?vn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=J2(t)?t:new Ti(t,r,i);return za(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=tR(r),new r((i,o)=>{let s=new Ti({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ga](){return this}pipe(...t){return nE(t)(this)}toPromise(t){return t=tR(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function tR(n){var e;return(e=n??pr.Promise)!==null&&e!==void 0?e:Promise}function Z2(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function J2(n){return n&&n instanceof ps||Z2(n)&&Bh(n)}function rE(n){return pe(n?.lift)}function we(n){return e=>{if(rE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(n,e,t,r,i){return new iE(n,e,t,r,i)}var iE=class extends ps{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wa(){return we((n,e)=>{let t=null;n._refCount++;let r=Ie(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ka=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rt;let t=this.getSubject();e.add(this.source.subscribe(Ie(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e}refCount(){return Wa()(this)}};var nR=Ha(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Hh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nR}next(t){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Y_:(this.currentObservers=null,o.push(t),new rt(()=>{this.currentObservers=null,fs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Hh(e,t),n})(),Hh=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Y_}};var vt=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Eu={now(){return(Eu.delegate||Date).now()},delegate:void 0};var wu=class extends Xe{constructor(e=1/0,t=1/0,r=Eu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var qh=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var Iu={setInterval(n,e,...t){let{delegate:r}=Iu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Iu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qa=class extends qh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Iu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Iu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ya=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ya.now=Eu.now;var Za=class extends Ya{constructor(e,t=Ya.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Du=new Za(Qa);var zh=class extends Qa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Gh=class extends Za{};var oE=new Gh(zh);var rn=new fe(n=>n.complete());function rR(n){return n&&pe(n.schedule)}function sE(n){return n[n.length-1]}function Wh(n){return pe(sE(n))?n.pop():void 0}function Gr(n){return rR(sE(n))?n.pop():void 0}function iR(n,e){return typeof sE(n)=="number"?n.pop():e}var Kh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Qh(n){return pe(n?.then)}function Yh(n){return pe(n[Ga])}function Zh(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function Jh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function X2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xh=X2();function ep(n){return pe(n?.[Xh])}function tp(n){return xA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wh(t.read());if(i)return yield wh(void 0);yield yield wh(r)}}finally{t.releaseLock()}})}function np(n){return pe(n?.getReader)}function et(n){if(n instanceof fe)return n;if(n!=null){if(Yh(n))return ej(n);if(Kh(n))return tj(n);if(Qh(n))return nj(n);if(Zh(n))return oR(n);if(ep(n))return rj(n);if(np(n))return ij(n)}throw Jh(n)}function ej(n){return new fe(e=>{let t=n[Ga]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tj(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function nj(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Uh)})}function rj(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oR(n){return new fe(e=>{oj(n,e).catch(t=>e.error(t))})}function ij(n){return oR(tp(n))}function oj(n,e){var t,r,i,o;return NA(this,void 0,void 0,function*(){try{for(t=PA(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function An(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function jn(n,e=0){return we((t,r)=>{t.subscribe(Ie(r,i=>An(r,n,()=>r.next(i),e),()=>An(r,n,()=>r.complete(),e),i=>An(r,n,()=>r.error(i),e)))})}function Xn(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sR(n,e){return et(n).pipe(Xn(e),jn(e))}function aR(n,e){return et(n).pipe(Xn(e),jn(e))}function cR(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lR(n,e){return new fe(t=>{let r;return An(t,e,()=>{r=n[Xh](),An(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function rp(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{An(t,e,()=>{let r=n[Symbol.asyncIterator]();An(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function uR(n,e){return rp(tp(n),e)}function dR(n,e){if(n!=null){if(Yh(n))return sR(n,e);if(Kh(n))return cR(n,e);if(Qh(n))return aR(n,e);if(Zh(n))return rp(n,e);if(ep(n))return lR(n,e);if(np(n))return uR(n,e)}throw Jh(n)}function Se(n,e){return e?dR(n,e):et(n)}function ie(...n){let e=Gr(n);return Se(n,e)}function Ja(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function aE(n){return!!n&&(n instanceof fe||pe(n.lift)&&pe(n.subscribe))}var Si=Ha(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return we((t,r)=>{let i=0;t.subscribe(Ie(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:sj}=Array;function aj(n,e){return sj(e)?n(...e):n(e)}function ip(n){return ne(e=>aj(n,e))}var{isArray:cj}=Array,{getPrototypeOf:lj,prototype:uj,keys:dj}=Object;function op(n){if(n.length===1){let e=n[0];if(cj(e))return{args:e,keys:null};if(fj(e)){let t=dj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function fj(n){return n&&typeof n=="object"&&lj(n)===uj}function sp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Cu(...n){let e=Gr(n),t=Wh(n),{args:r,keys:i}=op(n);if(r.length===0)return Se([],e);let o=new fe(hj(r,e,i?s=>sp(i,s):vn));return t?o.pipe(ip(t)):o}function hj(n,e,t=vn){return r=>{fR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)fR(e,()=>{let u=Se(n[c],e),d=!1;u.subscribe(Ie(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fR(n,e,t){n?An(t,n,e):e()}function hR(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,h=!1,m=()=>{h&&!c.length&&!u&&e.complete()},g=D=>u<r?_(D):c.push(D),_=D=>{o&&e.next(D),u++;let T=!1;et(t(D,d++)).subscribe(Ie(e,F=>{i?.(F),o?g(F):e.next(F)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<r;){let F=c.shift();s?An(e,s,()=>_(F)):_(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(Ie(e,g,()=>{h=!0,m()})),()=>{a?.()}}function _t(n,e,t=1/0){return pe(e)?_t((r,i)=>ne((o,s)=>e(r,o,i,s))(et(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>hR(r,i,n,t)))}function lo(n=1/0){return _t(vn,n)}function pR(){return lo(1)}function Xa(...n){return pR()(Se(n,Gr(n)))}function bu(n){return new fe(e=>{et(n()).subscribe(e)})}function cE(...n){let e=Wh(n),{args:t,keys:r}=op(n),i=new fe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let h=!1;et(t[d]).subscribe(Ie(o,m=>{h||(h=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?sp(r,a):a),o.complete())}))}});return e?i.pipe(ip(e)):i}function lE(...n){let e=Gr(n),t=iR(n,1/0),r=n;return r.length?r.length===1?et(r[0]):lo(t)(Se(r,e)):rn}function Ot(n,e){return we((t,r)=>{let i=0;t.subscribe(Ie(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ai(n){return we((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ie(t,void 0,void 0,s=>{o=et(n(s,Ai(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ie(s,d=>{let h=u++;c=a?n(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function uo(n,e){return pe(e)?_t(n,e,1):_t(n,1)}function fo(n){return we((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function er(n){return n<=0?()=>rn:we((e,t)=>{let r=0;e.subscribe(Ie(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function uE(n,e=vn){return n=n??pj,we((t,r)=>{let i,o=!0;t.subscribe(Ie(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function pj(n,e){return n===e}function ap(n=mj){return we((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mj(){return new Si}function Tu(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):vn,er(1),t?fo(e):ap(()=>new Si))}function ec(n){return n<=0?()=>rn:we((e,t)=>{let r=[];e.subscribe(Ie(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):vn,ec(1),t?fo(e):ap(()=>new Si))}function Su(){return we((n,e)=>{let t,r=!1;n.subscribe(Ie(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ms(n,e){return we(mR(n,e,arguments.length>=2,!0))}function gR(n={}){let{connector:e=()=>new Xe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,d=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=c=void 0,d=h=!1},_=()=>{let D=s;g(),D?.unsubscribe()};return we((D,T)=>{u++,!h&&!d&&m();let F=c=c??e();T.add(()=>{u--,u===0&&!h&&!d&&(a=fE(_,i))}),F.subscribe(T),!s&&u>0&&(s=new Ti({next:G=>F.next(G),error:G=>{h=!0,m(),a=fE(g,t,G),F.error(G)},complete:()=>{d=!0,m(),a=fE(g,r),F.complete()}}),et(D).subscribe(s))})(o)}}function fE(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ti({next:()=>{r.unsubscribe(),n()}});return et(e(...t)).subscribe(r)}function cp(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,gR({connector:()=>new wu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function gs(...n){let e=Gr(n);return we((t,r)=>{(e?Xa(n,t,e):Xa(n,t)).subscribe(r)})}function at(n,e){return we((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ie(r,c=>{i?.unsubscribe();let u=0,d=o++;et(n(c,d)).subscribe(i=Ie(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function lp(n,e){return pe(e)?at(()=>n,e):at(()=>n)}function up(n){return we((e,t)=>{et(n).subscribe(Ie(t,()=>t.complete(),_u)),!t.closed&&e.subscribe(t)})}function Ut(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ie(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):vn}function yR(n){let e=Ee(null);try{return n()}finally{Ee(e)}}var mp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,t){super(ws(e,t)),this.code=e}};function gj(n){return`NG0${Math.abs(n)}`}function ws(n,e){return`${gj(n)}${e?": "+e:""}`}var En=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("")}function ER(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Mi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function bE(n,e){return n?e?`${n} ${e}`:n:e||""}var yj=Fe({__forward_ref__:Fe});function Wr(n){return n.__forward_ref__=Wr,n.toString=function(){return Mi(this())},n}function zt(n){return TE(n)?n():n}function TE(n){return typeof n=="function"&&n.hasOwnProperty(yj)&&n.__forward_ref__===Wr}function wR(n,e){n==null&&SE(e,n,null,"!=")}function SE(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ke(n){return{providers:n.providers||[],imports:n.imports||[]}}function xu(n){return vj(n,gp)}function AE(n){return xu(n)!==null}function vj(n,e){return n.hasOwnProperty(e)&&n[e]||null}function _j(n){let e=n?.[gp]??null;return e||null}function pE(n){return n&&n.hasOwnProperty(fp)?n[fp]:null}var gp=Fe({\u0275prov:Fe}),fp=Fe({\u0275inj:Fe}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function RE(n){return n&&!!n.\u0275providers}var ME=Fe({\u0275cmp:Fe}),NE=Fe({\u0275dir:Fe}),xE=Fe({\u0275pipe:Fe}),PE=Fe({\u0275mod:Fe}),Mu=Fe({\u0275fac:Fe}),Is=Fe({__NG_ELEMENT_ID__:Fe}),vR=Fe({__NG_ENV_ID__:Fe});function Ds(n){return typeof n=="string"?n:n==null?"":String(n)}function hp(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ds(n)}var kE=Fe({ngErrorCode:Fe}),IR=Fe({ngErrorMessage:Fe}),Ru=Fe({ngTokenPath:Fe});function OE(n,e){return DR("",-200,e)}function yp(n,e){throw new V(-201,!1)}function Ej(n,e){n[Ru]??=[];let t=n[Ru],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(wR(e.provide,"Token with multi: true should have a provide property"),r=hp(e.provide)):r=hp(e),t[0]!==r&&n[Ru].unshift(r)}function wj(n,e){let t=n[Ru],r=n[kE],i=n[IR]||n.message;return n.message=Dj(i,r,t,e),n}function DR(n,e,t){let r=new V(e,n);return r[kE]=e,r[IR]=n,t&&(r[Ru]=t),r}function Ij(n){return n[kE]}function Dj(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return ws(e,`${n}${o}${i}`)}var mE;function CR(){return mE}function _n(n){let e=mE;return mE=n,e}function FE(n,e,t){let r=xu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;yp(n,"Injector")}var Cj={},ys=Cj,gE="__NG_DI_FLAG__",yE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=vs(t)||0;try{return this.injector.get(e,r&8?null:ys,r)}catch(i){if(Va(i))return i;throw i}}};function bj(n,e=0){let t=Sh();if(t===void 0)throw new V(-203,!1);if(t===null)return FE(n,void 0,e);{let r=Tj(e),i=t.retrieve(n,r);if(Va(i)){if(r.optional)return null;throw i}return i}}function q(n,e=0){return(CR()||bj)(zt(n),e)}function O(n,e){return q(n,vs(e))}function vs(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Tj(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function vE(n){let e=[];for(let t=0;t<n.length;t++){let r=zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=Sj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function LE(n,e){return n[gE]=e,n.prototype[gE]=e,n}function Sj(n){return n[gE]}function ho(n,e){let t=n.hasOwnProperty(Mu);return t?n[Mu]:null}function vp(n,e){n.forEach(t=>Array.isArray(t)?vp(t,e):e(t))}function VE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function TR(n,e,t){let r=nc(n,e);return r>=0?n[r|1]=t:(r=~r,bR(n,r,e,t)),r}function _p(n,e){let t=nc(n,e);if(t>=0)return n[t|1]}function nc(n,e){return Aj(n,e,1)}function Aj(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var mo={},Bn=[],go=new z(""),jE=new z("",-1),BE=new z(""),Nu=class{get(e,t=ys){if(t===ys){let i=DR("",-201);throw i.name="\u0275NotFound",i}return t}};function UE(n){return n[PE]||null}function xi(n){return n[ME]||null}function $E(n){return n[NE]||null}function SR(n){return n[xE]||null}function Kr(n){return{\u0275providers:n}}function AR(...n){return{\u0275providers:HE(!0,n),\u0275fromNgModule:!0}}function HE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return vp(e,s=>{let a=s;pp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&RR(i,o),t}function RR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qE(i,o=>{e(o,r)})}}function pp(n,e,t,r){if(n=zt(n),!n)return!1;let i=null,o=pE(n),s=!o&&xi(n);if(!o&&!s){let c=n.ngModule;if(o=pE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)pp(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{vp(o.imports,d=>{pp(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&RR(u,e)}if(!a){let u=ho(i)||(()=>new i);e({provide:i,useFactory:u,deps:Bn},i),e({provide:BE,useValue:i,multi:!0},i),e({provide:go,useValue:()=>q(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;qE(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function qE(n,e){for(let t of n)RE(t)&&(t=t.\u0275providers),Array.isArray(t)?qE(t,e):e(t)}var Rj=Fe({provide:String,useValue:Fe});function MR(n){return n!==null&&typeof n=="object"&&Rj in n}function Mj(n){return!!(n&&n.useExisting)}function Nj(n){return!!(n&&n.useFactory)}function _s(n){return typeof n=="function"}function NR(n){return!!n.useClass}var ku=new z(""),dp={},_R={},hE;function Ou(){return hE===void 0&&(hE=new Nu),hE}var ze=class{},Es=class extends ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,EE(e,s=>this.processProvider(s)),this.records.set(jE,tc(void 0,this)),i.has("environment")&&this.records.set(ze,tc(void 0,this));let o=this.records.get(ku);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(BE,Bn,{self:!0}))}retrieve(e,t){let r=vs(t)||0;try{return this.get(e,ys,r)}catch(i){if(Va(i))return i;throw i}}destroy(){Au(this),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return Au(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Au(this);let t=zr(this),r=_n(void 0),i;try{return e()}finally{zr(t),_n(r)}}get(e,t=ys,r){if(Au(this),e.hasOwnProperty(vR))return e[vR](this);let i=vs(r),o,s=zr(this),a=_n(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=Fj(e)&&xu(e);d&&this.injectableDefInScope(d)?u=tc(_E(e),dp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ou():this.parent;return t=i&8&&t===ys?null:t,c.get(e,t)}catch(c){let u=Ij(c);throw u===-200||u===-201?new V(u,null):c}finally{_n(a),zr(s)}}resolveInjectorInitializers(){let e=Ee(null),t=zr(this),r=_n(void 0),i;try{let o=this.get(go,Bn,{self:!0});for(let s of o)s()}finally{zr(t),_n(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=zt(e);let t=_s(e)?e:zt(e&&e.provide),r=Pj(e);if(!_s(e)&&e.multi===!0){let i=this.records.get(t);i||(i=tc(void 0,dp,!0),i.factory=()=>vE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ee(null);try{if(t.value===_R)throw OE(Mi(e));return t.value===dp&&(t.value=_R,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Oj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function _E(n){let e=xu(n),t=e!==null?e.factory:ho(n);if(t!==null)return t;if(n instanceof z)throw new V(204,!1);if(n instanceof Function)return xj(n);throw new V(204,!1)}function xj(n){if(n.length>0)throw new V(204,!1);let t=_j(n);return t!==null?()=>t.factory(n):()=>new n}function Pj(n){if(MR(n))return tc(void 0,n.useValue);{let e=zE(n);return tc(e,dp)}}function zE(n,e,t){let r;if(_s(n)){let i=zt(n);return ho(i)||_E(i)}else if(MR(n))r=()=>zt(n.useValue);else if(Nj(n))r=()=>n.useFactory(...vE(n.deps||[]));else if(Mj(n))r=(i,o)=>q(zt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=zt(n&&(n.useClass||n.provide));if(kj(n))r=()=>new i(...vE(n.deps));else return ho(i)||_E(i)}return r}function Au(n){if(n.destroyed)throw new V(205,!1)}function tc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kj(n){return!!n.deps}function Oj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Fj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function EE(n,e){for(let t of n)Array.isArray(t)?EE(t,e):t&&RE(t)?EE(t.\u0275providers,e):e(t)}function St(n,e){let t;n instanceof Es?(Au(n),t=n):t=new yE(n);let r,i=zr(t),o=_n(void 0);try{return e()}finally{zr(i),_n(o)}}function GE(){return CR()!==void 0||Sh()!=null}var yr=0,ye=1,me=2,Gt=3,tr=4,nr=5,Fu=6,rc=7,on=8,Cs=9,Qr=10,ct=11,ic=12,WE=13,bs=14,rr=15,Ts=16,Ss=17,As=18,Lu=19,KE=20,Ri=21,Ep=22,Vu=23,Un=24,Rs=25,$t=26,xR=1;var yo=7,ju=8,Bu=9,Rn=10;function Yr(n){return Array.isArray(n)&&typeof n[xR]=="object"}function vr(n){return Array.isArray(n)&&n[xR]===!0}function QE(n){return(n.flags&4)!==0}function vo(n){return n.componentOffset>-1}function Uu(n){return(n.flags&1)===1}function Zr(n){return!!n.template}function oc(n){return(n[me]&512)!==0}function Ms(n){return(n[me]&256)===256}var PR="svg",kR="math";function ir(n){for(;Array.isArray(n);)n=n[yr];return n}function YE(n,e){return ir(e[n])}function _r(n,e){return ir(e[n.index])}function wp(n,e){return n.data[e]}function Ip(n,e){return n[e]}function ZE(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function or(n,e){let t=e[n];return Yr(t)?t:t[yr]}function Dp(n){return(n[me]&128)===128}function OR(n){return vr(n[Gt])}function Ns(n,e){return e==null?null:n[e]}function JE(n){n[Ss]=0}function XE(n){n[me]&1024||(n[me]|=1024,Dp(n)&&sc(n))}function FR(n,e){for(;n>0;)e=e[bs],n--;return e}function $u(n){return!!(n[me]&9216||n[Un]?.dirty)}function Cp(n){n[Qr].changeDetectionScheduler?.notify(8),n[me]&64&&(n[me]|=1024),$u(n)&&sc(n)}function sc(n){n[Qr].changeDetectionScheduler?.notify(0);let e=po(n);for(;e!==null&&!(e[me]&8192||(e[me]|=8192,!Dp(e)));)e=po(e)}function ew(n,e){if(Ms(n))throw new V(911,!1);n[Ri]===null&&(n[Ri]=[]),n[Ri].push(e)}function LR(n,e){if(n[Ri]===null)return;let t=n[Ri].indexOf(e);t!==-1&&n[Ri].splice(t,1)}function po(n){let e=n[Gt];return vr(e)?e[Gt]:e}function VR(n){return n[rc]??=[]}function jR(n){return n.cleanup??=[]}var De={lFrame:XR(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Hu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Hu||{}),Lj=0,wE=!1;function BR(){return De.lFrame.elementDepthCount}function UR(){De.lFrame.elementDepthCount++}function tw(){De.lFrame.elementDepthCount--}function nw(){return De.bindingsEnabled}function $R(){return De.skipHydrationRootTNode!==null}function rw(n){return De.skipHydrationRootTNode===n}function iw(){De.skipHydrationRootTNode=null}function Ne(){return De.lFrame.lView}function wn(){return De.lFrame.tView}function Er(n){return De.lFrame.contextLView=n,n[on]}function wr(n){return De.lFrame.contextLView=null,n}function Wt(){let n=ow();for(;n!==null&&n.type===64;)n=n.parent;return n}function ow(){return De.lFrame.currentTNode}function HR(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ac(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function sw(){return De.lFrame.isParent}function qR(){De.lFrame.isParent=!1}function zR(){return De.lFrame.contextLView}function aw(n){SE("Must never be called in production mode"),Lj=n}function cw(){return wE}function lw(n){let e=wE;return wE=n,e}function uw(){let n=De.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function GR(){return De.lFrame.bindingIndex}function WR(n){return De.lFrame.bindingIndex=n}function qu(){return De.lFrame.bindingIndex++}function dw(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KR(){return De.lFrame.inI18n}function QR(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,bp(e)}function YR(){return De.lFrame.currentDirectiveIndex}function bp(n){De.lFrame.currentDirectiveIndex=n}function ZR(n){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fw(n){De.lFrame.currentQueryIndex=n}function Vj(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[nr]:null}function hw(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Vj(o),i===null||(o=o[bs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=De.lFrame=JR();return r.currentTNode=e,r.lView=n,!0}function Tp(n){let e=JR(),t=n[ye];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function JR(){let n=De.lFrame,e=n===null?null:n.child;return e===null?XR(n):e}function XR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function eM(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var pw=eM;function Sp(){let n=eM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tM(n){return(De.lFrame.contextLView=FR(n,De.lFrame.contextLView))[on]}function _o(){return De.lFrame.selectedIndex}function Eo(n){De.lFrame.selectedIndex=n}function Ap(){let n=De.lFrame;return wp(n.tView,n.selectedIndex)}function nM(){return De.lFrame.currentNamespace}var rM=!0;function Rp(){return rM}function Mp(n){rM=n}function IE(n,e=null,t=null,r){let i=mw(n,e,t,r);return i.resolveInjectorInitializers(),i}function mw(n,e=null,t=null,r,i=new Set){let o=[t||Bn,AR(n)];return r=r||(typeof n=="object"?void 0:Mi(n)),new Es(o,e||Ou(),r||null,i)}var it=class n{static THROW_IF_NOT_FOUND=ys;static NULL=new Nu;static create(e,t){if(Array.isArray(e))return IE({name:""},t,e,"");{let r=e.name??"";return IE({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>q(jE)});static __NG_ELEMENT_ID__=-1},ht=new z(""),Jr=(()=>{class n{static __NG_ELEMENT_ID__=jj;static __NG_ENV_ID__=t=>t}return n})(),DE=class extends Jr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ms(this._lView)}onDestroy(e){let t=this._lView;return ew(t,e),()=>LR(t,e)}};function jj(){return new DE(Ne())}var gr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},$n=new z("",{providedIn:"root",factory:()=>{let n=O(ze),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(gr),e.handleError(t))}}}),iM={provide:go,useValue:()=>void O(gr),multi:!0};function gw(n){return typeof n=="function"&&n[nn]!==void 0}function Ir(n,e){let[t,r,i]=K_(n,e?.equal),o=t,s=o[nn];return o.set=r,o.update=i,o.asReadonly=oM.bind(o),o}function oM(){let n=this[nn];if(n.readonlyFn===void 0){let e=()=>this();e[nn]=n,n.readonlyFn=e}return n.readonlyFn}function yw(n){return gw(n)&&typeof n.set=="function"}var Ni=class{},Np=new z("",{providedIn:"root",factory:()=>!1});var vw=new z(""),_w=new z("");var xp=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Bj}return n})();function Bj(){return new xp(Ne(),Wt())}var Xr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new vt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),cc=(()=>{class n{internalPendingTasks=O(Xr);scheduler=O(Ni);errorHandler=O($n);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})();function zu(...n){}var Ew=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new CE})}return n})(),CE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function pc(n){return{toString:n}.toString()}var Pp="__parameters__";function Kj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function OM(n,e,t){return pc(()=>{let r=Kj(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let h=c.hasOwnProperty(Pp)?c[Pp]:Object.defineProperty(c,Pp,{value:[]})[Pp];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var sn=LE(OM("Optional"),8);var FM=LE(OM("SkipSelf"),4);function LM(n){let e=En.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Qj(n){return typeof n=="function"}var Bp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function VM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ni=(()=>{let n=()=>jM;return n.ngInherit=!0,n})();function jM(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zj),Yj}function Yj(){let n=UM(this),e=n?.current;if(e){let t=n.previous;if(t===mo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Zj(n,e,t,r,i){let o=this.declaredInputs[r],s=UM(n)||Jj(n,{previous:mo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Bp(u&&u.currentValue,t,c===mo),VM(n,e,i,t)}var BM="__ngSimpleChanges__";function UM(n){return n[BM]||null}function Jj(n,e){return n[BM]=e}var sM=[];var Ge=function(n,e=null,t){for(let r=0;r<sM.length;r++){let i=sM[r];i(n,e,t)}};function Xj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function $M(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Fp(n,e,t){HM(n,e,3,t)}function Lp(n,e,t,r){(n[me]&3)===t&&HM(n,e,t,r)}function ww(n,e){let t=n[me];(t&3)===e&&(t&=16383,t+=1,n[me]=t)}function HM(n,e,t,r){let i=r!==void 0?n[Ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ss]+=65536),(a<o||o==-1)&&(eB(n,t,e,c),n[Ss]=(n[Ss]&4294901760)+c+2),c++}function aM(n,e){Ge(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),Ge(5,n,e)}}function eB(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[me]>>14<n[Ss]>>16&&(n[me]&3)===e&&(n[me]+=16384,aM(a,o)):aM(a,o)}var uc=-1,ks=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function tB(n){return(n.flags&8)!==0}function nB(n){return(n.flags&16)!==0}function rB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];oB(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function iB(n){return n===3||n===4||n===6}function oB(n){return n.charCodeAt(0)===64}function dc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cM(n,t,i,null,e[++r]):cM(n,t,i,null,null))}}return n}function cM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function qM(n){return n!==uc}function Up(n){return n&32767}function sB(n){return n>>16}function $p(n,e){let t=sB(n),r=e;for(;t>0;)r=r[bs],t--;return r}var Nw=!0;function Hp(n){let e=Nw;return Nw=n,e}var aB=256,zM=aB-1,GM=5,cB=0,ei={};function lB(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Is)&&(r=t[Is]),r==null&&(r=t[Is]=cB++);let i=r&zM,o=1<<i;e.data[n+(i>>GM)]|=o}function qp(n,e){let t=WM(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,Iw(r.data,n),Iw(e,null),Iw(r.blueprint,null));let i=Yw(n,e),o=n.injectorIndex;if(qM(i)){let s=Up(i),a=$p(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Iw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JM(i),r===null)return uc;if(t++,i=i[bs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return uc}function xw(n,e,t){lB(n,e,t)}function KM(n,e,t){if(t&8||n!==void 0)return n;yp(e,"NodeInjector")}function QM(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Cs],o=_n(void 0);try{return i?i.get(e,r,t&8):FE(e,r,t&8)}finally{_n(o)}}return KM(r,e,t)}function YM(n,e,t,r=0,i){if(n!==null){if(e[me]&2048&&!(r&2)){let s=pB(n,e,t,r,ei);if(s!==ei)return s}let o=ZM(n,e,t,r,ei);if(o!==ei)return o}return QM(e,t,r,i)}function ZM(n,e,t,r,i){let o=fB(t);if(typeof o=="function"){if(!hw(e,n,r))return r&1?KM(i,t,r):QM(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))yp(t);else return s}finally{pw()}}else if(typeof o=="number"){let s=null,a=WM(n,e),c=uc,u=r&1?e[rr][nr]:null;for((a===-1||r&4)&&(c=a===-1?Yw(n,e):e[a+8],c===uc||!uM(r,!1)?a=-1:(s=e[ye],a=Up(c),e=$p(c,e)));a!==-1;){let d=e[ye];if(lM(o,a,d.data)){let h=uB(a,e,t,s,r,u);if(h!==ei)return h}c=e[a+8],c!==uc&&uM(r,e[ye].data[a+8]===u)&&lM(o,a,e)?(s=d,a=Up(c),e=$p(c,e)):a=-1}}return i}function uB(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],c=r==null?vo(a)&&Nw:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=dB(a,s,t,c,u);return d!==null?zp(e,s,d,a,i):ei}function dB(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,h=r?a:a+d,m=i?a+d:u;for(let g=h;g<m;g++){let _=s[g];if(g<c&&t===_||g>=c&&_.type===t)return g}if(i){let g=s[c];if(g&&Zr(g)&&g.type===t)return c}return null}function zp(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ks){let a=o;if(a.resolving){let g=hp(s[t]);throw OE(g)}let c=Hp(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,h=a.injectImpl?_n(a.injectImpl):null,m=hw(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Xj(t,s[t],e)}finally{h!==null&&_n(h),Hp(c),a.resolving=!1,pw()}}return o}function fB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Is)?n[Is]:void 0;return typeof e=="number"?e>=0?e&zM:hB:e}function lM(n,e,t){let r=1<<n;return!!(t[e+(n>>GM)]&r)}function uM(n,e){return!(n&2)&&!(n&1&&e)}var Ps=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return YM(this._tNode,this._lView,e,vs(r),t)}};function hB(){return new Ps(Wt(),Ne())}function Vs(n){return pc(()=>{let e=n.prototype.constructor,t=e[Mu]||Pw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Mu]||Pw(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pw(n){return TE(n)?()=>{let e=Pw(zt(n));return e&&e()}:ho(n)}function pB(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[me]&2048&&!oc(s);){let a=ZM(o,s,t,r|2,ei);if(a!==ei)return a;let c=o.parent;if(!c){let u=s[KE];if(u){let d=u.get(t,ei,r);if(d!==ei)return d}c=JM(s),s=s[bs]}o=c}return i}function JM(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[nr]:null}function mB(){return rm(Wt(),Ne())}function rm(n,e){return new ri(_r(n,e))}var ri=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=mB}return n})();function XM(n){return(n.flags&128)===128}var Zw=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Zw||{}),eN=new Map,gB=0;function yB(){return gB++}function vB(n){eN.set(n[Lu],n)}function kw(n){eN.delete(n[Lu])}var dM="__ngContext__";function fc(n,e){Yr(e)?(n[dM]=e[Lu],vB(e)):n[dM]=e}function tN(n){return rN(n[ic])}function nN(n){return rN(n[tr])}function rN(n){for(;n!==null&&!vr(n);)n=n[tr];return n}var Ow;function Jw(n){Ow=n}function iN(){if(Ow!==void 0)return Ow;if(typeof document<"u")return document;throw new V(210,!1)}var im=new z("",{providedIn:"root",factory:()=>_B}),_B="ng",om=new z(""),Mn=new z("",{providedIn:"platform",factory:()=>"unknown"});var sm=new z(""),am=new z("",{providedIn:"root",factory:()=>iN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EB="h",wB="b";var oN=!1,sN=new z("",{providedIn:"root",factory:()=>oN});var IB=(n,e,t,r)=>{};function DB(n,e,t,r){IB(n,e,t,r)}function Xw(n){return(n.flags&32)===32}var CB=()=>null;function aN(n,e,t=!1){return CB(n,e,t)}function cN(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];fw(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Fw(n,e,t){fw(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function lN(n,e,t){if(QE(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ee(r)}}}var Pi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pi||{});var Gp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mp})`}};function cm(n){return n instanceof Gp?n.changingThisBreaksApplicationSecurity:n}function uN(n,e){let t=dN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${mp})`)}return t===e}function dN(n){return n instanceof Gp&&n.getTypeName()||null}var bB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fN(n){return n=String(n),n.match(bB)?n:"unsafe:"+n}var eI=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(eI||{});function Oi(n){let e=TB();return e?e.sanitize(eI.URL,n)||"":uN(n,"URL")?cm(n):fN(Ds(n))}function TB(){let n=Ne();return n&&n[Qr].sanitizer}function tI(n){return n.ownerDocument.defaultView}function hN(n){return n instanceof Function?n():n}function SB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var pN="ng-template";function AB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(nI(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function nI(n){return n.type===4&&n.value!==pN}function RB(n,e,t){let r=n.type===4&&!t?pN:n.value;return e===r}function MB(n,e,t){let r=4,i=n.attrs,o=i!==null?PB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Dr(r)&&!Dr(c))return!1;if(s&&Dr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!RB(n,c,t)||c===""&&e.length===1){if(Dr(r))return!1;s=!0}}else if(r&8){if(i===null||!AB(n,i,c,t)){if(Dr(r))return!1;s=!0}}else{let u=e[++a],d=NB(c,i,nI(n),t);if(d===-1){if(Dr(r))return!1;s=!0;continue}if(u!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(Dr(r))return!1;s=!0}}}}return Dr(r)||s}function Dr(n){return(n&1)===0}function NB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return kB(e,n)}function xB(n,e,t=!1){for(let r=0;r<e.length;r++)if(MB(n,e[r],t))return!0;return!1}function PB(n){for(let e=0;e<n.length;e++){let t=n[e];if(iB(t))return e}return n.length}function kB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fM(n,e){return n?":not("+e.trim()+")":e}function OB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Dr(s)&&(e+=fM(o,i),i=""),r=s,o=o||!Dr(r);t++}return i!==""&&(e+=fM(o,i)),e}function FB(n){return n.map(OB).join(",")}function LB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Dr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Cr={};function VB(n,e){return n.createText(e)}function jB(n,e,t){n.setValue(e,t)}function mN(n,e,t){return n.createElement(e,t)}function Wp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gN(n,e,t){n.appendChild(e,t)}function hM(n,e,t,r,i){r!==null?Wp(n,e,t,r,i):gN(n,e,t)}function BB(n,e,t){n.removeChild(null,e,t)}function UB(n,e,t){n.setAttribute(e,"style",t)}function $B(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yN(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&rB(n,e,r),i!==null&&$B(n,e,i),o!==null&&UB(n,e,o)}function rI(n,e,t,r,i,o,s,a,c,u,d){let h=$t+r,m=h+i,g=HB(h,m),_=typeof u=="function"?u():u;return g[ye]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function HB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cr);return t}function qB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=rI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function iI(n,e,t,r,i,o,s,a,c,u,d){let h=e.blueprint.slice();return h[yr]=i,h[me]=r|4|128|8|64|1024,(u!==null||n&&n[me]&2048)&&(h[me]|=2048),JE(h),h[Gt]=h[bs]=n,h[on]=t,h[Qr]=s||n&&n[Qr],h[ct]=a||n&&n[ct],h[Cs]=c||n&&n[Cs]||null,h[nr]=o,h[Lu]=yB(),h[Fu]=d,h[KE]=u,h[rr]=e.type==2?n[rr]:h,h}function zB(n,e,t){let r=_r(e,n),i=qB(t),o=n[Qr].rendererFactory,s=oI(n,iI(n,i,null,vN(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function vN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function _N(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function oI(n,e){return n[ic]?n[WE][tr]=e:n[ic]=e,n[WE]=e,e}function $(n=1){EN(wn(),Ne(),_o()+n,!1)}function EN(n,e,t,r){if(!r)if((e[me]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fp(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Lp(e,o,0,t)}Eo(t)}var lm=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(lm||{});function Lw(n,e,t,r){let i=Ee(null);try{let[o,s,a]=n.inputs[t],c=null;(s&lm.SignalBased)!==0&&(c=e[o][nn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):VM(e,c,o,r)}finally{Ee(i)}}var ti=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ti||{}),GB;function sI(n,e){return GB(n,e)}function lc(n,e,t,r,i){if(r!=null){let o,s=!1;vr(r)?o=r:Yr(r)&&(s=!0,r=r[yr]);let a=ir(r);n===0&&t!==null?i==null?gN(e,t,a):Wp(e,t,a,i||null,!0):n===1&&t!==null?Wp(e,t,a,i||null,!0):n===2?BB(e,a,s):n===3&&e.destroyNode(a),o!=null&&iU(e,n,o,t,i)}}function WB(n,e){wN(n,e),e[yr]=null,e[nr]=null}function KB(n,e,t,r,i,o){r[yr]=i,r[nr]=e,um(n,r,t,1,i,o)}function wN(n,e){e[Qr].changeDetectionScheduler?.notify(9),um(n,e,e[ct],2,null,null)}function QB(n){let e=n[ic];if(!e)return Dw(n[ye],n);for(;e;){let t=null;if(Yr(e))t=e[ic];else{let r=e[Rn];r&&(t=r)}if(!t){for(;e&&!e[tr]&&e!==n;)Yr(e)&&Dw(e[ye],e),e=e[Gt];e===null&&(e=n),Yr(e)&&Dw(e[ye],e),t=e&&e[tr]}e=t}}function aI(n,e){let t=n[Bu],r=t.indexOf(e);t.splice(r,1)}function IN(n,e){if(Ms(e))return;let t=e[ct];t.destroyNode&&um(n,e,t,3,null,null),QB(e)}function Dw(n,e){if(Ms(e))return;let t=Ee(null);try{e[me]&=-129,e[me]|=256,e[Un]&&Oh(e[Un]),ZB(n,e),YB(n,e),e[ye].type===1&&e[ct].destroy();let r=e[Ts];if(r!==null&&vr(e[Gt])){r!==e[Gt]&&aI(r,e);let i=e[As];i!==null&&i.detachView(n)}kw(e)}finally{Ee(t)}}function YB(n,e){let t=n.cleanup,r=e[rc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[rc]=null);let i=e[Ri];if(i!==null){e[Ri]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Vu];if(o!==null){e[Vu]=null;for(let s of o)s.destroy()}}function ZB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ks)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ge(4,a,c);try{c.call(a)}finally{Ge(5,a,c)}}else{Ge(4,i,o);try{o.call(i)}finally{Ge(5,i,o)}}}}}function JB(n,e,t){return XB(n,e.parent,t)}function XB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yr];if(vo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Pi.None||i===Pi.Emulated)return null}return _r(r,t)}function eU(n,e,t){return nU(n,e,t)}function tU(n,e,t){return n.type&40?_r(n,t):null}var nU=tU,pM;function cI(n,e,t,r){let i=JB(n,r,e),o=e[ct],s=r.parent||e[nr],a=eU(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)hM(o,i,t[c],a,!1);else hM(o,i,t,a,!1);pM!==void 0&&pM(o,r,e,t,i)}function Gu(n,e){if(e!==null){let t=e.type;if(t&3)return _r(e,n);if(t&4)return Vw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gu(n,r);{let i=n[e.index];return vr(i)?Vw(-1,i):ir(i)}}else{if(t&128)return Gu(n,e.next);if(t&32)return sI(e,n)()||ir(n[e.index]);{let r=DN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=po(n[rr]);return Gu(i,r)}else return Gu(n,e.next)}}}return null}function DN(n,e){if(e!==null){let r=n[rr][nr],i=e.projection;return r.projection[i]}return null}function Vw(n,e){let t=Rn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return Gu(r,i)}return e[yo]}function lI(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&fc(ir(a),r),t.flags|=2),!Xw(t))if(c&8)lI(n,e,t.child,r,i,o,!1),lc(e,n,i,a,o);else if(c&32){let u=sI(t,r),d;for(;d=u();)lc(e,n,i,d,o);lc(e,n,i,a,o)}else c&16?rU(n,e,r,t,i,o):lc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function um(n,e,t,r,i,o){lI(t,r,n.firstChild,e,i,o,!1)}function rU(n,e,t,r,i,o){let s=t[rr],c=s[nr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];lc(e,n,i,d,o)}else{let u=c,d=s[Gt];XM(r)&&(u.flags|=128),lI(n,e,u,d,i,o,!0)}}function iU(n,e,t,r,i){let o=t[yo],s=ir(t);o!==s&&lc(e,n,r,o,i);for(let a=Rn;a<t.length;a++){let c=t[a];um(c[ye],c,n,e,r,o)}}function oU(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ti.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ti.Important),n.setStyle(t,r,i,o))}}function CN(n,e,t,r,i){let o=_o(),s=r&2;try{Eo(-1),s&&e.length>$t&&EN(n,e,$t,!1),Ge(s?2:0,i,t),t(r,i)}finally{Eo(o),Ge(s?3:1,i,t)}}function uI(n,e,t){fU(n,e,t),(t.flags&64)===64&&hU(n,e,t)}function dI(n,e,t=_r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function sU(n,e,t,r){let o=r.get(sN,oN)||t===Pi.ShadowDom,s=n.selectRootElement(e,o);return aU(s),s}function aU(n){cU(n)}var cU=()=>null;function lU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bN(n,e,t,r,i,o){let s=e[ye];if(fI(n,s,e,t,r)){vo(n)&&dU(e,n.index);return}n.type&3&&(t=lU(t)),uU(n,e,t,r,i,o)}function uU(n,e,t,r,i,o){if(n.type&3){let s=_r(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function dU(n,e){let t=or(e,n);t[me]&16||(t[me]|=64)}function fU(n,e,t){let r=t.directiveStart,i=t.directiveEnd;vo(t)&&zB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||qp(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=zp(e,n,s,t);if(fc(c,e),o!==null&&yU(e,s-r,c,a,t,o),Zr(a)){let u=or(t.index,e);u[on]=zp(e,n,s,t)}}}function hU(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=YR();try{Eo(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];bp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&pU(c,u)}}finally{Eo(-1),bp(s)}}function pU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function TN(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];xB(e,o.selectors,!1)&&(r??=[],Zr(o)?r.unshift(o):r.push(o))}return r}function mU(n,e,t,r,i,o){let s=_r(n,e);gU(e[ct],s,o,n.value,t,r,i)}function gU(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ds(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function yU(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Lw(r,t,c,u)}}function SN(n,e,t,r,i){let o=$t+t,s=e[ye],a=i(s,e,n,r,t);e[o]=a,ac(n,!0);let c=n.type===2;return c?(yN(e[ct],a,n),(BR()===0||Uu(n))&&fc(a,e),UR()):fc(a,e),Rp()&&(!c||!Xw(n))&&cI(s,e,a,n),n}function AN(n){let e=n;return sw()?qR():(e=e.parent,ac(e,!1)),e}function vU(n,e){let t=n[Cs];if(!t)return;t.get($n,null)?.(e)}function fI(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],h=e.data[u];Lw(h,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];Lw(d,u,r,i),a=!0}return a}function _U(n,e){let t=or(e,n),r=t[ye];EU(r,t);let i=t[yr];i!==null&&t[Fu]===null&&(t[Fu]=aN(i,t[Cs])),Ge(18),hI(r,t,t[on]),Ge(19,t[on])}function EU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function hI(n,e,t){Tp(e);try{let r=n.viewQuery;r!==null&&Fw(1,r,t);let i=n.template;i!==null&&CN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[As]?.finishViewCreation(n),n.staticContentQueries&&cN(n,e),n.staticViewQueries&&Fw(2,n.viewQuery,t);let o=n.components;o!==null&&wU(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[me]&=-5,Sp()}}function wU(n,e){for(let t=0;t<e.length;t++)_U(n,e[t])}function IU(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[me]&4096?4096:16,c=iI(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ts]=u;let d=n[As];return d!==null&&(c[As]=d.createEmbeddedView(o)),hI(o,c,t),c}finally{Ee(i)}}function mM(n,e){return!e||e.firstChild===null||XM(n)}var gM=!1,DU=new z("");function Ku(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ir(o)),vr(o)&&RN(o,r);let s=t.type;if(s&8)Ku(n,e,t.child,r);else if(s&32){let a=sI(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=DN(e,t);if(Array.isArray(a))r.push(...a);else{let c=po(e[rr]);Ku(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RN(n,e){for(let t=Rn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&Ku(r[ye],r,i,e)}n[yo]!==n[yr]&&e.push(n[yo])}function MN(n){if(n[Rs]!==null){for(let e of n[Rs])e.impl.addSequence(e);n[Rs].length=0}}var NN=[];function CU(n){return n[Un]??bU(n)}function bU(n){let e=NN.pop()??Object.create(SU);return e.lView=n,e}function TU(n){n.lView[Un]!==n&&(n.lView=null,NN.push(n))}var SU=de(U({},us),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{sc(n.lView)},consumerOnSignalRead(){this.lView[Un]=this}});function AU(n){let e=n[Un]??Object.create(RU);return e.lView=n,e}var RU=de(U({},us),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=po(n.lView);for(;e&&!xN(e[ye]);)e=po(e);e&&XE(e)},consumerOnSignalRead(){this.lView[Un]=this}});function xN(n){return n.type!==2}function PN(n){if(n[Vu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Vu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[me]&8192)}}var MU=100;function pI(n,e=0){let r=n[Qr].rendererFactory,i=!1;i||r.begin?.();try{NU(n,e)}finally{i||r.end?.()}}function NU(n,e){let t=cw();try{lw(!0),jw(n,e);let r=0;for(;$u(n);){if(r===MU)throw new V(103,!1);r++,jw(n,1)}}finally{lw(t)}}function kN(n,e){aw(e?Hu.Exhaustive:Hu.OnlyDirtyViews);try{pI(n)}finally{aw(Hu.Off)}}function xU(n,e,t,r){if(Ms(e))return;let i=e[me],o=!1,s=!1;Tp(e);let a=!0,c=null,u=null;o||(xN(n)?(u=CU(e),c=ds(u)):Ph()===null?(a=!1,u=AU(e),c=ds(u)):e[Un]&&(Oh(e[Un]),e[Un]=null));try{JE(e),WR(n.bindingStartIndex),t!==null&&CN(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let g=n.preOrderCheckHooks;g!==null&&Fp(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Lp(e,g,0,null),ww(e,0)}if(s||PU(e),PN(e),ON(e,0),n.contentQueries!==null&&cN(n,e),!o)if(d){let g=n.contentCheckHooks;g!==null&&Fp(e,g)}else{let g=n.contentHooks;g!==null&&Lp(e,g,1),ww(e,1)}OU(n,e);let h=n.components;h!==null&&LN(e,h,0);let m=n.viewQuery;if(m!==null&&Fw(2,m,r),!o)if(d){let g=n.viewCheckHooks;g!==null&&Fp(e,g)}else{let g=n.viewHooks;g!==null&&Lp(e,g,2),ww(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ep]){for(let g of e[Ep])g();e[Ep]=null}o||(MN(e),e[me]&=-73)}catch(d){throw o||sc(e),d}finally{u!==null&&(Ba(u,c),a&&TU(u)),Sp()}}function ON(n,e){for(let t=tN(n);t!==null;t=nN(t))for(let r=Rn;r<t.length;r++){let i=t[r];FN(i,e)}}function PU(n){for(let e=tN(n);e!==null;e=nN(e)){if(!(e[me]&2))continue;let t=e[Bu];for(let r=0;r<t.length;r++){let i=t[r];XE(i)}}}function kU(n,e,t){Ge(18);let r=or(e,n);FN(r,t),Ge(19,r[on])}function FN(n,e){Dp(n)&&jw(n,e)}function jw(n,e){let r=n[ye],i=n[me],o=n[Un],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vu(o)),s||=!1,o&&(o.dirty=!1),n[me]&=-9217,s)xU(r,n,r.template,n[on]);else if(i&8192){let a=Ee(null);try{PN(n),ON(n,1);let c=r.components;c!==null&&LN(n,c,1),MN(n)}finally{Ee(a)}}}function LN(n,e,t){for(let r=0;r<e.length;r++)kU(n,e[r],t)}function OU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Eo(~i);else{let o=i,s=t[++r],a=t[++r];QR(s,o);let c=e[o];Ge(24,c),a(2,c),Ge(25,c)}}}finally{Eo(-1)}}function mI(n,e){let t=cw()?64:1088;for(n[Qr].changeDetectionScheduler?.notify(e);n;){n[me]|=t;let r=po(n);if(oc(n)&&!r)return n;n=r}return null}function VN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function FU(n,e,t,r=!0){let i=e[ye];if(LU(i,e,n,t),r){let s=Vw(t,n),a=e[ct],c=a.parentNode(n[yo]);c!==null&&KB(i,n[nr],a,e,c,s)}let o=e[Fu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Bw(n,e){if(n.length<=Rn)return;let t=Rn+e,r=n[t];if(r){let i=r[Ts];i!==null&&i!==n&&aI(i,r),e>0&&(n[t-1][tr]=r[tr]);let o=Pu(n,Rn+e);WB(r[ye],r);let s=o[As];s!==null&&s.detachView(o[ye]),r[Gt]=null,r[tr]=null,r[me]&=-129}return r}function LU(n,e,t,r){let i=Rn+r,o=t.length;r>0&&(t[i-1][tr]=e),r<o-Rn?(e[tr]=t[i],VE(t,Rn+r,e)):(t.push(e),e[tr]=null),e[Gt]=t;let s=e[Ts];s!==null&&t!==s&&jN(s,e);let a=e[As];a!==null&&a.insertView(n),Cp(e),e[me]|=128}function jN(n,e){let t=n[Bu],r=e[Gt];if(Yr(r))n[me]|=2;else{let i=r[Gt][rr];e[rr]!==i&&(n[me]|=2)}t===null?n[Bu]=[e]:t.push(e)}var wo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ye];return Ku(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return Ms(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if(vr(e)){let t=e[ju],r=t?t.indexOf(this):-1;r>-1&&(Bw(e,r),Pu(t,r))}this._attachedToViewContainer=!1}IN(this._lView[ye],this._lView)}onDestroy(e){ew(this._lView,e)}markForCheck(){mI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[me]&=-129}reattach(){Cp(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,pI(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Cs].get(DU,gM)}catch{this.exhaustive=gM}}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=oc(this._lView),t=this._lView[Ts];t!==null&&!e&&aI(t,this._lView),wN(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=oc(this._lView),r=this._lView[Ts];r!==null&&!t&&jN(r,this._lView),Cp(this._lView)}};var Xu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=VU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=IU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new wo(o)}}return n})();function VU(){return BN(Wt(),Ne())}function BN(n,e){return n.type&4?new Xu(e,n,rm(n,e)):null}function dm(n,e,t,r,i){let o=n.data[e];if(o===null)o=jU(n,e,t,r,i),KR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=HR();o.injectorIndex=s===null?-1:s.injectorIndex}return ac(o,!0),o}function jU(n,e,t,r,i){let o=ow(),s=sw(),a=s?o:o&&o.parent,c=n.data[e]=UU(n,a,t,e,r,i);return BU(n,c,o,s),c}function BU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function UU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $R()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vee=new RegExp(`^(\\d+)*(${wB}|${EB})*(.*)`);var $U=()=>null;function yM(n,e){return $U(n,e)}var UN=class{},fm=class{},Uw=class{resolveComponentFactory(e){throw new V(917,!1)}},ed=class{static NULL=new Uw},ki=class{},Fi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HU()}return n})();function HU(){let n=Ne(),e=Wt(),t=or(e.index,n);return(Yr(t)?t:n)[ct]}var $N=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var Vp={},$w=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Vp,r);return i!==Vp||t===Vp?i:this.parentInjector.get(e,t,r)}};function Kp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=bE(i,a);else if(o==2){let c=a,u=e[++s];r=bE(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function J(n,e=0){let t=Ne();if(t===null)return q(n,e);let r=Wt();return YM(r,t,zt(n),e)}function gI(){let n="invalid";throw new Error(n)}function HN(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}GU(n,e,t,a,o,c,u)}o!==null&&r!==null&&qU(t,r,o)}function qU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function zU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function GU(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&Zr(g)&&(c=!0,zU(n,t,m)),xw(qp(t,e),n,g.type)}JU(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=_N(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=dc(t.mergedAttrs,g.hostAttrs),KU(n,t,e,h,g),ZU(h,g,i),s!==null&&s.has(g)){let[D,T]=s.get(g);t.directiveToIndex.set(g.type,[h,D+t.directiveStart,T+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}WU(n,t,o)}function WU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))vM(0,e,i,r),vM(1,e,i,r),EM(e,r,!1);else{let o=t.get(i);_M(0,e,o,r),_M(1,e,o,r),EM(e,r,!0)}}}function vM(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),qN(e,o)}}function _M(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qN(e,s)}}function qN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function EM(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||nI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function KU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ho(i.type,!0)),s=new ks(o,Zr(i),J,null);n.blueprint[r]=s,t[r]=s,QU(n,e,r,_N(n,t,i.hostVars,Cr),i)}function QU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YU(s)!=a&&s.push(a),s.push(t,r,o)}}function YU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zr(e)&&(t[""]=n)}}function JU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zN(n,e,t,r,i,o,s,a){let c=e[ye],u=c.consts,d=Ns(u,s),h=dm(c,n,t,r,d);return o&&HN(c,e,h,Ns(u,a),i),h.mergedAttrs=dc(h.mergedAttrs,h.attrs),h.attrs!==null&&Kp(h,h.attrs,!1),h.mergedAttrs!==null&&Kp(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function GN(n,e){$M(n,e),QE(e)&&n.queries.elementEnd(e)}function XU(n,e,t,r,i,o){let s=e.consts,a=Ns(s,i),c=dm(e,n,t,r,a);if(c.mergedAttrs=dc(c.mergedAttrs,c.attrs),o!=null){let u=Ns(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return c.attrs!==null&&Kp(c,c.attrs,!1),c.mergedAttrs!==null&&Kp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function yI(n){return KN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function KN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function QN(n,e,t){return n[e]=t}function Io(n,e,t){if(t===Cr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function YN(n,e,t,r){let i=Io(n,e,t);return Io(n,e+1,r)||i}function jp(n,e,t){return function r(i){let o=vo(n)?or(n.index,e):e;mI(o,5);let s=e[on],a=wM(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=wM(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function wM(n,e,t,r){let i=Ee(null);try{return Ge(6,e,t),t(r)!==!1}catch(o){return vU(n,o),!1}finally{Ge(7,e,t),Ee(i)}}function ZN(n,e,t,r,i,o,s,a){let c=Uu(n),u=!1,d=null;if(!r&&c&&(d=e$(e,t,o,n.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let h=_r(n,t),m=r?r(h):h;DB(t,m,o,a);let g=i.listen(m,o,a),_=r?D=>r(ir(D[n.index])):n.index;JN(_,e,t,o,a,g,!1)}return u}function e$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[rc],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function JN(n,e,t,r,i,o,s){let a=e.firstCreatePass?jR(e):null,c=VR(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function IM(n,e,t,r,i,o){let s=e[t],a=e[ye],u=a.data[t].outputs[r],h=s[u].subscribe(o);JN(n.index,a,e,i,o,h,!0)}var Hw=Symbol("BINDING");var Qp=class extends ed{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xi(e);return new Os(t,this.ngModule)}};function t$(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&lm.SignalBased)!==0};return i&&(o.transform=i),o})}function n$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function r$(n,e,t){let r=e instanceof ze?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $w(t,r):t}function i$(n){let e=n.get(ki,null);if(e===null)throw new V(407,!1);let t=n.get($N,null),r=n.get(Ni,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function o$(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return mN(e,t,t==="svg"?PR:t==="math"?kR:null)}var Os=class extends fm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=t$(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=n$(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=FB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ge(22);let a=Ee(null);try{let c=this.componentDef,u=s$(r,c,s,o),d=r$(c,i||this.ngModule,e),h=i$(d),m=h.rendererFactory.createRenderer(null,c),g=r?sU(m,r,c.encapsulation,d):o$(c,m),_=s?.some(DM)||o?.some(F=>typeof F!="function"&&F.bindings.some(DM)),D=iI(null,u,null,512|vN(c),null,null,h,m,d,null,aN(g,d,!0));D[$t]=g,Tp(D);let T=null;try{let F=zN($t,D,2,"#host",()=>u.directiveRegistry,!0,0);g&&(yN(m,g,F),fc(g,D)),uI(u,D,F),lN(u,F,D),GN(u,F),t!==void 0&&c$(F,this.ngContentSelectors,t),T=or(F.index,D),D[on]=T[on],hI(u,D,null)}catch(F){throw T!==null&&kw(T),kw(D),F}finally{Ge(23),Sp()}return new Yp(this.componentType,D,!!_)}finally{Ee(a)}}};function s$(n,e,t,r){let i=n?["ng-version","20.1.4"]:LB(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[Hw].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let m of h.bindings){a+=m[Hw].requiredVars;let g=d+1;m.create&&(m.targetIdx=g,(o??=[]).push(m)),m.update&&(m.targetIdx=g,(s??=[]).push(m))}}let c=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,m=$E(h);c.push(m)}return rI(0,null,a$(o,s),1,a,c,null,null,null,[i],null)}function a$(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function DM(n){let e=n[Hw].kind;return e==="input"||e==="twoWay"}var Yp=class extends UN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=wp(t[ye],$t),this.location=rm(this._tNode,t),this.instance=or(this._tNode.index,t)[on],this.hostView=this.changeDetectorRef=new wo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=fI(r,i[ye],i,e,t);this.previousInputValues.set(e,t);let s=or(r.index,i);mI(s,1)}get injector(){return new Ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function c$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var js=(()=>{class n{static __NG_ELEMENT_ID__=l$}return n})();function l$(){let n=Wt();return d$(n,Ne())}var u$=js,XN=class extends u${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rm(this._hostTNode,this._hostLView)}get injector(){return new Ps(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yw(this._hostTNode,this._hostLView);if(qM(e)){let t=$p(e,this._hostLView),r=Up(e),i=t[ye].data[r+8];return new Ps(i,t)}else return new Ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=CM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=yM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mM(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!Qj(e),u;if(c)u=t;else{let T=t||{};u=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let d=c?e:new Os(xi(e)),h=r||this.parentInjector;if(!o&&d.ngModule==null){let F=(c?h:this.parentInjector).get(ze,null);F&&(o=F)}let m=xi(d.componentType??{}),g=yM(this._lContainer,m?.id??null),_=g?.firstChild??null,D=d.create(h,i,_,o,s,a);return this.insertImpl(D.hostView,u,mM(this._hostTNode,g)),D}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(OR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Gt],u=new XN(c,c[nr],c[Gt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return FU(s,i,o,r),e.attachToViewContainerRef(),VE(Cw(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=CM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bw(this._lContainer,t);r&&(Pu(Cw(this._lContainer),t),IN(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bw(this._lContainer,t);return r&&Pu(Cw(this._lContainer),t)!=null?new wo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function CM(n){return n[ju]}function Cw(n){return n[ju]||(n[ju]=[])}function d$(n,e){let t,r=e[n.index];return vr(r)?t=r:(t=VN(r,e,null,n),e[n.index]=t,oI(e,t)),h$(t,e,n,r),new XN(t,n,e)}function f$(n,e){let t=n[ct],r=t.createComment(""),i=_r(e,n),o=t.parentNode(i);return Wp(t,o,r,t.nextSibling(i),!1),r}var h$=g$,p$=()=>!1;function m$(n,e,t){return p$(n,e,t)}function g$(n,e,t,r){if(n[yo])return;let i;t.type&8?i=ir(r):i=f$(e,t),n[yo]=i}function ex(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(v$))}return o}return Zp.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,m)=>{a.push(""),s.push(r(h).then(g=>{a[u+m]=g,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>_$(o));e.push(c)}),tx(),Promise.all(e).then(()=>{})}var Zp=new Map,y$=new Set;function tx(){let n=Zp;return Zp=new Map,n}function nx(){return Zp.size===0}function v$(n){return typeof n=="string"?n:n.text()}function _$(n){y$.delete(n)}var bM=new Set;function Bs(n){bM.has(n)||(bM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Fs=class{},hm=class{};var Qu=class extends Fs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Qp(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=UE(e);this._bootstrapComponents=hN(o.bootstrap),this._r3Injector=mw(e,t,[{provide:Fs,useValue:this},{provide:ed,useValue:this.componentFactoryResolver},...r],Mi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yu=class extends hm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Qu(this.moduleType,e,[])}};function rx(n,e,t){return new Qu(n,e,t,!1)}var Jp=class extends Fs{injector;componentFactoryResolver=new Qp(this);instance=null;constructor(e){super();let t=new Es([...e.providers,{provide:Fs,useValue:this},{provide:ed,useValue:this.componentFactoryResolver}],e.parent||Ou(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function mc(n,e,t=null){return new Jp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var E$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=HE(!1,t.type),i=r.length>0?mc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(q(ze))})}return n})();function We(n){return pc(()=>{let e=ix(n),t=de(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(E$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pi.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Bs("NgStandalone"),ox(t);let r=n.dependencies;return t.directiveDefs=TM(r,w$),t.pipeDefs=TM(r,SR),t.id=C$(t),t})}function w$(n){return xi(n)||$E(n)}function tt(n){return pc(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function I$(n,e){if(n==null)return mo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=lm.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function D$(n){if(n==null)return mo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function wt(n){return pc(()=>{let e=ix(n);return ox(e),e})}function pm(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ix(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||mo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:I$(n.inputs,e),outputs:D$(n.outputs),debugInfo:null}}function ox(n){n.features?.forEach(e=>e(n))}function TM(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function C$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function b$(n){return Object.getPrototypeOf(n.prototype).constructor}function br(n){let e=b$(n.type),t=!0,r=[n];for(;e;){let i;if(Zr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=bw(n.inputs),s.declaredInputs=bw(n.declaredInputs),s.outputs=bw(n.outputs);let a=i.hostBindings;a&&M$(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&A$(n,c),u&&R$(n,u),T$(n,i),ER(n.outputs,i.outputs),Zr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===br&&(t=!1)}}e=Object.getPrototypeOf(e)}S$(r)}function T$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function S$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dc(i.hostAttrs,t=dc(t,i.hostAttrs))}}function bw(n){return n===mo?{}:n===Bn?[]:n}function A$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function R$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function M$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function N$(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=dc(n.mergedAttrs,n.attrs);let d=n.tView=rI(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ac(n,!1);let c=P$(t,e,n,r);Rp()&&cI(t,e,c,n),fc(c,e);let u=VN(c,e,c,n);e[r+$t]=u,oI(e,u),m$(u,n,e)}function x$(n,e,t,r,i,o,s,a,c,u,d){let h=t+$t,m;return e.firstCreatePass?(m=dm(e,h,4,s||null,a||null),nw()&&HN(e,n,m,Ns(e.consts,u),TN),$M(e,m)):m=e.data[h],N$(m,n,e,t,r,i,o,c),Uu(m)&&uI(e,n,m),u!=null&&dI(n,m,d),m}function Le(n,e,t,r,i,o,s,a){let c=Ne(),u=wn(),d=Ns(u.consts,o);return x$(c,u,n,e,t,r,i,d,void 0,s,a),Le}var P$=k$;function k$(n,e,t,r){return Mp(!0),e[ct].createComment("")}var mm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(mm||{}),Us=new z(""),sx=!1,qw=class extends Xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,GE()&&(this.destroyRef=O(Jr,{optional:!0})??void 0,this.pendingTasks=O(Xr,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=qw;function ax(n){let e,t;function r(){n=zu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function SM(n){return queueMicrotask(()=>n()),()=>{n=zu}}var vI="isAngularZone",Xp=vI+"_ID",O$=0,he=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sx}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,V$(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(vI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,F$,zu,zu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},F$={};function _I(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function L$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ax(()=>{n.callbackScheduled=!1,zw(n),n.isCheckStableRunning=!0,_I(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),zw(n)}function V$(n){let e=()=>{L$(n)},t=O$++;n._inner=n._inner.fork({name:"angular",properties:{[vI]:!0,[Xp]:t,[Xp+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(j$(c))return r.invokeTask(o,s,a,c);try{return AM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),RM(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return AM(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!B$(c)&&e(),RM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,zw(n),_I(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function zw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function AM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function RM(n){n._nesting--,_I(n)}var Zu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function j$(n){return cx(n,"__ignore_ng_zone__")}function B$(n){return cx(n,"__scheduler_tick__")}function cx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function lx(n="zone.js",e){return n==="noop"?new Zu:n==="zone.js"?new he(e):n}var EI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),ux=[0,1,2,3],dx=(()=>{class n{ngZone=O(he);scheduler=O(Ni);errorHandler=O(gr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(Us,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ge(16),this.executing=!0;for(let r of ux)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ge(17)}register(t){let{view:r}=t;r!==void 0?((r[Rs]??=[]).push(t),sc(r),r[me]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(mm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),em=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Rs];e&&(this.view[Rs]=e.filter(t=>t!==this))}};function gm(n,e){let t=e?.injector??O(it);return Bs("NgAfterNextRender"),$$(n,t,e,!0)}function U$(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function $$(n,e,t,r){let i=e.get(EI);i.impl??=e.get(dx);let o=e.get(Us,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Jr):null,a=e.get(xp,null,{optional:!0}),c=new em(i.impl,U$(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var wI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var ym=new z(""),gc=new z(""),td=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,GE()&&(this._destroyRef=O(Jr,{optional:!0})??void 0),II||(fx(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(q(he),q(nd),q(gc))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),nd=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return II?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function fx(n){II=n}var II;function Do(n){return!!n&&typeof n.then=="function"}function DI(n){return!!n&&typeof n.subscribe=="function"}var CI=new z("");function vm(n){return Kr([{provide:CI,multi:!0,useValue:n}])}var bI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(CI,{optional:!0})??[];injector=O(it);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=St(this.injector,i);if(Do(o))t.push(o);else if(DI(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_m=new z("");function hx(){W_(()=>{let n="";throw new V(600,n)})}function px(n){return n.isBoundToModule}var H$=10;function TI(n,e){return Array.isArray(e)?e.reduce(TI,n):U(U({},n),e)}var ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O($n);afterRenderManager=O(EI);zonelessEnabled=O(Np);rootEffectScheduler=O(Ew);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(Xr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ne(t=>!t))}constructor(){O(Us,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=it.NULL){return this._injector.get(he).run(()=>{Ge(10);let s=t instanceof fm;if(!this._injector.get(bI).done){let _="";throw new V(405,_)}let c;s?c=t:c=this._injector.get(ed).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=px(c)?void 0:this._injector.get(Fs),d=r||c.selector,h=c.create(i,[],d,u),m=h.location.nativeElement,g=h.injector.get(ym,null);return g?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),Wu(this.components,h),g?.unregisterApplication(m)}),this._loadComponent(h),Ge(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ge(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(mm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ee(t),this.afterTick.next(),Ge(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ki,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<H$;)Ge(14),this.synchronizeOnce(),Ge(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!$u(i))continue;let o=r&&!this.zonelessEnabled?0:1;pI(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$u(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Wu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(_m,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rd(n,e,t,r){let i=Ne(),o=qu();if(Io(i,o,e)){let s=wn(),a=Ap();mU(a,i,n,e,t,r)}return rd}function le(n,e,t){let r=Ne(),i=qu();if(Io(r,i,e)){let o=wn(),s=Ap();bN(s,r,n,e,r[ct],t)}return le}function MM(n,e,t,r,i){fI(e,n,t,i?"class":"style",r)}function k(n,e,t,r){let i=Ne(),o=i[ye],s=n+$t,a=o.firstCreatePass?zN(s,i,2,e,TN,nw(),t,r):o.data[s];if(SN(a,i,n,e,mx),Uu(a)){let c=i[ye];uI(c,i,a),lN(c,a,i)}return r!=null&&dI(i,a),k}function P(){let n=wn(),e=Wt(),t=AN(e);return n.firstCreatePass&&GN(n,t),rw(t)&&iw(),tw(),t.classesWithoutHost!=null&&tB(t)&&MM(n,t,Ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&nB(t)&&MM(n,t,Ne(),t.stylesWithoutHost,!1),P}function ge(n,e,t,r){return k(n,e,t,r),P(),ge}function an(n,e,t,r){let i=Ne(),o=i[ye],s=n+$t,a=o.firstCreatePass?XU(s,o,2,e,t,r):o.data[s];return SN(a,i,n,e,mx),r!=null&&dI(i,a),an}function Kt(){let n=Wt(),e=AN(n);return rw(e)&&iw(),tw(),Kt}function yc(n,e,t,r){return an(n,e,t,r),Kt(),yc}var mx=(n,e,t,r,i)=>(Mp(!0),mN(e[ct],r,nM()));function $s(){return Ne()}var xs=void 0;function q$(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var z$=["en",[["a","p"],["AM","PM"],xs],[["AM","PM"],xs,xs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xs,"{1} 'at' {0}",xs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",q$],Tw={};function Hn(n){let e=G$(n),t=NM(e);if(t)return t;let r=e.split("-")[0];if(t=NM(r),t)return t;if(r==="en")return z$;throw new V(701,!1)}function NM(n){return n in Tw||(Tw[n]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[n]),Tw[n]}var It=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(It||{});function G$(n){return n.toLowerCase().replace(/_/g,"-")}var id="en-US";var W$=id;function gx(n){typeof n=="string"&&(W$=n.toLowerCase().replace(/_/g,"-"))}function pt(n,e,t){let r=Ne(),i=wn(),o=Wt();return yx(i,r,r[ct],o,n,e,t),pt}function sr(n,e,t){let r=Ne(),i=wn(),o=Wt();return(o.type&3||t)&&ZN(o,i,r,t,r[ct],n,e,jp(o,r,e)),sr}function yx(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=jp(r,e,o),ZN(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let m=d[h],g=d[h+1];c??=jp(r,e,o),IM(r,e,m,g,i,c)}if(u&&u.length)for(let h of u)c??=jp(r,e,o),IM(r,e,h,i,i,c)}}function Ve(n=1){return tM(n)}function SI(n){let e=zR();return Ip(e,$t+n)}function kp(n,e){return n<<17|e<<2}function Ls(n){return n>>17&32767}function K$(n){return(n&2)==2}function Q$(n,e){return n&131071|e<<17}function Gw(n){return n|2}function hc(n){return(n&131068)>>2}function Sw(n,e){return n&-131069|e<<2}function Y$(n){return(n&1)===1}function Ww(n){return n|1}function Z$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ls(s),c=hc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||nc(h,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=Ls(n[a+1]);n[r+1]=kp(m,a),m!==0&&(n[m+1]=Sw(n[m+1],r)),n[a+1]=Q$(n[a+1],r)}else n[r+1]=kp(a,0),a!==0&&(n[a+1]=Sw(n[a+1],r)),a=r;else n[r+1]=kp(c,0),a===0?a=r:n[c+1]=Sw(n[c+1],r),c=r;u&&(n[r+1]=Gw(n[r+1])),xM(n,d,r,!0),xM(n,d,r,!1),J$(e,d,n,r,o),s=kp(a,c),o?e.classBindings=s:e.styleBindings=s}function J$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&nc(o,e)>=0&&(t[r+1]=Ww(t[r+1]))}function xM(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ls(i):hc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];X$(c,e)&&(a=!0,n[s+1]=r?Ww(u):Gw(u)),s=r?Ls(u):hc(u)}a&&(n[t+1]=r?Gw(i):Ww(i))}function X$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?nc(n,e)>=0:!1}function At(n,e){return eH(n,e,null,!0),At}function eH(n,e,t,r){let i=Ne(),o=wn(),s=dw(2);if(o.firstUpdatePass&&nH(o,n,s,r),e!==Cr&&Io(i,s,e)){let a=o.data[_o()];aH(o,a,i,i[ct],n,i[s+1]=cH(e,t),r,s)}}function tH(n,e){return e>=n.expandoStartIndex}function nH(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[_o()],s=tH(n,t);lH(o,r)&&e===null&&!s&&(e=!1),e=rH(i,o,e,r),Z$(i,o,e,t,s,r)}}function rH(n,e,t,r){let i=ZR(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Aw(null,n,e,t,r),t=Ju(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Aw(i,n,e,t,r),o===null){let c=iH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Aw(null,n,e,c[1],r),c=Ju(c,e.attrs,r),oH(n,e,r,c))}else o=sH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function iH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(hc(r)!==0)return n[Ls(r)]}function oH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ls(i)]=r}function sH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ju(r,s,t)}return Ju(r,e.attrs,t)}function Aw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ju(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ju(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),TR(n,s,t?!0:e[++o]))}return n===void 0?null:n}function aH(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=Y$(u)?PM(c,e,t,i,hc(u),s):void 0;if(!tm(d)){tm(o)||K$(u)&&(o=PM(c,null,t,i,a,s));let h=YE(_o(),t);oU(r,s,h,i,o)}}function PM(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,h=d===null,m=t[i+1];m===Cr&&(m=h?Bn:void 0);let g=h?_p(m,r):d===r?m:void 0;if(u&&!tm(g)&&(g=_p(c,r)),tm(g)&&(a=g,s))return a;let _=n[i+1];i=s?Ls(_):hc(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=_p(c,r))}return a}function tm(n){return n!==void 0}function cH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mi(cm(n)))),n}function lH(n,e){return(n.flags&(e?8:16))!==0}function H(n,e=""){let t=Ne(),r=wn(),i=n+$t,o=r.firstCreatePass?dm(r,i,1,e,null):r.data[i],s=uH(r,t,o,e,n);t[i]=s,Rp()&&cI(r,t,s,o),ac(o,!1)}var uH=(n,e,t,r,i)=>(Mp(!0),VB(e[ct],r));function dH(n,e,t,r=""){return Io(n,qu(),t)?e+Ds(t)+r:Cr}function fH(n,e,t,r,i,o=""){let s=GR(),a=YN(n,s,t,i);return dw(2),a?e+Ds(t)+r+Ds(i)+o:Cr}function Ae(n){return Ft("",n),Ae}function Ft(n,e,t){let r=Ne(),i=dH(r,n,e,t);return i!==Cr&&vx(r,_o(),i),Ft}function Co(n,e,t,r,i){let o=Ne(),s=fH(o,n,e,t,r,i);return s!==Cr&&vx(o,_o(),s),Co}function vx(n,e,t){let r=YE(e,n);jB(n[ct],r,t)}function Em(n,e,t){yw(e)&&(e=e());let r=Ne(),i=qu();if(Io(r,i,e)){let o=wn(),s=Ap();bN(s,r,n,e,r[ct],t)}return Em}function AI(n,e){let t=yw(n);return t&&n.set(e),t}function wm(n,e){let t=Ne(),r=wn(),i=Wt();return yx(r,t,t[ct],i,n,e),wm}function hH(n,e,t){let r=wn();if(r.firstCreatePass){let i=Zr(n);Kw(t,r.data,r.blueprint,i,!0),Kw(e,r.data,r.blueprint,i,!1)}}function Kw(n,e,t,r,i){if(n=zt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Kw(n[o],e,t,r,i);else{let o=wn(),s=Ne(),a=Wt(),c=_s(n)?n:zt(n.provide),u=zE(n),d=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(_s(n)||!n.multi){let g=new ks(u,i,J,null),_=Mw(c,e,i?d:d+m,h);_===-1?(xw(qp(a,s),o,c),Rw(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[_]=g,s[_]=g)}else{let g=Mw(c,e,d+m,h),_=Mw(c,e,d,d+m),D=g>=0&&t[g],T=_>=0&&t[_];if(i&&!T||!i&&!D){xw(qp(a,s),o,c);let F=gH(i?mH:pH,t.length,i,r,u,n);!i&&T&&(t[_].providerFactory=F),Rw(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=_x(t[i?_:g],u,!i&&r);Rw(o,n,g>-1?g:_,F)}!i&&r&&T&&t[_].componentProviders++}}}function Rw(n,e,t,r){let i=_s(e),o=NR(e);if(i||o){let c=(o?zt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function _x(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Mw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function pH(n,e,t,r,i){return Qw(this.multi,[])}function mH(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=zp(r,r[ye],this.providerFactory.index,i);s=c.slice(0,a),Qw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Qw(o,s);return s}function Qw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function gH(n,e,t,r,i,o){let s=new ks(n,t,J,null);return s.multi=[],s.index=e,s.componentProviders=0,_x(s,i,r&&!t),s}function Hs(n,e=[]){return t=>{t.providersResolver=(r,i)=>hH(r,i?i(n):n,e)}}function Ex(n,e){let t=n[e];return t===Cr?void 0:t}function yH(n,e,t,r,i,o){let s=e+t;return Io(n,s,i)?QN(n,s+1,o?r.call(o,i):r(i)):Ex(n,s+1)}function vH(n,e,t,r,i,o,s){let a=e+t;return YN(n,a,i,o)?QN(n,a+2,s?r.call(s,i,o):r(i,o)):Ex(n,a+2)}function od(n,e){let t=wn(),r,i=n+$t;t.firstCreatePass?(r=_H(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ho(r.type,!0)),s,a=_n(J);try{let c=Hp(!1),u=o();return Hp(c),ZE(t,Ne(),i,u),u}finally{_n(a)}}function _H(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function RI(n,e,t){let r=n+$t,i=Ne(),o=Ip(i,r);return wx(i,r)?yH(i,uw(),e,o.transform,t,o):o.transform(t)}function MI(n,e,t,r){let i=n+$t,o=Ne(),s=Ip(o,i);return wx(o,i)?vH(o,uw(),e,s.transform,t,r,s):s.transform(t,r)}function wx(n,e){return n[ye].data[e].pure}function NI(n,e){return BN(n,e)}var Op=null;function Ix(n){Op!==null&&(n.defaultEncapsulation!==Op.defaultEncapsulation||n.preserveWhitespaces!==Op.preserveWhitespaces)||(Op=n)}var nm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xI=(()=>{class n{compileModuleSync(t){return new Yu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=UE(t),o=hN(i.declarations).reduce((s,a)=>{let c=xi(a);return c&&s.push(new Os(c)),s},[]);return new nm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dx=new z("");var EH=(()=>{class n{zone=O(he);changeDetectionScheduler=O(Ni);applicationRef=O(ii);applicationErrorHandler=O($n);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(de(U({},PI()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:go,multi:!0,useFactory:()=>{let r=O(EH,{optional:!0});return()=>r.initialize()}},{provide:go,multi:!0,useFactory:()=>{let r=O(wH);return()=>{r.initialize()}}},e===!0?{provide:vw,useValue:!0}:[],{provide:_w,useValue:t??sx},{provide:$n,useFactory:()=>{let r=O(he),i=O(ze),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(gr),o.handleError(s))})}}}]}function PI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var wH=(()=>{class n{subscription=new rt;initialized=!1;zone=O(he);pendingTasks=O(Xr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bx=(()=>{class n{applicationErrorHandler=O($n);appRef=O(ii);taskService=O(Xr);ngZone=O(he);zonelessEnabled=O(Np);tracing=O(Us,{optional:!0});disableScheduling=O(vw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(_w,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?SM:ax;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,SM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IH(){return typeof $localize<"u"&&$localize.locale||id}var sd=new z("",{providedIn:"root",factory:()=>O(sd,{optional:!0,skipSelf:!0})||IH()});function Tr(n){return yR(n)}function vc(n,e){return Lh(n,e?.equal)}var Tx=class{[nn];constructor(e){this[nn]=e}destroy(){this[nn].destroy()}};var kx=Symbol("InputSignalNode#UNSET"),OH=de(U({},Vh),{transformFn:void 0,applyValueToInputSignal(n,e){$a(n,e)}});function Ox(n,e){let t=Object.create(OH);t.value=n,t.transformFn=e?.transform;function r(){if(ja(t),t.value===kx){let i=null;throw new V(-950,i)}return t.value}return r[nn]=t,r}var FH=new z("");FH.__NG_ELEMENT_ID__=n=>{let e=Wt();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new V(204,!1)};function Sx(n,e){return Ox(n,e)}function LH(n){return Ox(kx,n)}var Fx=(Sx.required=LH,Sx);var qs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Cm=new qs("20.1.4");function VH(n,e,t){let r=new Yu(t);return Promise.resolve(r)}function Ax(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Im=new z(""),jH=new z("");function ad(n){return!n.moduleRef}function BH(n){let e=ad(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{ad(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($n),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),ad(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Im);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Im);s.add(o),n.moduleRef.onDestroy(()=>{Wu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return $H(r,t,()=>{let o=e.get(Xr),s=o.add(),a=e.get(bI);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(sd,id);if(gx(c||id),!e.get(jH,!0))return ad(n)?e.get(ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ad(n)){let d=e.get(ii);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return Lx?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Lx;function Rx(){Lx=UH}function UH(n,e){let t=n.injector.get(ii);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new V(-403,!1);e.push(n)}function $H(n,e,t){try{let r=t();return Do(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Vx=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>lx(r?.ngZone,de(U({},PI({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[Cx({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ni,useExisting:bx},iM],c=rx(t.moduleType,this.injector,a);return Rx(),BH({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=TI({},r);return Rx(),VH(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new V(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Im,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(q(it))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),cd=null,jx=new z("");function HH(n){if(cd&&!cd.get(jx,!1))throw new V(400,!1);hx(),cd=n;let e=n.get(Vx);return GH(n),e}function VI(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=Bx();if(!s||s.injector.get(jx,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):HH(qH(a,r))}return zH(i)}}function qH(n=[],e){return it.create({name:e,providers:[{provide:ku,useValue:"platform"},{provide:Im,useValue:new Set([()=>cd=null])},...n]})}function zH(n){let e=Bx();if(!e)throw new V(401,!1);return e}function Bx(){return cd?.get(Vx)??null}function GH(n){let e=n.get(om,null);St(n,()=>{e?.forEach(t=>t())})}function _c(){return!1}var Li=(()=>{class n{static __NG_ELEMENT_ID__=WH}return n})();function WH(n){return KH(Wt(),Ne(),(n&16)===16)}function KH(n,e,t){if(vo(n)&&!t){let r=or(n.index,e);return new wo(r,r)}else if(n.type&175){let r=e[rr];return new wo(r,e)}return null}var kI=class{constructor(){}supports(e){return yI(e)}create(e){return new OI(e)}},QH=(n,e)=>e,OI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||QH}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Mx(r,i,o)?t:r,a=Mx(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let g=m<o.length?o[m]:o[m]=0,_=g+m;d<=_&&_<u&&(o[m]=g+1)}let h=s.previousIndex;o[h]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yI(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new FI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},FI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},LI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Dm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new LI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Mx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Nx(){return new jI([new kI])}var jI=(()=>{class n{factories;static \u0275prov=K({token:n,providedIn:"root",factory:Nx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nx()),deps:[[n,new FM,new sn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new V(901,!1)}}return n})();var Ux=VI(null,"core",[]),$x=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(q(ii))};static \u0275mod=tt({type:n});static \u0275inj=Ke({})}return n})();function ld(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Hx(n){let e=xi(n);if(!e)return null;let t=new Os(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Gx=null;function qn(){return Gx}function BI(n){Gx??=n}var ud=class{},dd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(Wx),providedIn:"platform"})}return n})(),UI=new z(""),Wx=(()=>{class n extends dd{_location;_history;_doc=O(ht);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function bm(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function qx(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Sr(n){return n&&n[0]!=="?"?`?${n}`:n}var Vi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(Sm),providedIn:"root"})}return n})(),Tm=new z(""),Sm=(()=>{class n extends Vi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return bm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Sr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(dd),q(Tm,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bo=(()=>{class n{_subject=new Xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=JH(qx(zx(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sr(r))}normalize(t){return n.stripTrailingSlash(ZH(this._basePath,zx(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Sr;static joinWithSlash=bm;static stripTrailingSlash=qx;static \u0275fac=function(r){return new(r||n)(q(Vi))};static \u0275prov=K({token:n,factory:()=>YH(),providedIn:"root"})}return n})();function YH(){return new bo(q(Vi))}function ZH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function zx(n){return n.replace(/\/index.html$/,"")}function JH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var zI=(()=>{class n extends Vi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=bm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(dd),q(Tm,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var cn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(cn||{}),$e=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}($e||{}),Nn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Nn||{}),Bi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Zx(n){return Hn(n)[It.LocaleId]}function Jx(n,e,t){let r=Hn(n),i=[r[It.DayPeriodsFormat],r[It.DayPeriodsStandalone]],o=cr(i,e);return cr(o,t)}function Xx(n,e,t){let r=Hn(n),i=[r[It.DaysFormat],r[It.DaysStandalone]],o=cr(i,e);return cr(o,t)}function eP(n,e,t){let r=Hn(n),i=[r[It.MonthsFormat],r[It.MonthsStandalone]],o=cr(i,e);return cr(o,t)}function tP(n,e){let r=Hn(n)[It.Eras];return cr(r,e)}function fd(n,e){let t=Hn(n);return cr(t[It.DateFormat],e)}function hd(n,e){let t=Hn(n);return cr(t[It.TimeFormat],e)}function pd(n,e){let r=Hn(n)[It.DateTimeFormat];return cr(r,e)}function md(n,e){let t=Hn(n),r=t[It.NumberSymbols][e];if(typeof r>"u"){if(e===Bi.CurrencyDecimal)return t[It.NumberSymbols][Bi.Decimal];if(e===Bi.CurrencyGroup)return t[It.NumberSymbols][Bi.Group]}return r}function nP(n){if(!n[It.ExtraData])throw new V(2303,!1)}function rP(n){let e=Hn(n);return nP(e),(e[It.ExtraData][2]||[]).map(r=>typeof r=="string"?$I(r):[$I(r[0]),$I(r[1])])}function iP(n,e,t){let r=Hn(n);nP(r);let i=[r[It.ExtraData][0],r[It.ExtraData][1]],o=cr(i,e)||[];return cr(o,t)||[]}function cr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new V(2304,!1)}function $I(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var XH=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Am={},eq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function oP(n,e,t,r){let i=lq(n);e=ji(t,e)||e;let s=[],a;for(;e;)if(a=eq.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=aP(r,c),i=cq(i,r));let u="";return s.forEach(d=>{let h=sq(d);u+=h?h(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Pm(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ji(n,e){let t=Zx(n);if(Am[t]??={},Am[t][e])return Am[t][e];let r="";switch(e){case"shortDate":r=fd(n,Nn.Short);break;case"mediumDate":r=fd(n,Nn.Medium);break;case"longDate":r=fd(n,Nn.Long);break;case"fullDate":r=fd(n,Nn.Full);break;case"shortTime":r=hd(n,Nn.Short);break;case"mediumTime":r=hd(n,Nn.Medium);break;case"longTime":r=hd(n,Nn.Long);break;case"fullTime":r=hd(n,Nn.Full);break;case"short":let i=ji(n,"shortTime"),o=ji(n,"shortDate");r=Rm(pd(n,Nn.Short),[i,o]);break;case"medium":let s=ji(n,"mediumTime"),a=ji(n,"mediumDate");r=Rm(pd(n,Nn.Medium),[s,a]);break;case"long":let c=ji(n,"longTime"),u=ji(n,"longDate");r=Rm(pd(n,Nn.Long),[c,u]);break;case"full":let d=ji(n,"fullTime"),h=ji(n,"fullDate");r=Rm(pd(n,Nn.Full),[d,h]);break}return r&&(Am[t][e]=r),r}function Rm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ar(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function tq(n,e){return Ar(n,3).substring(0,e)}function Rt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=nq(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return tq(a,e);let c=md(s,Bi.MinusSign);return Ar(a,e,c,r,i)}}function nq(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new V(2301,!1)}}function Qe(n,e,t=cn.Format,r=!1){return function(i,o){return rq(i,o,n,e,t,r)}}function rq(n,e,t,r,i,o){switch(t){case 2:return eP(e,i,r)[n.getMonth()];case 1:return Xx(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=rP(e),d=iP(e,i,r),h=u.findIndex(m=>{if(Array.isArray(m)){let[g,_]=m,D=s>=g.hours&&a>=g.minutes,T=s<_.hours||s===_.hours&&a<_.minutes;if(g.hours<_.hours){if(D&&T)return!0}else if(D||T)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return Jx(e,i,r)[s<12?0:1];case 3:return tP(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new V(2302,!1)}}function Mm(n){return function(e,t,r){let i=-1*r,o=md(t,Bi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Ar(s,2,o)+Ar(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Ar(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Ar(s,2,o)+":"+Ar(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Ar(s,2,o)+":"+Ar(Math.abs(i%60),2,o);default:throw new V(2302,!1)}}}var iq=0,xm=4;function oq(n){let e=Pm(n,iq,1).getDay();return Pm(n,0,1+(e<=xm?xm:xm+7)-e)}function sP(n){let e=n.getDay(),t=e===0?-3:xm-e;return Pm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function HI(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=sP(t),s=oq(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ar(i,n,md(r,Bi.MinusSign))}}function Nm(n,e=!1){return function(t,r){let o=sP(t).getFullYear();return Ar(o,n,md(r,Bi.MinusSign),e)}}var qI={};function sq(n){if(qI[n])return qI[n];let e;switch(n){case"G":case"GG":case"GGG":e=Qe(3,$e.Abbreviated);break;case"GGGG":e=Qe(3,$e.Wide);break;case"GGGGG":e=Qe(3,$e.Narrow);break;case"y":e=Rt(0,1,0,!1,!0);break;case"yy":e=Rt(0,2,0,!0,!0);break;case"yyy":e=Rt(0,3,0,!1,!0);break;case"yyyy":e=Rt(0,4,0,!1,!0);break;case"Y":e=Nm(1);break;case"YY":e=Nm(2,!0);break;case"YYY":e=Nm(3);break;case"YYYY":e=Nm(4);break;case"M":case"L":e=Rt(1,1,1);break;case"MM":case"LL":e=Rt(1,2,1);break;case"MMM":e=Qe(2,$e.Abbreviated);break;case"MMMM":e=Qe(2,$e.Wide);break;case"MMMMM":e=Qe(2,$e.Narrow);break;case"LLL":e=Qe(2,$e.Abbreviated,cn.Standalone);break;case"LLLL":e=Qe(2,$e.Wide,cn.Standalone);break;case"LLLLL":e=Qe(2,$e.Narrow,cn.Standalone);break;case"w":e=HI(1);break;case"ww":e=HI(2);break;case"W":e=HI(1,!0);break;case"d":e=Rt(2,1);break;case"dd":e=Rt(2,2);break;case"c":case"cc":e=Rt(7,1);break;case"ccc":e=Qe(1,$e.Abbreviated,cn.Standalone);break;case"cccc":e=Qe(1,$e.Wide,cn.Standalone);break;case"ccccc":e=Qe(1,$e.Narrow,cn.Standalone);break;case"cccccc":e=Qe(1,$e.Short,cn.Standalone);break;case"E":case"EE":case"EEE":e=Qe(1,$e.Abbreviated);break;case"EEEE":e=Qe(1,$e.Wide);break;case"EEEEE":e=Qe(1,$e.Narrow);break;case"EEEEEE":e=Qe(1,$e.Short);break;case"a":case"aa":case"aaa":e=Qe(0,$e.Abbreviated);break;case"aaaa":e=Qe(0,$e.Wide);break;case"aaaaa":e=Qe(0,$e.Narrow);break;case"b":case"bb":case"bbb":e=Qe(0,$e.Abbreviated,cn.Standalone,!0);break;case"bbbb":e=Qe(0,$e.Wide,cn.Standalone,!0);break;case"bbbbb":e=Qe(0,$e.Narrow,cn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Qe(0,$e.Abbreviated,cn.Format,!0);break;case"BBBB":e=Qe(0,$e.Wide,cn.Format,!0);break;case"BBBBB":e=Qe(0,$e.Narrow,cn.Format,!0);break;case"h":e=Rt(3,1,-12);break;case"hh":e=Rt(3,2,-12);break;case"H":e=Rt(3,1);break;case"HH":e=Rt(3,2);break;case"m":e=Rt(4,1);break;case"mm":e=Rt(4,2);break;case"s":e=Rt(5,1);break;case"ss":e=Rt(5,2);break;case"S":e=Rt(6,1);break;case"SS":e=Rt(6,2);break;case"SSS":e=Rt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Mm(0);break;case"ZZZZZ":e=Mm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Mm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Mm(2);break;default:return null}return qI[n]=e,e}function aP(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function aq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function cq(n,e,t){let i=n.getTimezoneOffset(),o=aP(e,i);return aq(n,-1*(o-i))}function lq(n){if(Kx(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Pm(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(XH))return uq(r)}let e=new Date(n);if(!Kx(e))throw new V(2302,!1);return e}function uq(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function Kx(n){return n instanceof Date&&!isNaN(n.valueOf())}var km=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},lr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new km(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Qx(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Qx(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(js),J(Xu),J(jI))};static \u0275dir=wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Qx(n,e){n.context.$implicit=e.item}var Ui=(()=>{class n{_viewContainer;_context=new Om;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yx(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yx(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(js),J(Xu))};static \u0275dir=wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Om=class{$implicit=null;ngIf=null};function Yx(n,e){if(n&&!n.createEmbeddedView)throw new V(2020,!1)}function cP(n,e){return new V(2100,!1)}var dq=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,GI=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw cP(n,t);return t.replace(dq,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=pm({name:"titlecase",type:n,pure:!0})}return n})();var fq="mediumDate",lP=new z(""),uP=new z(""),WI=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??fq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return oP(t,s,o||this.locale,a)}catch(s){throw cP(n,s.message)}}static \u0275fac=function(r){return new(r||n)(J(sd,16),J(lP,24),J(uP,24))};static \u0275pipe=pm({name:"date",type:n,pure:!0})}return n})();var Lt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({})}return n})();function KI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gd=class{};var dP="browser",hq="server";function Fm(n){return n===hq}var fP=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new QI(O(ht),window)})}return n})(),QI=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(de(U({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=pq(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ws(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(de(U({},t),{left:i-s[0],top:o-s[1]}))}};function pq(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vm=new z(""),eD=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(q(Vm),q(he))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),yd=class{_doc;constructor(e){this._doc=e}manager},YI="ng-app-id";function hP(n){for(let e of n)e.remove()}function pP(n,e){let t=e.createElement("style");return t.textContent=n,t}function mq(n,e,t,r){let i=n.head?.querySelectorAll(`style[${YI}="${e}"],link[${YI}="${e}"]`);if(i)for(let o of i)o.removeAttribute(YI),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function JI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var tD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,mq(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,pP);r?.forEach(i=>this.addUsage(i,this.external,JI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(hP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])hP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,pP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,JI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(q(ht),q(im),q(am,8),q(Mn))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),ZI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nD=/%COMP%/g;var gP="%COMP%",gq=`_nghost-${gP}`,yq=`_ngcontent-${gP}`,vq=!0,_q=new z("",{providedIn:"root",factory:()=>vq});function Eq(n){return yq.replace(nD,n)}function wq(n){return gq.replace(nD,n)}function yP(n,e){return e.map(t=>t.replace(nD,n))}var Ed=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new vd(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Lm?i.applyToHost(t):i instanceof _d&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Pi.Emulated:o=new Lm(c,u,r,this.appId,d,s,a,h,m);break;case Pi.ShadowDom:return new XI(c,u,t,r,s,a,this.nonce,h,m);default:o=new _d(c,u,r,d,s,a,h,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(q(eD),q(tD),q(im),q(_q),q(ht),q(Mn),q(he),q(am),q(Us,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),vd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ZI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ZI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ZI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(t,r,i&ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function mP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var XI=class extends vd{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=yP(i.id,d);for(let m of d){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let m of h){let g=JI(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_d=class extends vd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?yP(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Lm=class extends _d{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=Eq(d),this.hostAttr=wq(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var jm=class n extends ud{supportsDOMEvents=!0;static makeCurrent(){BI(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Iq();return t==null?null:Dq(t)}resetBaseElement(){wd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return KI(document.cookie,e)}},wd=null;function Iq(){return wd=wd||document.head.querySelector("base"),wd?wd.getAttribute("href"):null}function Dq(n){return new URL(n,document.baseURI).pathname}var Bm=class{addToWindow(e){En.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new V(5103,!1);return o},En.getAllAngularTestabilities=()=>e.getAllTestabilities(),En.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=En.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};En.frameworkStabilizers||(En.frameworkStabilizers=[]),En.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?qn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Cq=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),_P=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(q(ht))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),vP=["alt","control","meta","shift"],bq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},EP=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vP.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=bq[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vP.forEach(s=>{if(s!==i){let a=Tq[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(q(ht))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function Sq(){jm.makeCurrent()}function Aq(){return new gr}function Rq(){return Jw(document),document}var Mq=[{provide:Mn,useValue:dP},{provide:om,useValue:Sq,multi:!0},{provide:ht,useFactory:Rq}],rD=VI(Ux,"browser",Mq);var Nq=[{provide:gc,useClass:Bm},{provide:ym,useClass:td,deps:[he,nd,gc]},{provide:td,useClass:td,deps:[he,nd,gc]}],xq=[{provide:ku,useValue:"root"},{provide:gr,useFactory:Aq},{provide:Vm,useClass:_P,multi:!0,deps:[ht]},{provide:Vm,useClass:EP,multi:!0,deps:[ht]},Ed,tD,eD,{provide:ki,useExisting:Ed},{provide:gd,useClass:Cq},[]],Id=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({providers:[...xq,...Nq],imports:[Lt,$x]})}return n})();var wP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(q(ht))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ce=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ce||{}),Rr="*";function IP(n,e=null){return{type:Ce.Sequence,steps:n,options:e}}function iD(n){return{type:Ce.Style,styles:n,offset:null}}var $i=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},wc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Dd="!";function DP(n){return new V(3e3,!1)}function kq(){return new V(3100,!1)}function Oq(){return new V(3101,!1)}function Fq(n){return new V(3001,!1)}function Lq(n){return new V(3003,!1)}function Vq(n){return new V(3004,!1)}function bP(n,e){return new V(3005,!1)}function TP(){return new V(3006,!1)}function SP(){return new V(3007,!1)}function AP(n,e){return new V(3008,!1)}function RP(n){return new V(3002,!1)}function MP(n,e,t,r,i){return new V(3010,!1)}function NP(){return new V(3011,!1)}function xP(){return new V(3012,!1)}function PP(){return new V(3200,!1)}function kP(){return new V(3202,!1)}function OP(){return new V(3013,!1)}function FP(n){return new V(3014,!1)}function LP(n){return new V(3015,!1)}function VP(n){return new V(3016,!1)}function jP(n,e){return new V(3404,!1)}function jq(n){return new V(3502,!1)}function BP(n){return new V(3503,!1)}function UP(){return new V(3300,!1)}function $P(n){return new V(3504,!1)}function HP(n){return new V(3301,!1)}function qP(n,e){return new V(3302,!1)}function zP(n){return new V(3303,!1)}function GP(n,e){return new V(3400,!1)}function WP(n){return new V(3401,!1)}function KP(n){return new V(3402,!1)}function QP(n,e){return new V(3505,!1)}function Hi(n){switch(n.length){case 0:return new $i;case 1:return n[0];default:return new wc(n)}}function cD(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==s,h=d&&a||new Map;c.forEach((m,g)=>{let _=g,D=m;if(g!=="offset")switch(_=n.normalizePropertyName(_,i),D){case Dd:D=t.get(g);break;case Rr:D=r.get(g);break;default:D=n.normalizeStyleValue(g,_,D,i);break}h.set(_,D)}),d||o.push(h),a=h,s=u}),i.length)throw jq(i);return o}function Um(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&oD(t,"start",n)));break;case"done":n.onDone(()=>r(t&&oD(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&oD(t,"destroy",n)));break}}function oD(n,e,t){let r=t.totalTime,i=!!t.disabled,o=$m(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function $m(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function xn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function lD(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var Bq=typeof document>"u"?null:document.documentElement;function Hm(n){let e=n.parentNode||n.host||null;return e===Bq?null:e}function Uq(n){return n.substring(1,6)=="ebkit"}var zs=null,CP=!1;function YP(n){zs||(zs=$q()||{},CP=zs.style?"WebkitAppearance"in zs.style:!1);let e=!0;return zs.style&&!Uq(n)&&(e=n in zs.style,!e&&CP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in zs.style)),e}function $q(){return typeof document<"u"?document.body:null}function uD(n,e){for(;e;){if(e===n)return!0;e=Hm(e)}return!1}function dD(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var Hq=1e3,fD="{{",qq="}}",hD="ng-enter",qm="ng-leave",Cd="ng-trigger",bd=".ng-trigger",pD="ng-animating",zm=".ng-animating";function oi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sD(parseFloat(e[1]),e[2])}function sD(n,e){switch(e){case"s":return n*Hq;default:return n}}function Td(n,e,t){return n.hasOwnProperty("duration")?n:zq(n,e,t)}function zq(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(DP(n)),{duration:0,delay:0,easing:""};i=sD(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=sD(parseFloat(c),a[4]));let u=a[5];u&&(s=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(kq()),a=!0),o<0&&(e.push(Oq()),a=!0),a&&e.splice(c,0,DP(n))}return{duration:i,delay:o,easing:s}}function ZP(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Mr(n,e,t){e.forEach((r,i)=>{let o=Gm(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function To(n,e){e.forEach((t,r)=>{let i=Gm(r);n.style[i]=""})}function Ic(n){return Array.isArray(n)?n.length==1?n[0]:IP(n):n}function JP(n,e,t){let r=e.params||{},i=mD(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(Fq(o))})}var aD=new RegExp(`${fD}\\s*(.+?)\\s*${qq}`,"g");function mD(n){let e=[];if(typeof n=="string"){let t;for(;t=aD.exec(n);)e.push(t[1]);aD.lastIndex=0}return e}function Dc(n,e,t){let r=`${n}`,i=r.replace(aD,(o,s)=>{let a=e[s];return a==null&&(t.push(Lq(s)),a=""),a.toString()});return i==r?n:i}var Gq=/-+([a-z0-9])/g;function Gm(n){return n.replace(Gq,(...e)=>e[1].toUpperCase())}function XP(n,e){return n===0||e===0}function e1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Wm(n,a)))}}return e}function Pn(n,e,t){switch(e.type){case Ce.Trigger:return n.visitTrigger(e,t);case Ce.State:return n.visitState(e,t);case Ce.Transition:return n.visitTransition(e,t);case Ce.Sequence:return n.visitSequence(e,t);case Ce.Group:return n.visitGroup(e,t);case Ce.Animate:return n.visitAnimate(e,t);case Ce.Keyframes:return n.visitKeyframes(e,t);case Ce.Style:return n.visitStyle(e,t);case Ce.Reference:return n.visitReference(e,t);case Ce.AnimateChild:return n.visitAnimateChild(e,t);case Ce.AnimateRef:return n.visitAnimateRef(e,t);case Ce.Query:return n.visitQuery(e,t);case Ce.Stagger:return n.visitStagger(e,t);default:throw Vq(e.type)}}function Wm(n,e){return window.getComputedStyle(n)[e]}var xD=(()=>{class n{validateStyleProperty(t){return YP(t)}containsElement(t,r){return uD(t,r)}getParentElement(t){return Hm(t)}query(t,r,i){return dD(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new $i(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Ws=class{static NOOP=new xD},Ks=class{};var Wq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Jm=class extends Ks{normalizePropertyName(e,t){return Gm(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(Wq.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(bP(e,r))}return s+o}};var Xm="*";function Kq(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>Qq(r,t,e)):t.push(n),t}function Qq(n,e,t){if(n[0]==":"){let c=Yq(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(LP(n)),e;let i=r[1],o=r[2],s=r[3];e.push(t1(i,s));let a=i==Xm&&s==Xm;o[0]=="<"&&!a&&e.push(t1(s,i))}function Yq(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(VP(n)),"* => *"}}var Km=new Set(["true","1"]),Qm=new Set(["false","0"]);function t1(n,e){let t=Km.has(n)||Qm.has(n),r=Km.has(e)||Qm.has(e);return(i,o)=>{let s=n==Xm||n==i,a=e==Xm||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Km.has(n):Qm.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Km.has(e):Qm.has(e)),s&&a}}var d1=":self",Zq=new RegExp(`s*${d1}s*,?`,"g");function f1(n,e,t,r){return new wD(n).build(e,t,r)}var n1="",wD=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new ID(t);return this._resetContextStyleTimingState(i),Pn(this,Ic(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=n1,e.collectedStyles=new Map,e.collectedStyles.set(n1,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(TP()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ce.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==Ce.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(SP())}),{type:Ce.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{mD(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(AP(e.name,[...o.values()]))}return{type:Ce.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Pn(this,Ic(e.animation),t),i=Kq(e.expr,t.errors);return{type:Ce.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Gs(e.options)}}visitSequence(e,t){return{type:Ce.Sequence,steps:e.steps.map(r=>Pn(this,r,t)),options:Gs(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=Pn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ce.Group,steps:o,options:Gs(e.options)}}visitAnimate(e,t){let r=tz(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:iD({});if(o.type==Ce.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};r.easing&&(u.easing=r.easing),s=iD(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Ce.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Rr?r.push(a):t.errors.push(RP(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(fD)>=0){o=!0;break}}}),{type:Ce.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),h=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(t.errors.push(MP(c,d.startTime,d.endTime,o,i)),h=!1),o=d.startTime),h&&u.set(c,{startTime:o,endTime:i}),t.options&&JP(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ce.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(NP()),r;let i=1,o=0,s=[],a=!1,c=!1,u=0,d=e.steps.map(F=>{let G=this._makeStyleAst(F,t),B=G.offset!=null?G.offset:ez(G.styles),X=0;return B!=null&&(o++,X=G.offset=B),c=c||X<0||X>1,a=a||X<u,u=X,s.push(X),G});c&&t.errors.push(xP()),a&&t.errors.push(PP());let h=e.steps.length,m=0;o>0&&o<h?t.errors.push(kP()):o==0&&(m=i/(h-1));let g=h-1,_=t.currentTime,D=t.currentAnimateTimings,T=D.duration;return d.forEach((F,G)=>{let B=m>0?G==g?1:m*G:s[G],X=B*T;t.currentTime=_+D.delay+X,D.duration=X,this._validateStyleAst(F,t),F.offset=B,r.styles.push(F)}),r}visitReference(e,t){return{type:Ce.Reference,animation:Pn(this,Ic(e.animation),t),options:Gs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ce.AnimateChild,options:Gs(e.options)}}visitAnimateRef(e,t){return{type:Ce.AnimateRef,animation:this.visitReference(e.animation,t),options:Gs(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=Jq(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,xn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Pn(this,Ic(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ce.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Gs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(OP());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Td(e.timings,t.errors,!0);return{type:Ce.Stagger,animation:Pn(this,Ic(e.animation),t),timings:r,options:null}}};function Jq(n){let e=!!n.split(/\s*,\s*/).find(t=>t==d1);return e&&(n=n.replace(Zq,"")),n=n.replace(/@\*/g,bd).replace(/@\w+/g,t=>bd+"-"+t.slice(1)).replace(/:animating/g,zm),[n,e]}function Xq(n){return n?U({},n):null}var ID=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function ez(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function tz(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Td(n,e).duration;return gD(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=gD(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=Td(t,e);return gD(i.duration,i.delay,i.easing)}function Gs(n){return n?(n=U({},n),n.params&&(n.params=Xq(n.params))):n={},n}function gD(n,e,t){return{duration:n,delay:e,easing:t}}function PD(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Ad=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},nz=1,rz=":enter",iz=new RegExp(rz,"g"),oz=":leave",sz=new RegExp(oz,"g");function h1(n,e,t,r,i,o=new Map,s=new Map,a,c,u=[]){return new DD().buildKeyframes(n,e,t,r,i,o,s,a,c,u)}var DD=class{buildKeyframes(e,t,r,i,o,s,a,c,u,d=[]){u=u||new Ad;let h=new CD(e,t,u,i,o,d,[]);h.options=c;let m=c.delay?oi(c.delay):0;h.currentTimeline.delayNextStep(m),h.currentTimeline.setStyles([s],null,h.errors,c),Pn(this,r,h);let g=h.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let D=g.length-1;D>=0;D--){let T=g[D];if(T.element===t){_=T;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,h.errors,c)}return g.length?g.map(_=>_.buildKeyframes()):[PD(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:oi(Dc(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?oi(r.duration):null,a=r.delay!=null?oi(r.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Pn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==Ce.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eg);let s=oi(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Pn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?oi(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Pn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Dc(r,t.params,t.errors):r;return Td(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==Ce.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?oi(i.delay):0;o&&(t.previousNode.type===Ce.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=eg);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(c=h.currentTimeline),Pn(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let m=h.currentTimeline.currentTime;s=Math.max(s,m)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let h=d.currentTime;Pn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}},eg={},CD=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=eg;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new tg(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=oi(r.duration)),r.delay!=null&&(i.delay=oi(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Dc(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=eg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new bD(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(iz,"."+this._enterClassName),e=e.replace(sz,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&a.length==0&&s.push(FP(t)),a}},tg=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=nz,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Rr),this._currentKeyframe.set(t,Rr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=az(e,this._globalTimelineStyles);for(let[a,c]of s){let u=Dc(c,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Rr),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,h)=>{d===Dd?e.add(h):d===Rr&&t.add(h)}),r||u.set("offset",c/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return PD(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},bD=class extends tg{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",r1(a)),o.push(u);let d=e.length-1;for(let h=1;h<=d;h++){let m=new Map(e[h]),g=m.get("offset"),_=t+g*r;m.set("offset",r1(_/s)),o.push(m)}r=s,t=0,i="",e=o}return PD(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function r1(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function az(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Rr)}else for(let[o,s]of i)t.set(o,s)}),t}function i1(n,e,t,r,i,o,s,a,c,u,d,h,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:h,errors:m}}var yD={},ng=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return cz(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,u,d){let h=[],m=this.ast.options&&this.ast.options.params||yD,g=a&&a.params||yD,_=this.buildStyles(r,g,h),D=c&&c.params||yD,T=this.buildStyles(i,D,h),F=new Set,G=new Map,B=new Map,X=i==="void",ce={params:p1(D,m),delay:this.ast.options?.delay},ae=d?[]:h1(e,t,this.ast.animation,o,s,_,T,ce,u,h),I=0;return ae.forEach(v=>{I=Math.max(v.duration+v.delay,I)}),h.length?i1(t,this._triggerName,r,i,X,_,T,[],[],G,B,I,h):(ae.forEach(v=>{let w=v.element,C=xn(G,w,new Set);v.preStyleProps.forEach(R=>C.add(R));let b=xn(B,w,new Set);v.postStyleProps.forEach(R=>b.add(R)),w!==t&&F.add(w)}),i1(t,this._triggerName,r,i,X,_,T,ae,[...F.values()],G,B,I))}};function cz(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function p1(n,e){let t=U({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var TD=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=p1(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Dc(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function lz(n,e,t){return new SD(n,e,t)}var SD=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new TD(i.style,o,r))}),o1(this.states,"true","1"),o1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ng(e,i,this.states))}),this.fallbackTransition=uz(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function uz(n,e,t){let r=[(s,a)=>!0],i={type:Ce.Sequence,steps:[],options:null},o={type:Ce.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new ng(n,o,e)}function o1(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var dz=new Ad,AD=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=f1(this._driver,t,r,i);if(r.length)throw BP(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=cD(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=h1(this._driver,t,o,hD,qm,new Map,new Map,r,dz,i),s.forEach(d=>{let h=xn(a,d.element,new Map);d.postStyleProps.forEach(m=>h.set(m,null))})):(i.push(UP()),s=[]),i.length)throw $P(i);a.forEach((d,h)=>{d.forEach((m,g)=>{d.set(g,this._driver.computeStyle(h,g,Rr))})});let c=s.map(d=>{let h=a.get(d.element);return this._buildPlayer(d,new Map,h)}),u=Hi(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw HP(e);return t}listen(e,t,r,i){let o=$m(t,"","","");return Um(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},s1="ng-animate-queued",fz=".ng-animate-queued",vD="ng-animate-disabled",hz=".ng-animate-disabled",pz="ng-star-inserted",mz=".ng-star-inserted",gz=[],m1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nr="__ng_removed",Rd=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=_z(i),r){let o=e,{value:s}=o,a=MA(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Sd="void",_D=new Rd(Sd),RD=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,ur(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw qP(r,t);if(r==null||r.length==0)throw zP(t);if(!Ez(r))throw GP(r,t);let o=xn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=xn(this._engine.statesByElement,e,new Map);return a.has(t)||(ur(e,Cd),ur(e,Cd+"-"+t),a.set(t,_D)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw WP(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Md(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ur(e,Cd),ur(e,Cd+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Rd(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=_D),!(u.value===Sd)&&c.value===u.value){if(!Dz(c.params,u.params)){let D=[],T=o.matchStyles(c.value,c.params,D),F=o.matchStyles(u.value,u.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{To(e,T),Mr(e,F)})}return}let m=xn(this._engine.playersByElement,e,[]);m.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let g=o.matchTransition(c.value,u.value,e,u.params),_=!1;if(!g){if(!i)return;g=o.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:u,player:s,isFallbackTransition:_}),_||(ur(e,s1),s.onStart(()=>{Cc(e,s1)})),s.onDone(()=>{let D=this.players.indexOf(s);D>=0&&this.players.splice(D,1);let T=this._engine.playersByElement.get(e);if(T){let F=T.indexOf(s);F>=0&&T.splice(F,1)}}),this.players.push(s),m.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,bd,!0);r.forEach(i=>{if(i[Nr])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,Sd,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Hi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,u=r.get(s)||_D,d=new Rd(Sd),h=new Md(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Nr];(!o||o===m1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ur(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=$m(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Um(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},MD=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new RD(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Ym(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Ym(t))return;let o=t[Nr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ur(e,vD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Cc(e,vD))}removeNode(e,t,r){if(Ym(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Nr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Ym(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,bd,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,zm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Nr];if(t&&t.setForRemoval){if(e[Nr]=m1,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(vD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,hz,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ur(i,pz)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw KP(e)}_flushAnimations(e,t){let r=new Ad,i=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(ee=>{d.add(ee);let re=this.driver.query(ee,fz,!0);for(let se=0;se<re.length;se++)d.add(re[se])});let h=this.bodyNode,m=Array.from(this.statesByElement.keys()),g=l1(m,this.collectedEnterElements),_=new Map,D=0;g.forEach((ee,re)=>{let se=hD+D++;_.set(re,se),ee.forEach(be=>ur(be,se))});let T=[],F=new Set,G=new Set;for(let ee=0;ee<this.collectedLeaveElements.length;ee++){let re=this.collectedLeaveElements[ee],se=re[Nr];se&&se.setForRemoval&&(T.push(re),F.add(re),se.hasAnimation?this.driver.query(re,mz,!0).forEach(be=>F.add(be)):G.add(re))}let B=new Map,X=l1(m,Array.from(F));X.forEach((ee,re)=>{let se=qm+D++;B.set(re,se),ee.forEach(be=>ur(be,se))}),e.push(()=>{g.forEach((ee,re)=>{let se=_.get(re);ee.forEach(be=>Cc(be,se))}),X.forEach((ee,re)=>{let se=B.get(re);ee.forEach(be=>Cc(be,se))}),T.forEach(ee=>{this.processLeaveNode(ee)})});let ce=[],ae=[];for(let ee=this._namespaceList.length-1;ee>=0;ee--)this._namespaceList[ee].drainQueuedTransitions(t).forEach(se=>{let be=se.player,yt=se.element;if(ce.push(be),this.collectedEnterElements.length){let dt=yt[Nr];if(dt&&dt.setForMove){if(dt.previousTriggersValues&&dt.previousTriggersValues.has(se.triggerName)){let Ii=dt.previousTriggersValues.get(se.triggerName),Sn=this.statesByElement.get(se.element);if(Sn&&Sn.has(se.triggerName)){let Di=Sn.get(se.triggerName);Di.value=Ii,Sn.set(se.triggerName,Di)}}be.destroy();return}}let Jn=!h||!this.driver.containsElement(h,yt),ut=B.get(yt),Ye=_.get(yt),Ze=this._buildInstruction(se,r,Ye,ut,Jn);if(Ze.errors&&Ze.errors.length){ae.push(Ze);return}if(Jn){be.onStart(()=>To(yt,Ze.fromStyles)),be.onDestroy(()=>Mr(yt,Ze.toStyles)),i.push(be);return}if(se.isFallbackTransition){be.onStart(()=>To(yt,Ze.fromStyles)),be.onDestroy(()=>Mr(yt,Ze.toStyles)),i.push(be);return}let io=[];Ze.timelines.forEach(dt=>{dt.stretchStartingKeyframe=!0,this.disabledNodes.has(dt.element)||io.push(dt)}),Ze.timelines=io,r.append(yt,Ze.timelines);let a_={instruction:Ze,player:be,element:yt};s.push(a_),Ze.queriedElements.forEach(dt=>xn(a,dt,[]).push(be)),Ze.preStyleProps.forEach((dt,Ii)=>{if(dt.size){let Sn=c.get(Ii);Sn||c.set(Ii,Sn=new Set),dt.forEach((Di,oo)=>Sn.add(oo))}}),Ze.postStyleProps.forEach((dt,Ii)=>{let Sn=u.get(Ii);Sn||u.set(Ii,Sn=new Set),dt.forEach((Di,oo)=>Sn.add(oo))})});if(ae.length){let ee=[];ae.forEach(re=>{ee.push(QP(re.triggerName,re.errors))}),ce.forEach(re=>re.destroy()),this.reportError(ee)}let I=new Map,v=new Map;s.forEach(ee=>{let re=ee.element;r.has(re)&&(v.set(re,re),this._beforeAnimationBuild(ee.player.namespaceId,ee.instruction,I))}),i.forEach(ee=>{let re=ee.element;this._getPreviousPlayers(re,!1,ee.namespaceId,ee.triggerName,null).forEach(be=>{xn(I,re,[]).push(be),be.destroy()})});let w=T.filter(ee=>u1(ee,c,u)),C=new Map;c1(C,this.driver,G,u,Rr).forEach(ee=>{u1(ee,c,u)&&w.push(ee)});let R=new Map;g.forEach((ee,re)=>{c1(R,this.driver,new Set(ee),c,Dd)}),w.forEach(ee=>{let re=C.get(ee),se=R.get(ee);C.set(ee,new Map([...re?.entries()??[],...se?.entries()??[]]))});let E=[],Zn=[],ro={};s.forEach(ee=>{let{element:re,player:se,instruction:be}=ee;if(r.has(re)){if(d.has(re)){se.onDestroy(()=>Mr(re,be.toStyles)),se.disabled=!0,se.overrideTotalTime(be.totalTime),i.push(se);return}let yt=ro;if(v.size>1){let ut=re,Ye=[];for(;ut=ut.parentNode;){let Ze=v.get(ut);if(Ze){yt=Ze;break}Ye.push(ut)}Ye.forEach(Ze=>v.set(Ze,yt))}let Jn=this._buildAnimation(se.namespaceId,be,I,o,R,C);if(se.setRealPlayer(Jn),yt===ro)E.push(se);else{let ut=this.playersByElement.get(yt);ut&&ut.length&&(se.parentPlayer=Hi(ut)),i.push(se)}}else To(re,be.fromStyles),se.onDestroy(()=>Mr(re,be.toStyles)),Zn.push(se),d.has(re)&&i.push(se)}),Zn.forEach(ee=>{let re=o.get(ee.element);if(re&&re.length){let se=Hi(re);ee.setRealPlayer(se)}}),i.forEach(ee=>{ee.parentPlayer?ee.syncPlayerEvents(ee.parentPlayer):ee.destroy()});for(let ee=0;ee<T.length;ee++){let re=T[ee],se=re[Nr];if(Cc(re,qm),se&&se.hasAnimation)continue;let be=[];if(a.size){let Jn=a.get(re);Jn&&Jn.length&&be.push(...Jn);let ut=this.driver.query(re,zm,!0);for(let Ye=0;Ye<ut.length;Ye++){let Ze=a.get(ut[Ye]);Ze&&Ze.length&&be.push(...Ze)}}let yt=be.filter(Jn=>!Jn.destroyed);yt.length?wz(this,re,yt):this.processLeaveNode(re)}return T.length=0,E.forEach(ee=>{this.players.push(ee),ee.onDone(()=>{ee.destroy();let re=this.players.indexOf(ee);this.players.splice(re,1)}),ee.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Sd;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==o,h=xn(r,u,[]);this._getPreviousPlayers(u,d,s,a,t.toState).forEach(g=>{let _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),h.push(g)})}To(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,u=[],d=new Set,h=new Set,m=t.timelines.map(_=>{let D=_.element;d.add(D);let T=D[Nr];if(T&&T.removedBeforeQueried)return new $i(_.duration,_.delay);let F=D!==c,G=Iz((r.get(D)||gz).map(I=>I.getRealPlayer())).filter(I=>{let v=I;return v.element?v.element===D:!1}),B=o.get(D),X=s.get(D),ce=cD(this._normalizer,_.keyframes,B,X),ae=this._buildPlayer(_,ce,G);if(_.subTimeline&&i&&h.add(D),F){let I=new Md(e,a,D);I.setRealPlayer(ae),u.push(I)}return ae});u.forEach(_=>{xn(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>vz(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>ur(_,pD));let g=Hi(m);return g.onDestroy(()=>{d.forEach(_=>Cc(_,pD)),Mr(c,t.toStyles)}),h.forEach(_=>{xn(i,_,[]).push(g)}),g}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new $i(e.duration,e.delay)}},Md=class{namespaceId;triggerName;element;_player=new $i;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Um(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){xn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function vz(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function _z(n){return n??null}function Ym(n){return n&&n.nodeType===1}function Ez(n){return n=="start"||n=="done"}function a1(n,e){let t=n.style.display;return n.style.display=e??"none",t}function c1(n,e,t,r,i){let o=[];t.forEach(c=>o.push(a1(c)));let s=[];r.forEach((c,u)=>{let d=new Map;c.forEach(h=>{let m=e.computeStyle(u,h,i);d.set(h,m),(!m||m.length==0)&&(u[Nr]=yz,s.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>a1(c,o[a++])),s}function l1(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function ur(n,e){n.classList?.add(e)}function Cc(n,e){n.classList?.remove(e)}function wz(n,e,t){Hi(t).onDone(()=>n.processLeaveNode(e))}function Iz(n){let e=[];return g1(n,e),e}function g1(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof wc?g1(r.players,e):e.push(r)}}function Dz(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function u1(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var bc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new MD(e.body,t,r),this._timelineEngine=new AD(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],u=[],d=f1(this._driver,o,c,u);if(c.length)throw jP(i,c);a=lz(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=lD(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=lD(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Cz(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ED(e[0]),e.length>1&&(r=ED(e[e.length-1]))):e instanceof Map&&(t=ED(e)),t||r?new bz(n,t,r):null}var bz=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Mr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mr(this._element,this._initialStyles),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(To(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(To(this._element,this._endStyles),this._endStyles=null),Mr(this._element,this._initialStyles),this._state=3)}}return n})();function ED(n){let e=null;return n.forEach((t,r)=>{Tz(r)&&(e=e||new Map,e.set(r,t))}),e}function Tz(n){return n==="display"||n==="position"}var rg=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Wm(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ig=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return uD(e,t)}getParentElement(e){return Hm(e)}query(e,t,r){return dD(e,t,r)}computeStyle(e,t,r){return Wm(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let u=new Map,d=s.filter(g=>g instanceof rg);XP(r,i)&&d.forEach(g=>{g.currentSnapshot.forEach((_,D)=>u.set(D,_))});let h=ZP(t).map(g=>new Map(g));h=e1(e,h,u);let m=Cz(e,h);return new rg(e,h,c,m)}};var Zm="@",y1="@.disabled",og=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Zm&&t==y1?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},ND=class extends og{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Zm?t.charAt(1)=="."&&t==y1?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Zm){let o=Sz(e),s=t.slice(1),a="";return s.charAt(0)!=Zm&&([s,a]=Az(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function Sz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Az(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var sg=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let h=()=>u.delete(i);d=new og(r,i,this.engine,h),u.set(i,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new ND(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Mz=(()=>{class n extends bc{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(q(ht),q(Ws),q(Ks))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function Nz(){return new Jm}function xz(n,e,t){return new sg(n,e,t)}var _1=[{provide:Ks,useFactory:Nz},{provide:bc,useClass:Mz},{provide:ki,useFactory:xz,deps:[Ed,bc,he]}],Pz=[{provide:Ws,useClass:xD},{provide:sm,useValue:"NoopAnimations"},..._1],v1=[{provide:Ws,useFactory:()=>new ig},{provide:sm,useFactory:()=>"BrowserAnimations"},..._1],E1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Pz:v1}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({providers:v1,imports:[Id]})}return n})();var R1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(J(Fi),J(ri))};static \u0275dir=wt({type:n})}return n})(),kz=(()=>{class n extends R1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vs(n)))(i||n)}})();static \u0275dir=wt({type:n,features:[br]})}return n})(),BD=new z("");var Oz={provide:BD,useExisting:Wr(()=>Rc),multi:!0};function Fz(){let n=qn()?qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Lz=new z(""),Rc=(()=>{class n extends R1{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Fz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(J(Fi),J(ri),J(Lz,8))};static \u0275dir=wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&pt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Hs([Oz]),br]})}return n})();function UD(n){return n==null||$D(n)===0}function $D(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var gg=new z(""),HD=new z(""),Vz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ln=class{static min(e){return jz(e)}static max(e){return Bz(e)}static required(e){return M1(e)}static requiredTrue(e){return Uz(e)}static email(e){return $z(e)}static minLength(e){return Hz(e)}static maxLength(e){return qz(e)}static pattern(e){return zz(e)}static nullValidator(e){return cg()}static compose(e){return F1(e)}static composeAsync(e){return V1(e)}};function jz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Bz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function M1(n){return UD(n.value)?{required:!0}:null}function Uz(n){return n.value===!0?null:{required:!0}}function $z(n){return UD(n.value)||Vz.test(n.value)?null:{email:!0}}function Hz(n){return e=>{let t=e.value?.length??$D(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function qz(n){return e=>{let t=e.value?.length??$D(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function zz(n){if(!n)return cg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(UD(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function cg(n){return null}function N1(n){return n!=null}function x1(n){return Do(n)?Se(n):n}function P1(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function k1(n,e){return e.map(t=>t(n))}function Gz(n){return!n.validate}function O1(n){return n.map(e=>Gz(e)?e:t=>e.validate(t))}function F1(n){if(!n)return null;let e=n.filter(N1);return e.length==0?null:function(t){return P1(k1(t,e))}}function L1(n){return n!=null?F1(O1(n)):null}function V1(n){if(!n)return null;let e=n.filter(N1);return e.length==0?null:function(t){let r=k1(t,e).map(x1);return cE(r).pipe(ne(P1))}}function j1(n){return n!=null?V1(O1(n)):null}function w1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function B1(n){return n._rawValidators}function U1(n){return n._rawAsyncValidators}function kD(n){return n?Array.isArray(n)?n:[n]:[]}function lg(n,e){return Array.isArray(n)?n.includes(e):n===e}function I1(n,e){let t=kD(e);return kD(n).forEach(i=>{lg(t,i)||t.push(i)}),t}function D1(n,e){return kD(e).filter(t=>!lg(n,t))}var ug=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=L1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=j1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Qs=class extends ug{name;get formDirective(){return null}get path(){return null}},Ys=class extends ug{_parent=null;name=null;valueAccessor=null},dg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Wz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zce=de(U({},Wz),{"[class.ng-submitted]":"isSubmitted"}),yg=(()=>{class n extends dg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(Ys,2))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&At("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[br]})}return n})(),vg=(()=>{class n extends dg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(Qs,10))};static \u0275dir=wt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&At("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[br]})}return n})();var Nd="VALID",ag="INVALID",Tc="PENDING",xd="DISABLED",So=class{},fg=class extends So{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pd=class extends So{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kd=class extends So{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sc=class extends So{status;source;constructor(e,t){super(),this.status=e,this.source=t}},OD=class extends So{source;constructor(e){super(),this.source=e}},FD=class extends So{source;constructor(e){super(),this.source=e}};function qD(n){return(_g(n)?n.validators:n)||null}function Kz(n){return Array.isArray(n)?L1(n):n||null}function zD(n,e){return(_g(e)?e.asyncValidators:n)||null}function Qz(n){return Array.isArray(n)?j1(n):n||null}function _g(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function $1(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[t])throw new V(1001,"")}function H1(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new V(1002,"")})}var Ac=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tr(this.statusReactive)}set status(e){Tr(()=>this.statusReactive.set(e))}_status=vc(()=>this.statusReactive());statusReactive=Ir(void 0);get valid(){return this.status===Nd}get invalid(){return this.status===ag}get pending(){return this.status==Tc}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}errors;get pristine(){return Tr(this.pristineReactive)}set pristine(e){Tr(()=>this.pristineReactive.set(e))}_pristine=vc(()=>this.pristineReactive());pristineReactive=Ir(!0);get dirty(){return!this.pristine}get touched(){return Tr(this.touchedReactive)}set touched(e){Tr(()=>this.touchedReactive.set(e))}_touched=vc(()=>this.touchedReactive());touchedReactive=Ir(!1);get untouched(){return!this.touched}_events=new Xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(I1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(I1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(D1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(D1(e,this._rawAsyncValidators))}hasValidator(e){return lg(this._rawValidators,e)}hasAsyncValidator(e){return lg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pd(!0,r))}markAsPending(e={}){this.status=Tc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(i=>{i.disable(de(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fg(this.value,r)),this._events.next(new Sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this._forEachChild(r=>{r.enable(de(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nd||this.status===Tc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fg(this.value,t)),this._events.next(new Sc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:Nd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Tc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=x1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?ag:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tc)?Tc:this._anyControlsHaveStatus(ag)?ag:Nd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_g(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Kz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qz(this._rawAsyncValidators)}},hg=class extends Ac{constructor(e,t,r){super(qD(t),zD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){H1(this,!0,e),Object.keys(e).forEach(r=>{$1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var LD=class extends hg{};var Eg=new z("",{providedIn:"root",factory:()=>wg}),wg="always";function q1(n,e){return[...e.path,n]}function VD(n,e,t=wg){GD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Zz(n,e),Xz(n,e),Jz(n,e),Yz(n,e)}function C1(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),mg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function pg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function GD(n,e){let t=B1(n);e.validator!==null?n.setValidators(w1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=U1(n);e.asyncValidator!==null?n.setAsyncValidators(w1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();pg(e._rawValidators,i),pg(e._rawAsyncValidators,i)}function mg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=B1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=U1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return pg(e._rawValidators,r),pg(e._rawAsyncValidators,r),t}function Zz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&z1(n,e)})}function Jz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&z1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function z1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Xz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function e4(n,e){n==null,GD(n,e)}function t4(n,e){return mg(n,e)}function G1(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function n4(n){return Object.getPrototypeOf(n.constructor)===kz}function r4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function W1(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Rc?t=o:n4(o)?r=o:i=o}),i||r||t||null}function i4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function b1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function T1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Od=class extends Ac{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(qD(t),zD(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_g(t)&&(t.nonNullable||t.initialValueIsDefault)&&(T1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){b1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){b1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){T1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var o4=n=>n instanceof Od;var s4={provide:Ys,useExisting:Wr(()=>WD)},S1=Promise.resolve(),WD=(()=>{class n extends Ys{_changeDetectorRef;callSetDisabledState;control=new Od;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Et;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W1(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),G1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){S1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ld(r);S1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?q1(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(J(Qs,9),J(gg,10),J(HD,10),J(BD,10),J(Li,8),J(Eg,8))};static \u0275dir=wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Hs([s4]),br,ni]})}return n})();var Ig=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=wt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var K1=new z("");var a4={provide:Qs,useExisting:Wr(()=>Fd)},Fd=(()=>{class n extends Qs{callSetDisabledState;get submitted(){return Tr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=vc(()=>this._submittedReactive());_submittedReactive=Ir(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Et;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(mg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return VD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){C1(t.control||null,t,!1),i4(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),r4(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new OD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new FD(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(C1(r||null,t),o4(i)&&(VD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);e4(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&t4(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GD(this.form,this),this._oldForm&&mg(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(J(gg,10),J(HD,10),J(Eg,8))};static \u0275dir=wt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&pt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Hs([a4]),br,ni]})}return n})();var c4={provide:Ys,useExisting:Wr(()=>Ld)},Ld=(()=>{class n extends Ys{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Et;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W1(this,o)}ngOnChanges(t){this._added||this._setUpControl(),G1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return q1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(J(Qs,13),J(gg,10),J(HD,10),J(BD,10),J(K1,8))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Hs([c4]),br,ni]})}return n})();var l4=(()=>{class n{_validator=cg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):cg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=wt({type:n,features:[ni]})}return n})();var u4={provide:gg,useExisting:Wr(()=>Vd),multi:!0};var Vd=(()=>{class n extends l4{required;inputName="required";normalizeInput=ld;createValidator=t=>M1;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vs(n)))(i||n)}})();static \u0275dir=wt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&rd("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Hs([u4]),br]})}return n})();var Q1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({})}return n})(),jD=class extends Ac{constructor(e,t,r){super(qD(t),zD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){H1(this,!1,e),e.forEach((r,i)=>{$1(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function A1(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Dg=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return A1(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new hg(i,o)}record(t,r=null){let i=this._reduceControls(t);return new LD(i,r)}control(t,r,i){let o={};return this.useNonNullable?(A1(r)?o=r:(o.validators=r,o.asyncValidators=i),new Od(t,de(U({},o),{nonNullable:!0}))):new Od(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new jD(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Od)return t;if(t instanceof Ac)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Eg,useValue:t.callSetDisabledState??wg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({imports:[Q1]})}return n})(),Mc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:K1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Eg,useValue:t.callSetDisabledState??wg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({imports:[Q1]})}return n})();var ve="primary",Zd=Symbol("RouteTitle"),JD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xs(n){return new JD(n)}function ik(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function d4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!si(n[t],e[t]))return!1;return!0}function si(n,e){let t=n?XD(n):void 0,r=e?XD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!ok(n[i],e[i]))return!1;return!0}function XD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ok(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function sk(n){return n.length>0?n[n.length-1]:null}function qi(n){return aE(n)?n:Do(n)?Se(Promise.resolve(n)):ie(n)}var f4={exact:ck,subset:lk},ak={exact:h4,subset:p4,ignored:()=>!0};function Z1(n,e,t){return f4[t.paths](n.root,e.root,t.matrixParams)&&ak[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function h4(n,e){return si(n,e)}function ck(n,e,t){if(!Zs(n.segments,e.segments)||!Sg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ck(n.children[r],e.children[r],t))return!1;return!0}function p4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ok(n[t],e[t]))}function lk(n,e,t){return uk(n,e,e.segments,t)}function uk(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zs(i,t)||e.hasChildren()||!Sg(i,t,r))}else if(n.segments.length===t.length){if(!Zs(n.segments,t)||!Sg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Zs(n.segments,i)||!Sg(n.segments,i,r)||!n.children[ve]?!1:uk(n.children[ve],e,o,r)}}function Sg(n,e,t){return e.every((r,i)=>ak[t](n[i].parameters,r.parameters))}var ci=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xs(this.queryParams),this._queryParamMap}toString(){return y4.serialize(this)}},Oe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ag(this)}},Ao=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xs(this.parameters),this._parameterMap}toString(){return fk(this)}};function m4(n,e){return Zs(n,e)&&n.every((t,r)=>si(t.parameters,e[r].parameters))}function Zs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function g4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}var ea=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new Ro,providedIn:"root"})}return n})(),Ro=class{parse(e){let t=new tC(e);return new ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jd(e.root,!0)}`,r=E4(e.queryParams),i=typeof e.fragment=="string"?`#${v4(e.fragment)}`:"";return`${t}${r}${i}`}},y4=new Ro;function Ag(n){return n.segments.map(e=>fk(e)).join("/")}function jd(n,e){if(!n.hasChildren())return Ag(n);if(e){let t=n.children[ve]?jd(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ve&&r.push(`${i}:${jd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=g4(n,(r,i)=>i===ve?[jd(n.children[ve],!1)]:[`${i}:${jd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ve]!=null?`${Ag(n)}/${t[0]}`:`${Ag(n)}/(${t.join("//")})`}}function dk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bg(n){return dk(n).replace(/%3B/gi,";")}function v4(n){return encodeURI(n)}function eC(n){return dk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rg(n){return decodeURIComponent(n)}function J1(n){return Rg(n.replace(/\+/g,"%20"))}function fk(n){return`${eC(n.path)}${_4(n.parameters)}`}function _4(n){return Object.entries(n).map(([e,t])=>`;${eC(e)}=${eC(t)}`).join("")}function E4(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${bg(t)}=${bg(i)}`).join("&"):`${bg(t)}=${bg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var w4=/^[^\/()?;#]+/;function KD(n){let e=n.match(w4);return e?e[0]:""}var I4=/^[^\/()?;=#]+/;function D4(n){let e=n.match(I4);return e?e[0]:""}var C4=/^[^=?&#]+/;function b4(n){let e=n.match(C4);return e?e[0]:""}var T4=/^[^&#]+/;function S4(n){let e=n.match(T4);return e?e[0]:""}var tC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new Oe(e,t)),r}parseSegment(){let e=KD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new Ao(Rg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=D4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=KD(this.remaining);i&&(r=i,this.capture(r))}e[Rg(t)]=Rg(r)}parseQueryParam(e){let t=b4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=S4(this.remaining);s&&(r=s,this.capture(r))}let i=J1(t),o=J1(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=KD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ve]:new Oe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function hk(n){return n.segments.length>0?new Oe([],{[ve]:n}):n}function pk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=pk(i);if(r===ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Oe(n.segments,e);return A4(t)}function A4(n){if(n.numberOfChildren===1&&n.children[ve]){let e=n.children[ve];return new Oe(n.segments.concat(e.segments),e.children)}return n}function Fc(n){return n instanceof ci}function mk(n,e,t=null,r=null){let i=gk(n);return yk(i,e,t,r)}function gk(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Oe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=hk(r);return e??i}function yk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return QD(i,i,i,t,r);let o=R4(e);if(o.toRoot())return QD(i,i,new Oe([],{}),t,r);let s=M4(o,i,n),a=s.processChildren?Ud(s.segmentGroup,s.index,o.commands):_k(s.segmentGroup,s.index,o.commands);return QD(i,s.segmentGroup,a,t,r)}function Mg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hd(n){return typeof n=="object"&&n!=null&&n.outlets}function QD(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=vk(n,e,t);let a=hk(pk(s));return new ci(a,o,i)}function vk(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=vk(o,e,t)}),new Oe(n.segments,r)}var Ng=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mg(r[0]))throw new V(4003,!1);let i=r.find(Hd);if(i&&i!==sk(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ng(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ng(t,e,r)}var Pc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function M4(n,e,t){if(n.isAbsolute)return new Pc(e,!0,0);if(!t)return new Pc(e,!1,NaN);if(t.parent===null)return new Pc(t,!0,0);let r=Mg(n.commands[0])?0:1,i=t.segments.length-1+r;return N4(t,i,n.numberOfDoubleDots)}function N4(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Pc(r,!1,i-o)}function x4(n){return Hd(n[0])?n[0].outlets:{[ve]:n}}function _k(n,e,t){if(n??=new Oe([],{}),n.segments.length===0&&n.hasChildren())return Ud(n,e,t);let r=P4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Oe(n.segments.slice(0,r.pathIndex),{});return o.children[ve]=new Oe(n.segments.slice(r.pathIndex),n.children),Ud(o,0,i)}else return r.match&&i.length===0?new Oe(n.segments,{}):r.match&&!n.hasChildren()?nC(n,e,t):r.match?Ud(n,0,i):nC(n,e,t)}function Ud(n,e,t){if(t.length===0)return new Oe(n.segments,{});{let r=x4(t),i={};if(Object.keys(r).some(o=>o!==ve)&&n.children[ve]&&n.numberOfChildren===1&&n.children[ve].segments.length===0){let o=Ud(n.children[ve],e,t);return new Oe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_k(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Oe(n.segments,i)}}function P4(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Hd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!ek(c,u,s))return o;r+=2}else{if(!ek(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function nC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Hd(o)){let c=k4(o.outlets);return new Oe(r,c)}if(i===0&&Mg(t[0])){let c=n.segments[e];r.push(new Ao(c.path,X1(t[0]))),i++;continue}let s=Hd(o)?o.outlets[ve]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Mg(a)?(r.push(new Ao(s,X1(a))),i+=2):(r.push(new Ao(s,{})),i++)}return new Oe(r,{})}function k4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=nC(new Oe([],{}),0,r))}),e}function X1(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ek(n,e,t){return n==t.path&&si(e,t.parameters)}var kc="imperative",Vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Vt||{}),Gn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Mo=class extends Gn{type=Vt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pr=class extends Gn{urlAfterRedirects;type=Vt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},In=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(In||{}),Lc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Lc||{}),ai=class extends Gn{reason;code;type=Vt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},li=class extends Gn{reason;code;type=Vt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Vc=class extends Gn{error;target;type=Vt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qd=class extends Gn{urlAfterRedirects;state;type=Vt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xg=class extends Gn{urlAfterRedirects;state;type=Vt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pg=class extends Gn{urlAfterRedirects;state;shouldActivate;type=Vt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kg=class extends Gn{urlAfterRedirects;state;type=Vt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Og=class extends Gn{urlAfterRedirects;state;type=Vt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class{route;type=Vt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lg=class{route;type=Vt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vg=class{snapshot;type=Vt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jg=class{snapshot;type=Vt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bg=class{snapshot;type=Vt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ug=class{snapshot;type=Vt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jc=class{routerEvent;position;anchor;type=Vt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},zd=class{},Bc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function O4(n){return!(n instanceof zd)&&!(n instanceof Bc)}function F4(n,e){return n.providers&&!n._injector&&(n._injector=mc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function xr(n){return n.outlet||ve}function L4(n,e){let t=n.filter(r=>xr(r)===e);return t.push(...n.filter(r=>xr(r)!==e)),t}function Hc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var $g=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ta(this.rootInjector)}},ta=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new $g(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(q(ze))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=rC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=rC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=iC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iC(e,this._root).map(t=>t.value)}};function rC(n,e){if(n===e.value)return e;for(let t of e.children){let r=rC(n,t);if(r)return r}return null}function iC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=iC(n,t);if(r.length)return r.unshift(e),r}return[]}var zn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Gd=class extends Hg{snapshot;constructor(e,t){super(e),this.snapshot=t,fC(this,e)}toString(){return this.snapshot.toString()}};function Ek(n){let e=V4(n),t=new vt([new Ao("",{})]),r=new vt({}),i=new vt({}),o=new vt({}),s=new vt(""),a=new No(t,r,o,s,i,ve,n,e.root);return a.snapshot=e.root,new Gd(new zn(a,[]),e)}function V4(n){let e={},t={},r={},i="",o=new Js([],e,r,i,t,ve,n,null,{});return new Wd("",new zn(o,[]))}var No=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ne(u=>u[Zd]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&Ik(i)&&(r.resolve[Zd]=i.title),r}var Js=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Zd]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Wd=class extends Hg{url;constructor(e,t){super(t),this.url=e,fC(this,t)}toString(){return wk(this._root)}};function fC(n,e){e.value._routerState=n,e.children.forEach(t=>fC(n,t))}function wk(n){let e=n.children.length>0?` { ${n.children.map(wk).join(", ")} } `:"";return`${n.value}${e}`}function YD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,si(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),si(e.params,t.params)||n.paramsSubject.next(t.params),d4(e.url,t.url)||n.urlSubject.next(t.url),si(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oC(n,e){let t=si(n.params,e.params)&&m4(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||oC(n.parent,e.parent))}function Ik(n){return typeof n.title=="string"||n.title===null}var Dk=new z(""),Jd=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ve;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=Fx(void 0);parentContexts=O(ta);location=O(js);changeDetector=O(Li);inputBinder=O(Xd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new sC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ni]})}return n})(),sC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===No?this.route:e===ta?this.childContexts:e===Dk?this.outletData:this.parent.get(e,t)}},Xd=new z(""),hC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Cu([r.queryParams,r.params,r.data]).pipe(at(([o,s,a],c)=>(a=U(U(U({},o),s),a),c===0?ie(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Hx(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),pC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=We({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ge(0,"router-outlet")},dependencies:[Jd],encapsulation:2})}return n})();function mC(n){let e=n.children&&n.children.map(mC),t=e?de(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=pC),t}function j4(n,e,t){let r=Kd(n,e._root,t?t._root:void 0);return new Gd(r,e)}function Kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=B4(n,e,t);return new zn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Kd(n,a)),s}}let r=U4(e.value),i=e.children.map(o=>Kd(n,o));return new zn(r,i)}}function B4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Kd(n,r,i);return Kd(n,r)})}function U4(n){return new No(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var Uc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ck="ngNavigationCancelingError";function zg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bk(!1,In.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function bk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ck]=!0,t.cancellationCode=e,t}function $4(n){return Tk(n)&&Fc(n.url)}function Tk(n){return!!n&&n[Ck]}var H4=(n,e,t,r)=>ne(i=>(new aC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),aC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),YD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ug(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(YD(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),YD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Gg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Oc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function q4(n,e,t){let r=n._root,i=e?e._root:null;return Bd(r,i,t,[r.value])}function z4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!AE(n)?n:e.get(n):r}function Bd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xc(e);return n.children.forEach(s=>{G4(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$d(a,t.getContext(s),i)),i}function G4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=W4(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Gg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bd(n,e,a?a.children:null,r,i):Bd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oc(a.outlet.component,s))}else s&&$d(e,a,i),i.canActivateChecks.push(new Gg(r)),o.component?Bd(n,null,a?a.children:null,r,i):Bd(n,null,t,r,i);return i}function W4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(n.url,e.url)||!si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oC(n,e)||!si(n.queryParams,e.queryParams);case"paramsChange":default:return!oC(n,e)}}function $d(n,e,t){let r=xc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$d(s,e.children.getContext(o),t):$d(s,null,t):$d(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Oc(e.outlet.component,i)):t.canDeactivateChecks.push(new Oc(null,i)):t.canDeactivateChecks.push(new Oc(null,i))}function ef(n){return typeof n=="function"}function K4(n){return typeof n=="boolean"}function Q4(n){return n&&ef(n.canLoad)}function Y4(n){return n&&ef(n.canActivate)}function Z4(n){return n&&ef(n.canActivateChild)}function J4(n){return n&&ef(n.canDeactivate)}function X4(n){return n&&ef(n.canMatch)}function Sk(n){return n instanceof Si||n?.name==="EmptyError"}var Tg=Symbol("INITIAL_VALUE");function $c(){return at(n=>Cu(n.map(e=>e.pipe(er(1),gs(Tg)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Tg)return Tg;if(t===!1||e3(t))return t}return!0}),Ot(e=>e!==Tg),er(1)))}function e3(n){return Fc(n)||n instanceof Uc}function t3(n,e){return _t(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ie(de(U({},t),{guardsResult:!0})):n3(s,r,i,n).pipe(_t(a=>a&&K4(a)?r3(r,o,n,e):ie(a)),ne(a=>de(U({},t),{guardsResult:a})))})}function n3(n,e,t,r){return Se(n).pipe(_t(i=>c3(i.component,i.route,t,e,r)),mr(i=>i!==!0,!0))}function r3(n,e,t,r){return Se(e).pipe(uo(i=>Xa(o3(i.route.parent,r),i3(i.route,r),a3(n,i.path,t),s3(n,i.route,t))),mr(i=>i!==!0,!0))}function i3(n,e){return n!==null&&e&&e(new Bg(n)),ie(!0)}function o3(n,e){return n!==null&&e&&e(new Vg(n)),ie(!0)}function s3(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(o=>bu(()=>{let s=Hc(e)??t,a=qc(o,s),c=Y4(a)?a.canActivate(e,n):St(s,()=>a(e,n));return qi(c).pipe(mr())}));return ie(i).pipe($c())}function a3(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>z4(s)).filter(s=>s!==null).map(s=>bu(()=>{let a=s.guards.map(c=>{let u=Hc(s.node)??t,d=qc(c,u),h=Z4(d)?d.canActivateChild(r,n):St(u,()=>d(r,n));return qi(h).pipe(mr())});return ie(a).pipe($c())}));return ie(o).pipe($c())}function c3(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ie(!0);let s=o.map(a=>{let c=Hc(e)??i,u=qc(a,c),d=J4(u)?u.canDeactivate(n,e,t,r):St(c,()=>u(n,e,t,r));return qi(d).pipe(mr())});return ie(s).pipe($c())}function l3(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let o=i.map(s=>{let a=qc(s,n),c=Q4(a)?a.canLoad(e,t):St(n,()=>a(e,t));return qi(c)});return ie(o).pipe($c(),Ak(r))}function Ak(n){return tE(Ut(e=>{if(typeof e!="boolean")throw zg(n,e)}),ne(e=>e===!0))}function u3(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let o=i.map(s=>{let a=qc(s,n),c=X4(a)?a.canMatch(e,t):St(n,()=>a(e,t));return qi(c)});return ie(o).pipe($c(),Ak(r))}var Qd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Yd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Nc(n){return Ja(new Qd(n))}function d3(n){return Ja(new V(4e3,!1))}function f3(n){return Ja(bk(!1,In.GuardRejected))}var cC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[ve])return d3(`${e.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(e,t,r,i,o){return h3(t,i,o).pipe(ne(s=>{if(s instanceof ci)throw new Yd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Yd(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ci(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Oe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function h3(n,e,t){if(typeof n=="string")return ie(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return qi(St(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var lC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function p3(n,e,t,r,i){let o=Rk(n,e,t);return o.matched?(r=F4(e,r),u3(r,e,t,i).pipe(ne(s=>s===!0?o:U({},lC)))):ie(o)}function Rk(n,e,t){if(e.path==="**")return m3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},lC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ik)(t,n,e);if(!i)return U({},lC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function m3(n){return{matched:!0,parameters:n.length>0?sk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function tk(n,e,t,r){return t.length>0&&v3(n,t,r)?{segmentGroup:new Oe(e,y3(r,new Oe(t,n.children))),slicedSegments:[]}:t.length===0&&_3(n,t,r)?{segmentGroup:new Oe(n.segments,g3(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Oe(n.segments,n.children),slicedSegments:t}}function g3(n,e,t,r){let i={};for(let o of t)if(Kg(n,e,o)&&!r[xr(o)]){let s=new Oe([],{});i[xr(o)]=s}return U(U({},r),i)}function y3(n,e){let t={};t[ve]=e;for(let r of n)if(r.path===""&&xr(r)!==ve){let i=new Oe([],{});t[xr(r)]=i}return t}function v3(n,e,t){return t.some(r=>Kg(n,e,r)&&xr(r)!==ve)}function _3(n,e,t){return t.some(r=>Kg(n,e,r))}function Kg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function E3(n,e,t){return e.length===0&&!n.children[t]}var uC=class{};function w3(n,e,t,r,i,o,s="emptyOnly"){return new dC(n,e,t,r,i,s,o).recognize()}var I3=31,dC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new cC(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=tk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new zn(r,t),o=new Wd("",i),s=mk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Js([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ve,t).pipe(ne(r=>({children:r,rootSnapshot:t})),Ai(r=>{if(r instanceof Yd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof zn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Se(o).pipe(uo(s=>{let a=r.children[s],c=L4(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ms((s,a)=>(s.push(...a),s)),fo(null),dE(),_t(s=>{if(s===null)return Nc(r);let a=Mk(s);return D3(a),ie(a)}))}processSegment(e,t,r,i,o,s,a){return Se(t).pipe(uo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ai(u=>{if(u instanceof Qd)return ie(null);throw u}))),mr(c=>!!c),Ai(c=>{if(Sk(c))return E3(r,i,o)?ie(new uC):Nc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return xr(r)!==s&&(s===ve||!Kg(i,o,r))?Nc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Nc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:m}=Rk(t,i,o);if(!c)return Nc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>I3&&(this.allowRedirects=!1));let g=new Js(o,u,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,nk(i),xr(i),i.component??i._loadedComponent??null,i,rk(i)),_=qg(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(at(T=>this.applyRedirects.lineralizeSegments(i,T)),_t(T=>this.processSegment(e,r,t,T.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=p3(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(at(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(at(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:g}=c,_=new Js(m,h,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,nk(r),xr(r),r.component??r._loadedComponent??null,r,rk(r)),D=qg(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(D.params),_.data=Object.freeze(D.data);let{segmentGroup:T,slicedSegments:F}=tk(t,m,g,u);if(F.length===0&&T.hasChildren())return this.processChildren(d,u,T,_).pipe(ne(B=>new zn(_,B)));if(u.length===0&&F.length===0)return ie(new zn(_,[]));let G=xr(r)===o;return this.processSegment(d,u,T,F,G?ve:o,!0,_).pipe(ne(B=>new zn(_,B instanceof zn?[B]:[])))}))):Nc(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):l3(e,t,r,this.urlSerializer).pipe(_t(i=>i?this.configLoader.loadChildren(e,t).pipe(Ut(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):f3(t))):ie({routes:[],injector:e})}};function D3(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}function C3(n){let e=n.value.routeConfig;return e&&e.path===""}function Mk(n){let e=[],t=new Set;for(let r of n){if(!C3(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Mk(r.children);e.push(new zn(r.value,i))}return e.filter(r=>!t.has(r))}function nk(n){return n.data||{}}function rk(n){return n.resolve||{}}function b3(n,e,t,r,i,o){return _t(s=>w3(n,e,t,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:c})=>de(U({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function T3(n,e){return _t(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Nk(c))s.add(u);let a=0;return Se(s).pipe(uo(c=>o.has(c)?S3(c,r,n,e):(c.data=qg(c,c.parent,n).resolve,ie(void 0))),Ut(()=>a++),ec(1),_t(c=>a===s.size?ie(t):rn))})}function Nk(n){let e=n.children.map(t=>Nk(t)).flat();return[n,...e]}function S3(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Ik(i)&&(o[Zd]=i.title),bu(()=>(n.data=qg(n,n.parent,t).resolve,A3(o,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=U(U({},n.data),s),null)))))}function A3(n,e,t,r){let i=XD(n);if(i.length===0)return ie({});let o={};return Se(i).pipe(_t(s=>R3(n[s],e,t,r).pipe(mr(),Ut(a=>{if(a instanceof Uc)throw zg(new Ro,a);o[s]=a}))),ec(1),ne(()=>o),Ai(s=>Sk(s)?rn:Ja(s)))}function R3(n,e,t,r){let i=Hc(e)??r,o=qc(n,i),s=o.resolve?o.resolve(e,t):St(i,()=>o(e,t));return qi(s)}function ZD(n){return at(e=>{let t=n(e);return t?Se(t).pipe(ne(()=>e)):ie(e)})}var gC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ve);return r}getResolvedTitleForRoute(t){return t.data[Zd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(xk),providedIn:"root"})}return n})(),xk=(()=>{class n extends gC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(q(wP))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),na=new z("",{providedIn:"root",factory:()=>({})}),zc=new z(""),Qg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(xI);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ie(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qi(St(t,()=>r.loadComponent())).pipe(ne(kk),Ut(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Tu(()=>{this.componentLoaders.delete(r)})),o=new Ka(i,()=>new Xe).pipe(Wa());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Pk(r,this.compiler,t,this.onLoadEndListener).pipe(Tu(()=>{this.childrenLoaders.delete(r)})),s=new Ka(o,()=>new Xe).pipe(Wa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pk(n,e,t,r){return qi(St(t,()=>n.loadChildren())).pipe(ne(kk),_t(i=>i instanceof hm||Array.isArray(i)?ie(i):Se(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(zc,[],{optional:!0,self:!0}).flat()),{routes:s.map(mC),injector:o}}))}function M3(n){return n&&typeof n=="object"&&"default"in n}function kk(n){return M3(n)?n.default:n}var Yg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(N3),providedIn:"root"})}return n})(),N3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yC=new z(""),vC=new z("");function Ok(n,e,t){let r=n.get(vC),i=n.get(ht);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),x3(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&St(n,()=>c({transition:a,from:e,to:t})),s}function x3(n){return new Promise(e=>{gm({read:()=>setTimeout(e)},{injector:n})})}var _C=new z(""),Zg=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Xe;transitionAbortWithErrorSubject=new Xe;configLoader=O(Qg);environmentInjector=O(ze);destroyRef=O(Jr);urlSerializer=O(ea);rootContexts=O(ta);location=O(bo);inputBindingEnabled=O(Xd,{optional:!0})!==null;titleStrategy=O(gC);options=O(na,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(Yg);createViewTransition=O(yC,{optional:!0});navigationErrorHandler=O(_C,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Fg(i)),r=i=>this.events.next(new Lg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new vt(null),this.transitions.pipe(Ot(r=>r!==null),at(r=>{let i=!1;return ie(r).pipe(at(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",In.SupersededByNewNavigation),rn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?de(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new li(o.id,this.urlSerializer.serialize(o.rawUrl),c,Lc.IgnoredSameUrlNavigation)),o.resolve(!1),rn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ie(o).pipe(at(c=>(this.events.next(new Mo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?rn:Promise.resolve(c))),b3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ut(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=de(U({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new qd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:m}=o,g=new Mo(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);let _=Ek(this.rootComponentType).snapshot;return this.currentTransition=r=de(U({},o),{targetSnapshot:_,urlAfterRedirects:u,extras:de(U({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,ie(r)}else{let c="";return this.events.next(new li(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Lc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),rn}}),Ut(o=>{let s=new xg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ne(o=>(this.currentTransition=r=de(U({},o),{guards:q4(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),t3(this.environmentInjector,o=>this.events.next(o)),Ut(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw zg(this.urlSerializer,o.guardsResult);let s=new Pg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ot(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",In.GuardRejected),!1)),ZD(o=>{if(o.guards.canActivateChecks.length!==0)return ie(o).pipe(Ut(s=>{let a=new kg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),at(s=>{let a=!1;return ie(s).pipe(T3(this.paramsInheritanceStrategy,this.environmentInjector),Ut({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",In.NoDataFromResolver)}}))}),Ut(s=>{let a=new Og(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),ZD(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let u=Hc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Ut(d=>{a.component=d}),ne(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Cu(s(o.targetSnapshot.root)).pipe(fo(null),er(1))}),ZD(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Se(a).pipe(ne(()=>r)):ie(r)}),ne(o=>{let s=j4(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=de(U({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ut(()=>{this.events.next(new zd)}),H4(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),er(1),up(new fe(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ot(()=>!i&&!r.targetRouterState),Ut(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",In.Aborted)}))),Ut({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),up(this.transitionAbortWithErrorSubject.pipe(Ut(o=>{throw o}))),Tu(()=>{i||this.cancelNavigationTransition(r,"",In.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ai(o=>{if(this.destroyed)return r.resolve(!1),rn;if(i=!0,Tk(o))this.events.next(new ai(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),$4(o)?this.events.next(new Bc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Vc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=St(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Uc){let{message:c,cancellationCode:u}=zg(this.urlSerializer,a);this.events.next(new ai(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Bc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return rn}))}))}cancelNavigationTransition(t,r,i){let o=new ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P3(n){return n!==kc}var Fk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(k3),providedIn:"root"})}return n})(),Wg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},k3=(()=>{class n extends Wg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vs(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lk=(()=>{class n{urlSerializer=O(ea);options=O(na,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(bo);urlHandlingStrategy=O(Yg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ci;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ci?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Ek(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>O(O3),providedIn:"root"})}return n})(),O3=(()=>{class n extends Lk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Mo?this.updateStateMemento():t instanceof li?this.commitTransition(r):t instanceof qd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ai&&t.code!==In.SupersededByNewNavigation&&t.code!==In.Redirect?this.restoreHistory(r):t instanceof Vc?this.restoreHistory(r,!0):t instanceof Pr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vs(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jg(n,e){n.events.pipe(Ot(t=>t instanceof Pr||t instanceof ai||t instanceof Vc||t instanceof li),ne(t=>t instanceof Pr||t instanceof li?0:(t instanceof ai?t.code===In.Redirect||t.code===In.SupersededByNewNavigation:!1)?2:1),Ot(t=>t!==2),er(1)).subscribe(()=>{e()})}var F3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},L3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(wI);stateManager=O(Lk);options=O(na,{optional:!0})||{};pendingTasks=O(Xr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Zg);urlSerializer=O(ea);location=O(bo);urlHandlingStrategy=O(Yg);injector=O(ze);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(Fk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(zc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Xd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ai&&r.code!==In.Redirect&&r.code!==In.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pr)this.navigated=!0;else if(r instanceof Bc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||P3(i.source)},s);this.scheduleNavigation(a,kc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}O4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get($n)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let m=i?i.snapshot:this.routerState.snapshot.root;h=gk(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return yk(h,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Fc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,kc,null,r)}navigate(t,r={skipLocationChange:!1}){return V3(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},F3):r===!1?i=U({},L3):i=r,Fc(t))return Z1(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Z1(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,m)=>{a=h,c=m});let d=this.pendingTasks.add();return Jg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}var tf=class{};var Vk=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ot(t=>t instanceof Pr),uo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=mc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Se(i).pipe(lo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ie(null);let o=i.pipe(_t(s=>s===null?ie(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Se([o,s]).pipe(lo())}else return o})}static \u0275fac=function(r){return new(r||n)(q(xo),q(ze),q(tf),q(Qg))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jk=new z(""),j3=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=kc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof li&&t.code===Lc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>A(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new jc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){gI()};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function B3(n){return n.routerState.root}function nf(n,e){return{\u0275kind:n,\u0275providers:e}}function U3(){let n=O(it);return e=>{let t=n.get(ii);if(e!==t.components[0])return;let r=n.get(xo),i=n.get(Bk);n.get(wC)===1&&r.initialNavigation(),n.get(Hk,null,{optional:!0})?.setUpPreloading(),n.get(jk,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Bk=new z("",{factory:()=>new Xe}),wC=new z("",{providedIn:"root",factory:()=>1});function Uk(){let n=[{provide:wC,useValue:0},vm(()=>{let e=O(it);return e.get(UI,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(xo),o=e.get(Bk);Jg(i,()=>{r(!0)}),e.get(Zg).afterPreactivation=()=>(r(!0),o.closed?ie(void 0):o),i.initialNavigation()}))})];return nf(2,n)}function $k(){let n=[vm(()=>{O(xo).setUpLocationChangeListener()}),{provide:wC,useValue:2}];return nf(3,n)}var Hk=new z("");function qk(n){return nf(0,[{provide:Hk,useExisting:Vk},{provide:tf,useExisting:n}])}function zk(){return nf(8,[hC,{provide:Xd,useExisting:hC}])}function Gk(n){Bs("NgRouterViewTransitions");let e=[{provide:yC,useValue:Ok},{provide:vC,useValue:U({skipNextTransition:!!n?.skipInitialTransition},n)}];return nf(9,e)}var Wk=[bo,{provide:ea,useClass:Ro},xo,ta,{provide:No,useFactory:B3,deps:[xo]},Qg,[]],Xg=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[Wk,[],{provide:zc,multi:!0,useValue:t},[],r?.errorHandler?{provide:_C,useValue:r.errorHandler}:[],{provide:na,useValue:r||{}},r?.useHash?H3():q3(),$3(),r?.preloadingStrategy?qk(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?z3(r):[],r?.bindToComponentInputs?zk().\u0275providers:[],r?.enableViewTransitions?Gk().\u0275providers:[],G3()]}}static forChild(t){return{ngModule:n,providers:[{provide:zc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({})}return n})();function $3(){return{provide:jk,useFactory:()=>{let n=O(fP),e=O(he),t=O(na),r=O(Zg),i=O(ea);return t.scrollOffset&&n.setOffset(t.scrollOffset),new j3(i,r,n,e,t)}}}function H3(){return{provide:Vi,useClass:zI}}function q3(){return{provide:Vi,useClass:Sm}}function z3(n){return[n.initialNavigation==="disabled"?$k().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Uk().\u0275providers:[]]}var EC=new z("");function G3(){return[{provide:EC,useFactory:U3},{provide:_m,multi:!0,useExisting:EC}]}var un=class n{constructor(e,t){this.el=e;this.renderer=t}animateClass="fade-in";observer;ngAfterViewInit(){this.observer=new IntersectionObserver(([e])=>{if(e.isIntersecting){let t=this.animateClass&&this.animateClass.trim()?this.animateClass:"fade-in";this.renderer.removeClass(this.el.nativeElement,"pre-fade-in"),console.log("Animating element:",this.el.nativeElement),this.renderer.addClass(this.el.nativeElement,t)}else this.renderer.removeClass(this.el.nativeElement,this.animateClass)},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),this.observer.observe(this.el.nativeElement),console.log("Initialized scroll observer for",this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||n)(J(ri),J(Fi))};static \u0275dir=wt({type:n,selectors:[["","appScrollAnimate",""]],inputs:{animateClass:[0,"appScrollAnimate","animateClass"]}})};var Q3="firebase",Y3="11.10.0";en(Q3,Y3,"app");function dn(n){n===void 0&&(n=O(it));let e=n.get(cc);return t=>new fe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Dn=new qs("ANGULARFIRE2_VERSION");function rf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Wc=(n,e)=>{let t=e?[e]:bh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Gc||{}),Kk=_c()&&typeof Zone<"u"?Gc.WARN:Gc.SILENT;var ey=class{zone;delegate;constructor(e,t=oE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},dr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=O(he);this.outsideAngular=t.runOutsideAngular(()=>new ey(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ey(typeof Zone>"u"?void 0:Zone.current,Du))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qk=!1;function Z3(n,e){!Qk&&(Kk>Gc.SILENT||_c())&&(Qk=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Kk>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function J3(n){let e=O(he,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ra(n){let e=O(he,{optional:!0});return e?e.run(()=>n()):n()}var X3=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),St(t,()=>ra(()=>n.apply(void 0,r)))),Ht=(n,e,t)=>(t||=e?Gc.WARN:Gc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=O(dr),s=O(cc),a=O(ze)}catch{return Z3(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ra(()=>s.add())),i[u]=X3(i[u],r,a));let c=J3(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(Xn(o.outsideAngular),jn(o.insideAngular),dn(a)):c instanceof Promise?ra(()=>{let u=s.add();return new Promise((d,h)=>{c.then(m=>St(a,()=>ra(()=>d(m))),m=>St(a,()=>ra(()=>h(m)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ra(()=>c):c instanceof fe?c.pipe(Xn(o.outsideAngular),jn(o.insideAngular)):ra(()=>c)});var zi=class{constructor(e){return e}},ia=class{constructor(){return bh()}};function eG(n){return n&&n.length===1?n[0]:new zi(gu())}var IC=new z("angularfire2._apps"),tG={provide:zi,useFactory:eG,deps:[[new sn,IC]]},nG={provide:ia,deps:[[new sn,IC]]};function rG(n){return(e,t)=>{let r=t.get(Mn);en("angularfire",Dn.full,"core"),en("angularfire",Dn.full,"app"),en("angular",Cm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new zi(i)}}function Zk(n,...e){return Kr([tG,nG,{provide:IC,useFactory:rG(n),multi:!0,deps:[he,it,dr,...e]}])}var Jk=Ht(HA,!0);var iG=new Map,oG={activated:!1,tokenObservers:[]},sG={initialized:!1,enabled:!1};function kr(n){return iG.get(n)||Object.assign({},oG)}function nO(){return sG}var aG="https://content-firebaseappcheck.googleapis.com/v1";var cG="exchangeDebugToken",Xk={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Iue=24*60*60*1e3;var bC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return A(this,null,function*(){this.stop();try{this.pending=new k_,this.pending.promise.catch(t=>{}),yield lG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new k_,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function lG(n){return new Promise(e=>{setTimeout(e,n)})}var uG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Po=new BA("appCheck","AppCheck",uG);function rO(n){if(!kr(n).activated)throw Po.create("use-before-activation",{appName:n.name})}function iO(r,i){return A(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw Po.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw Po.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(g){throw Po.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Po.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+h,issuedAtTimeMillis:m}})}function oO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${aG}/projects/${t}/apps/${r}:${cG}?key=${i}`,body:{debug_token:e}}}var dG="firebase-app-check-database",fG=1,TC="firebase-app-check-store";var ty=null;function hG(){return ty||(ty=new Promise((n,e)=>{try{let t=indexedDB.open(dG,fG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Po.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(TC,{keyPath:"compositeKey"})}}}catch(t){e(Po.create("storage-open",{originalErrorMessage:t?.message}))}}),ty)}function pG(n,e){return mG(gG(n),e)}function mG(n,e){return A(this,null,function*(){let r=(yield hG()).transaction(TC,"readwrite"),o=r.objectStore(TC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Po.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function gG(n){return`${n.options.appId}-${n.name}`}var of=new Ch("@firebase/app-check");function DC(n,e){return Ih()?pG(n,e).catch(t=>{of.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sO(){return nO().enabled}function aO(){return A(this,null,function*(){let n=nO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var yG={error:"UNKNOWN_ERROR"};function vG(n){return kA.encodeString(JSON.stringify(n),!1)}function SC(n,e=!1,t=!1){return A(this,null,function*(){let r=n.app;rO(r);let i=kr(r),o=i.token,s;if(o&&!sf(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(sf(u)?o=u:yield DC(r,void 0))}if(!e&&o&&sf(o))return{token:o.token};let a=!1;if(sO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iO(oO(r,yield aO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield DC(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?of.warn(u.message):t&&of.error(u),CC(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield kr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?of.warn(u.message):t&&of.error(u),s=u}let c;return o?s?sf(o)?c={token:o.token,internalError:s}:c=CC(s):(c={token:o.token},i.token=o,yield DC(r,o)):c=CC(s),a&&IG(r,c),c})}function _G(n){return A(this,null,function*(){let e=n.app;rO(e);let{provider:t}=kr(e);if(sO()){let r=yield aO(),{token:i}=yield iO(oO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EG(n,e,t,r){let{app:i}=n,o=kr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sf(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),eO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eO(n))}function cO(n,e){let t=kr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eO(n){let{app:e}=n,t=kr(e),r=t.tokenRefresher;r||(r=wG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wG(n){let{app:e}=n;return new bC(()=>A(null,null,function*(){let t=kr(e),r;if(t.token?r=yield SC(n,!0):r=yield SC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Xk.RETRIAL_MIN_WAIT,Xk.RETRIAL_MAX_WAIT)}function IG(n,e){let t=kr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function sf(n){return n.expireTimeMillis-Date.now()>0}function CC(n){return{token:vG(yG),error:n}}var AC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=kr(this.app);for(let t of e)cO(this.app,t.next);return Promise.resolve()}};function DG(n,e){return new AC(n,e)}function CG(n){return{getToken:e=>SC(n,e),getLimitedUseToken:()=>_G(n),addTokenListener:e=>EG(n,"INTERNAL",e),removeTokenListener:e=>cO(n.app,e)}}var bG="@firebase/app-check",TG="0.10.1";var SG="app-check",tO="app-check-internal";function AG(){mu(new ls(SG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return DG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tO).initialize()})),mu(new ls(tO,n=>{let e=n.getProvider("app-check").getImmediate();return CG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),en(bG,TG)}AG();var RG="app-check";var ui=class{constructor(){return Wc(RG)}};var MG=["localhost","0.0.0.0","127.0.0.1"],Oue=typeof window<"u"&&MG.includes(window.location.hostname);function fO(n){return new fe(function(e){var t=Th(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var hO="auth",oa=class{constructor(e){return e}},af=class{constructor(){return Wc(hO)}};var RC=new z("angularfire2.auth-instances");function C9(n,e){let t=rf(hO,n,e);return t&&new oa(t)}function b9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oa(r)}}var T9={provide:af,deps:[[new sn,RC]]},S9={provide:oa,useFactory:C9,deps:[[new sn,RC],zi]};function pO(n,...e){return en("angularfire",Dn.full,"auth"),Kr([S9,T9,{provide:RC,useFactory:b9(n),multi:!0,deps:[he,it,dr,ia,[new sn,ui],...e]}])}var mO=Ht(fO,!0);var gO=Ht(U_,!0);var yO=Ht(j_,!0,2);var vO=Ht(B_,!0,2);var _O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EO={};var Gi,MC;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(C,b,R){for(var E=Array(arguments.length-2),Zn=2;Zn<arguments.length;Zn++)E[Zn-2]=arguments[Zn];return v.prototype[b].apply(C,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)C[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],b=I.g[2];var R=I.g[3],E=v+(R^w&(b^R))+C[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=R+(b^v&(w^b))+C[1]+3905402710&4294967295,R=v+(E<<12&4294967295|E>>>20),E=b+(w^R&(v^w))+C[2]+606105819&4294967295,b=R+(E<<17&4294967295|E>>>15),E=w+(v^b&(R^v))+C[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(R^w&(b^R))+C[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(b^v&(w^b))+C[5]+1200080426&4294967295,R=v+(E<<12&4294967295|E>>>20),E=b+(w^R&(v^w))+C[6]+2821735955&4294967295,b=R+(E<<17&4294967295|E>>>15),E=w+(v^b&(R^v))+C[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(R^w&(b^R))+C[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(b^v&(w^b))+C[9]+2336552879&4294967295,R=v+(E<<12&4294967295|E>>>20),E=b+(w^R&(v^w))+C[10]+4294925233&4294967295,b=R+(E<<17&4294967295|E>>>15),E=w+(v^b&(R^v))+C[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(R^w&(b^R))+C[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(b^v&(w^b))+C[13]+4254626195&4294967295,R=v+(E<<12&4294967295|E>>>20),E=b+(w^R&(v^w))+C[14]+2792965006&4294967295,b=R+(E<<17&4294967295|E>>>15),E=w+(v^b&(R^v))+C[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^R&(w^b))+C[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^b&(v^w))+C[6]+3225465664&4294967295,R=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(R^v))+C[11]+643717713&4294967295,b=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(b^R))+C[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^R&(w^b))+C[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^b&(v^w))+C[10]+38016083&4294967295,R=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(R^v))+C[15]+3634488961&4294967295,b=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(b^R))+C[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^R&(w^b))+C[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^b&(v^w))+C[14]+3275163606&4294967295,R=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(R^v))+C[3]+4107603335&4294967295,b=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(b^R))+C[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^R&(w^b))+C[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^b&(v^w))+C[2]+4243563512&4294967295,R=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(R^v))+C[7]+1735328473&4294967295,b=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(b^R))+C[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^R)+C[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^b)+C[8]+2272392833&4294967295,R=v+(E<<11&4294967295|E>>>21),E=b+(R^v^w)+C[11]+1839030562&4294967295,b=R+(E<<16&4294967295|E>>>16),E=w+(b^R^v)+C[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^R)+C[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^b)+C[4]+1272893353&4294967295,R=v+(E<<11&4294967295|E>>>21),E=b+(R^v^w)+C[7]+4139469664&4294967295,b=R+(E<<16&4294967295|E>>>16),E=w+(b^R^v)+C[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^R)+C[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^b)+C[0]+3936430074&4294967295,R=v+(E<<11&4294967295|E>>>21),E=b+(R^v^w)+C[3]+3572445317&4294967295,b=R+(E<<16&4294967295|E>>>16),E=w+(b^R^v)+C[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^R)+C[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^b)+C[12]+3873151461&4294967295,R=v+(E<<11&4294967295|E>>>21),E=b+(R^v^w)+C[15]+530742520&4294967295,b=R+(E<<16&4294967295|E>>>16),E=w+(b^R^v)+C[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~R))+C[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~b))+C[7]+1126891415&4294967295,R=v+(E<<10&4294967295|E>>>22),E=b+(v^(R|~w))+C[14]+2878612391&4294967295,b=R+(E<<15&4294967295|E>>>17),E=w+(R^(b|~v))+C[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~R))+C[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~b))+C[3]+2399980690&4294967295,R=v+(E<<10&4294967295|E>>>22),E=b+(v^(R|~w))+C[10]+4293915773&4294967295,b=R+(E<<15&4294967295|E>>>17),E=w+(R^(b|~v))+C[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~R))+C[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~b))+C[15]+4264355552&4294967295,R=v+(E<<10&4294967295|E>>>22),E=b+(v^(R|~w))+C[6]+2734768916&4294967295,b=R+(E<<15&4294967295|E>>>17),E=w+(R^(b|~v))+C[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~R))+C[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~b))+C[11]+3174756917&4294967295,R=v+(E<<10&4294967295|E>>>22),E=b+(v^(R|~w))+C[2]+718787259&4294967295,b=R+(E<<15&4294967295|E>>>17),E=w+(R^(b|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,C=this.B,b=this.h,R=0;R<v;){if(b==0)for(;R<=w;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<v;)if(C[b++]=I.charCodeAt(R++),b==this.blockSize){i(this,C),b=0;break}}else for(;R<v;)if(C[b++]=I[R++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var C=0;32>C;C+=8)I[w++]=this.g[v]>>>C&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],C=!0,b=I.length-1;0<=b;b--){var R=I[b]|0;C&&R==v||(w[b]=R,C=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return T(u(-I));for(var v=[],w=1,C=0;I>=w;C++)v[C]=I/w|0,w*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return T(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(v,8)),C=h,b=0;b<I.length;b+=8){var R=Math.min(8,I.length-b),E=parseInt(I.substring(b,b+R),v);8>R?(R=u(Math.pow(v,R)),C=C.j(R).add(u(E))):(C=C.j(w),C=C.add(u(E)))}return C}var h=c(0),m=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(D(this))return-T(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var C=this.i(w);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(D(this))return"-"+T(this).toString(I);for(var v=u(Math.pow(I,6)),w=this,C="";;){var b=X(w,v).g;w=F(w,b.j(v));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=b,_(w))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=F(this,I),D(I)?-1:_(I)?0:1};function T(I){for(var v=I.g.length,w=[],C=0;C<v;C++)w[C]=~I.g[C];return new s(w,~I.h).add(m)}n.abs=function(){return D(this)?T(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0,b=0;b<=v;b++){var R=C+(this.i(b)&65535)+(I.i(b)&65535),E=(R>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);C=E>>>16,R&=65535,E&=65535,w[b]=E<<16|R}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(T(v))}n.j=function(I){if(_(this)||_(I))return h;if(D(this))return D(I)?T(this).j(T(I)):T(T(this).j(I));if(D(I))return T(this.j(T(I)));if(0>this.l(g)&&0>I.l(g))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],C=0;C<2*v;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<I.g.length;b++){var R=this.i(C)>>>16,E=this.i(C)&65535,Zn=I.i(b)>>>16,ro=I.i(b)&65535;w[2*C+2*b]+=E*ro,G(w,2*C+2*b),w[2*C+2*b+1]+=R*ro,G(w,2*C+2*b+1),w[2*C+2*b+1]+=E*Zn,G(w,2*C+2*b+1),w[2*C+2*b+2]+=R*Zn,G(w,2*C+2*b+2)}for(C=0;C<v;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=v;C<2*v;C++)w[C]=0;return new s(w,0)};function G(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function B(I,v){this.g=I,this.h=v}function X(I,v){if(_(v))throw Error("division by zero");if(_(I))return new B(h,h);if(D(I))return v=X(T(I),v),new B(T(v.g),T(v.h));if(D(v))return v=X(I,T(v)),new B(T(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,C=v;0>=C.l(I);)w=ce(w),C=ce(C);var b=ae(w,1),R=ae(C,1);for(C=ae(C,2),w=ae(w,2);!_(C);){var E=R.add(C);0>=E.l(I)&&(b=b.add(w),R=E),C=ae(C,1),w=ae(w,1)}return v=F(I,b.j(v)),new B(b,v)}for(b=h;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=u(w),E=R.j(v);D(E)||0<E.l(I);)w-=C,R=u(w),E=R.j(v);_(R)&&(R=m),b=b.add(R),I=F(I,E)}return new B(b,I)}n.A=function(I){return X(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)&I.i(C);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)|I.i(C);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)^I.i(C);return new s(w,this.h^I.h)};function ce(I){for(var v=I.g.length+1,w=[],C=0;C<v;C++)w[C]=I.i(C)<<1|I.i(C-1)>>>31;return new s(w,I.h)}function ae(I,v){var w=v>>5;v%=32;for(var C=I.g.length-w,b=[],R=0;R<C;R++)b[R]=0<v?I.i(R+w)>>>v|I.i(R+w+1)<<32-v:I.i(R+w);return new s(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MC=EO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Gi=EO.Integer=s}).apply(typeof _O<"u"?_O:typeof self<"u"?self:typeof window<"u"?window:{});var ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wi={};var NC,R9,Kc,xC,cf,ry,PC,kC,OC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,p){return l==Array.prototype||l==Object.prototype||(l[f]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ny=="object"&&ny];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var p=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var S=l[y];if(!(S in p))break e;p=p[S]}l=l[l.length-1],y=p[l],f=f(y),f!=y&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var p=0,y=!1,S={next:function(){if(!y&&p<l.length){var x=p++;return{value:f(x,l[x]),done:!1}}return y=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,p){return p})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,p){return l.call.apply(l.bind,arguments)}function h(l,f,p){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,y),l.apply(f,S)}}return function(){return l.apply(f,arguments)}}function m(l,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,f){function p(){}p.prototype=f.prototype,l.aa=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(y,S,x){for(var W=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)W[qe-2]=arguments[qe];return f.prototype[S].apply(y,W)}}function D(l){let f=l.length;if(0<f){let p=Array(f);for(let y=0;y<f;y++)p[y]=l[y];return p}return[]}function T(l,f){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let S=l.length||0,x=y.length||0;l.length=S+x;for(let W=0;W<x;W++)l[S+W]=y[W]}else l.push(y)}}class F{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function G(l){return/^[\s\xa0]*$/.test(l)}function B(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function X(l){return X[" "](l),l}X[" "]=function(){};var ce=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function ae(l,f,p){for(let y in l)f.call(p,l[y],y,l)}function I(l,f){for(let p in l)f.call(void 0,l[p],p,l)}function v(l){let f={};for(let p in l)f[p]=l[p];return f}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let p,y;for(let S=1;S<arguments.length;S++){y=arguments[S];for(p in y)l[p]=y[p];for(let x=0;x<w.length;x++)p=w[x],Object.prototype.hasOwnProperty.call(y,p)&&(l[p]=y[p])}}function b(l){var f=1;l=l.split(":");let p=[];for(;0<f&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function R(l){a.setTimeout(()=>{throw l},0)}function E(){var l=be;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Zn{constructor(){this.h=this.g=null}add(f,p){let y=ro.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var ro=new F(()=>new ee,l=>l.reset());class ee{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let re,se=!1,be=new Zn,yt=()=>{let l=a.Promise.resolve(void 0);re=()=>{l.then(Jn)}};var Jn=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){R(p)}var f=ro;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}se=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return l}();function io(l,f){if(Ye.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(ce){e:{try{X(f.nodeName);var S=!0;break e}catch{}S=!1}S||(f=null)}}else p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:a_[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&io.aa.h.call(this)}}_(io,Ye);var a_={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),Ii=0;function Sn(l,f,p,y,S){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=S,this.key=++Ii,this.da=this.fa=!1}function Di(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function oo(l){this.src=l,this.g={},this.h=0}oo.prototype.add=function(l,f,p,y,S){var x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);var W=l_(l,f,y,S);return-1<W?(f=l[W],p||(f.fa=!1)):(f=new Sn(f,this.src,x,!!y,S),f.fa=p,l.push(f)),f};function c_(l,f){var p=f.type;if(p in l.g){var y=l.g[p],S=Array.prototype.indexOf.call(y,f,void 0),x;(x=0<=S)&&Array.prototype.splice.call(y,S,1),x&&(Di(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function l_(l,f,p,y){for(var S=0;S<l.length;++S){var x=l[S];if(!x.da&&x.listener==f&&x.capture==!!p&&x.ha==y)return S}return-1}var u_="closure_lm_"+(1e6*Math.random()|0),d_={};function M0(l,f,p,y,S){if(y&&y.once)return x0(l,f,p,y,S);if(Array.isArray(f)){for(var x=0;x<f.length;x++)M0(l,f[x],p,y,S);return null}return p=m_(p),l&&l[dt]?l.K(f,p,u(y)?!!y.capture:!!y,S):N0(l,f,p,!1,y,S)}function N0(l,f,p,y,S,x){if(!f)throw Error("Invalid event type");var W=u(S)?!!S.capture:!!S,qe=h_(l);if(qe||(l[u_]=qe=new oo(l)),p=qe.add(f,p,y,W,x),p.proxy)return p;if(y=h2(),p.proxy=y,y.src=l,y.listener=p,l.addEventListener)Ze||(S=W),S===void 0&&(S=!1),l.addEventListener(f.toString(),y,S);else if(l.attachEvent)l.attachEvent(k0(f.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function h2(){function l(p){return f.call(l.src,l.listener,p)}let f=p2;return l}function x0(l,f,p,y,S){if(Array.isArray(f)){for(var x=0;x<f.length;x++)x0(l,f[x],p,y,S);return null}return p=m_(p),l&&l[dt]?l.L(f,p,u(y)?!!y.capture:!!y,S):N0(l,f,p,!0,y,S)}function P0(l,f,p,y,S){if(Array.isArray(f))for(var x=0;x<f.length;x++)P0(l,f[x],p,y,S);else y=u(y)?!!y.capture:!!y,p=m_(p),l&&l[dt]?(l=l.i,f=String(f).toString(),f in l.g&&(x=l.g[f],p=l_(x,p,y,S),-1<p&&(Di(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete l.g[f],l.h--)))):l&&(l=h_(l))&&(f=l.g[f.toString()],l=-1,f&&(l=l_(f,p,y,S)),(p=-1<l?f[l]:null)&&f_(p))}function f_(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[dt])c_(f.i,l);else{var p=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(p,y,l.capture):f.detachEvent?f.detachEvent(k0(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=h_(f))?(c_(p,l),p.h==0&&(p.src=null,f[u_]=null)):Di(l)}}}function k0(l){return l in d_?d_[l]:d_[l]="on"+l}function p2(l,f){if(l.da)l=!0;else{f=new io(f,this);var p=l.listener,y=l.ha||l.src;l.fa&&f_(l),l=p.call(y,f)}return l}function h_(l){return l=l[u_],l instanceof oo?l:null}var p_="__closure_events_fn_"+(1e9*Math.random()>>>0);function m_(l){return typeof l=="function"?l:(l[p_]||(l[p_]=function(f){return l.handleEvent(f)}),l[p_])}function Zt(){ut.call(this),this.i=new oo(this),this.M=this,this.F=null}_(Zt,ut),Zt.prototype[dt]=!0,Zt.prototype.removeEventListener=function(l,f,p,y){P0(this,l,f,p,y)};function mn(l,f){var p,y=l.F;if(y)for(p=[];y;y=y.F)p.push(y);if(l=l.M,y=f.type||f,typeof f=="string")f=new Ye(f,l);else if(f instanceof Ye)f.target=f.target||l;else{var S=f;f=new Ye(y,l),C(f,S)}if(S=!0,p)for(var x=p.length-1;0<=x;x--){var W=f.g=p[x];S=sh(W,y,!0,f)&&S}if(W=f.g=l,S=sh(W,y,!0,f)&&S,S=sh(W,y,!1,f)&&S,p)for(x=0;x<p.length;x++)W=f.g=p[x],S=sh(W,y,!1,f)&&S}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var p=l.g[f],y=0;y<p.length;y++)Di(p[y]);delete l.g[f],l.h--}}this.F=null},Zt.prototype.K=function(l,f,p,y){return this.i.add(String(l),f,!1,p,y)},Zt.prototype.L=function(l,f,p,y){return this.i.add(String(l),f,!0,p,y)};function sh(l,f,p,y){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var S=!0,x=0;x<f.length;++x){var W=f[x];if(W&&!W.da&&W.capture==p){var qe=W.listener,qt=W.ha||W.src;W.fa&&c_(l.i,W),S=qe.call(qt,y)!==!1&&S}}return S&&!y.defaultPrevented}function O0(l,f,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function F0(l){l.g=O0(()=>{l.g=null,l.i&&(l.i=!1,F0(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class m2 extends ut{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:F0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eu(l){ut.call(this),this.h=l,this.g={}}_(eu,ut);var L0=[];function V0(l){ae(l.g,function(f,p){this.g.hasOwnProperty(p)&&f_(f)},l),l.g={}}eu.prototype.N=function(){eu.aa.N.call(this),V0(this)},eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var g_=a.JSON.stringify,g2=a.JSON.parse,y2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function y_(){}y_.prototype.h=null;function j0(l){return l.h||(l.h=l.i())}function B0(){}var tu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function v_(){Ye.call(this,"d")}_(v_,Ye);function __(){Ye.call(this,"c")}_(__,Ye);var os={},U0=null;function ah(){return U0=U0||new Zt}os.La="serverreachability";function $0(l){Ye.call(this,os.La,l)}_($0,Ye);function nu(l){let f=ah();mn(f,new $0(f))}os.STAT_EVENT="statevent";function H0(l,f){Ye.call(this,os.STAT_EVENT,l),this.stat=f}_(H0,Ye);function gn(l){let f=ah();mn(f,new H0(f,l))}os.Ma="timingevent";function q0(l,f){Ye.call(this,os.Ma,l),this.size=f}_(q0,Ye);function ru(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function iu(){this.g=!0}iu.prototype.xa=function(){this.g=!1};function v2(l,f,p,y,S,x){l.info(function(){if(l.g)if(x)for(var W="",qe=x.split("&"),qt=0;qt<qe.length;qt++){var ke=qe[qt].split("=");if(1<ke.length){var Jt=ke[0];ke=ke[1];var Xt=Jt.split("_");W=2<=Xt.length&&Xt[1]=="type"?W+(Jt+"="+ke+"&"):W+(Jt+"=redacted&")}}else W=null;else W=x;return"XMLHTTP REQ ("+y+") [attempt "+S+"]: "+f+`
`+p+`
`+W})}function _2(l,f,p,y,S,x,W){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+S+"]: "+f+`
`+p+`
`+x+" "+W})}function ka(l,f,p,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+w2(l,p)+(y?" "+y:"")})}function E2(l,f){l.info(function(){return"TIMEOUT: "+f})}iu.prototype.info=function(){};function w2(l,f){if(!l.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var y=p[l];if(!(2>y.length)){var S=y[1];if(Array.isArray(S)&&!(1>S.length)){var x=S[0];if(x!="noop"&&x!="stop"&&x!="close")for(var W=1;W<S.length;W++)S[W]=""}}}}return g_(p)}catch{return f}}var ch={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},z0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},E_;function lh(){}_(lh,y_),lh.prototype.g=function(){return new XMLHttpRequest},lh.prototype.i=function(){return{}},E_=new lh;function so(l,f,p,y){this.j=l,this.i=f,this.l=p,this.R=y||1,this.U=new eu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G0}function G0(){this.i=null,this.g="",this.h=!1}var W0={},w_={};function I_(l,f,p){l.L=1,l.v=hh(Ci(f)),l.m=p,l.P=!0,K0(l,null)}function K0(l,f){l.F=Date.now(),uh(l),l.A=Ci(l.v);var p=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),cA(p.i,"t",y),l.C=0,p=l.j.J,l.h=new G0,l.g=TA(l.j,p?f:null,!l.m),0<l.O&&(l.M=new m2(m(l.Y,l,l.g),l.O)),f=l.U,p=l.g,y=l.ca;var S="readystatechange";Array.isArray(S)||(S&&(L0[0]=S.toString()),S=L0);for(var x=0;x<S.length;x++){var W=M0(p,S[x],y||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),nu(),v2(l.i,l.u,l.A,l.l,l.R,l.m)}so.prototype.ca=function(l){l=l.target;let f=this.M;f&&bi(l)==3?f.j():this.Y(l)},so.prototype.Y=function(l){try{if(l==this.g)e:{let Xt=bi(this.g);var f=this.g.Ba();let La=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||mA(this.g)))){this.J||Xt!=4||f==7||(f==8||0>=La?nu(3):nu(2)),D_(this);var p=this.g.Z();this.X=p;t:if(Q0(this)){var y=mA(this.g);l="";var S=y.length,x=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),ou(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<S;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(x&&f==S-1)});y.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,_2(this.i,this.u,this.A,this.l,this.R,Xt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,qt=this.g;if((qe=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(qe)){var ke=qe;break t}}ke=null}if(p=ke)ka(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,C_(this,p);else{this.o=!1,this.s=3,gn(12),ss(this),ou(this);break e}}if(this.P){p=!0;let hr;for(;!this.J&&this.C<W.length;)if(hr=I2(this,W),hr==w_){Xt==4&&(this.s=4,gn(14),p=!1),ka(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==W0){this.s=4,gn(15),ka(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else ka(this.i,this.l,hr,null),C_(this,hr);if(Q0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||W.length!=0||this.h.h||(this.s=1,gn(16),p=!1),this.o=this.o&&p,!p)ka(this.i,this.l,W,"[Invalid Chunked Response]"),ss(this),ou(this);else if(0<W.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),M_(Jt),Jt.M=!0,gn(11))}}else ka(this.i,this.l,W,null),C_(this,W);Xt==4&&ss(this),this.o&&!this.J&&(Xt==4?IA(this.j,this):(this.o=!1,uh(this)))}else j2(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),ss(this),ou(this)}}}catch{}finally{}};function Q0(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function I2(l,f){var p=l.C,y=f.indexOf(`
`,p);return y==-1?w_:(p=Number(f.substring(p,y)),isNaN(p)?W0:(y+=1,y+p>f.length?w_:(f=f.slice(y,y+p),l.C=y+p,f)))}so.prototype.cancel=function(){this.J=!0,ss(this)};function uh(l){l.S=Date.now()+l.I,Y0(l,l.I)}function Y0(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ru(m(l.ba,l),f)}function D_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}so.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(E2(this.i,this.A),this.L!=2&&(nu(),gn(17)),ss(this),this.s=2,ou(this)):Y0(this,this.S-l)};function ou(l){l.j.G==0||l.J||IA(l.j,l)}function ss(l){D_(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,V0(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function C_(l,f){try{var p=l.j;if(p.G!=0&&(p.g==l||b_(p.h,l))){if(!l.K&&b_(p.h,l)&&p.G==3){try{var y=p.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var S=y;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)vh(p),gh(p);else break e;R_(p),gn(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=ru(m(p.Za,p),6e3));if(1>=X0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else cs(p,11)}else if((l.K||p.g==l)&&vh(p),!G(f))for(S=p.Da.g.parse(f),f=0;f<S.length;f++){let ke=S[f];if(p.T=ke[0],ke=ke[1],p.G==2)if(ke[0]=="c"){p.K=ke[1],p.ia=ke[2];let Jt=ke[3];Jt!=null&&(p.la=Jt,p.j.info("VER="+p.la));let Xt=ke[4];Xt!=null&&(p.Aa=Xt,p.j.info("SVER="+p.Aa));let La=ke[5];La!=null&&typeof La=="number"&&0<La&&(y=1.5*La,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let hr=l.g;if(hr){let Eh=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eh){var x=y.h;x.g||Eh.indexOf("spdy")==-1&&Eh.indexOf("quic")==-1&&Eh.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(T_(x,x.h),x.h=null))}if(y.D){let N_=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;N_&&(y.ya=N_,Je(y.I,y.D,N_))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var W=l;if(y.qa=bA(y,y.J?y.ia:null,y.W),W.K){eA(y.h,W);var qe=W,qt=y.L;qt&&(qe.I=qt),qe.B&&(D_(qe),uh(qe)),y.g=W}else EA(y);0<p.i.length&&yh(p)}else ke[0]!="stop"&&ke[0]!="close"||cs(p,7);else p.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?cs(p,7):A_(p):ke[0]!="noop"&&p.l&&p.l.ta(ke),p.v=0)}}nu(4)}catch{}}var D2=class{constructor(l,f){this.g=l,this.map=f}};function Z0(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function J0(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function X0(l){return l.h?1:l.g?l.g.size:0}function b_(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function T_(l,f){l.g?l.g.add(f):l.h=f}function eA(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Z0.prototype.cancel=function(){if(this.i=tA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function tA(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let p of l.g.values())f=f.concat(p.D);return f}return D(l.i)}function C2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],p=l.length,y=0;y<p;y++)f.push(l[y]);return f}f=[],p=0;for(y in l)f[p++]=l[y];return f}function b2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var p=0;p<l;p++)f.push(p);return f}f=[],p=0;for(let y in l)f[p++]=y;return f}}}function nA(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var p=b2(l),y=C2(l),S=y.length,x=0;x<S;x++)f.call(void 0,y[x],p&&p[x],l)}var rA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T2(l,f){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var y=l[p].indexOf("="),S=null;if(0<=y){var x=l[p].substring(0,y);S=l[p].substring(y+1)}else x=l[p];f(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function as(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof as){this.h=l.h,dh(this,l.j),this.o=l.o,this.g=l.g,fh(this,l.s),this.l=l.l;var f=l.i,p=new cu;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),iA(this,p),this.m=l.m}else l&&(f=String(l).match(rA))?(this.h=!1,dh(this,f[1]||"",!0),this.o=su(f[2]||""),this.g=su(f[3]||"",!0),fh(this,f[4]),this.l=su(f[5]||"",!0),iA(this,f[6]||"",!0),this.m=su(f[7]||"")):(this.h=!1,this.i=new cu(null,this.h))}as.prototype.toString=function(){var l=[],f=this.j;f&&l.push(au(f,oA,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(au(f,oA,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(au(p,p.charAt(0)=="/"?R2:A2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",au(p,N2)),l.join("")};function Ci(l){return new as(l)}function dh(l,f,p){l.j=p?su(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function fh(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function iA(l,f,p){f instanceof cu?(l.i=f,x2(l.i,l.h)):(p||(f=au(f,M2)),l.i=new cu(f,l.h))}function Je(l,f,p){l.i.set(f,p)}function hh(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function su(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function au(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,S2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function S2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var oA=/[#\/\?@]/g,A2=/[#\?:]/g,R2=/[#\?]/g,M2=/[#\?@]/g,N2=/#/g;function cu(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ao(l){l.g||(l.g=new Map,l.h=0,l.i&&T2(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=cu.prototype,n.add=function(l,f){ao(this),this.i=null,l=Oa(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function sA(l,f){ao(l),f=Oa(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function aA(l,f){return ao(l),f=Oa(l,f),l.g.has(f)}n.forEach=function(l,f){ao(this),this.g.forEach(function(p,y){p.forEach(function(S){l.call(f,S,y,this)},this)},this)},n.na=function(){ao(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let y=0;y<f.length;y++){let S=l[y];for(let x=0;x<S.length;x++)p.push(f[y])}return p},n.V=function(l){ao(this);let f=[];if(typeof l=="string")aA(this,l)&&(f=f.concat(this.g.get(Oa(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)f=f.concat(l[p])}return f},n.set=function(l,f){return ao(this),this.i=null,l=Oa(this,l),aA(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function cA(l,f,p){sA(l,f),0<p.length&&(l.i=null,l.g.set(Oa(l,f),D(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var y=f[p];let x=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var S=x;W[y]!==""&&(S+="="+encodeURIComponent(String(W[y]))),l.push(S)}}return this.i=l.join("&")};function Oa(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function x2(l,f){f&&!l.j&&(ao(l),l.i=null,l.g.forEach(function(p,y){var S=y.toLowerCase();y!=S&&(sA(this,y),cA(this,S,p))},l)),l.j=f}function P2(l,f){let p=new iu;if(a.Image){let y=new Image;y.onload=g(co,p,"TestLoadImage: loaded",!0,f,y),y.onerror=g(co,p,"TestLoadImage: error",!1,f,y),y.onabort=g(co,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(co,p,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}function k2(l,f){let p=new iu,y=new AbortController,S=setTimeout(()=>{y.abort(),co(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:y.signal}).then(x=>{clearTimeout(S),x.ok?co(p,"TestPingServer: ok",!0,f):co(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(S),co(p,"TestPingServer: error",!1,f)})}function co(l,f,p,y,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),y(p)}catch{}}function O2(){this.g=new y2}function F2(l,f,p){let y=p||"";try{nA(l,function(S,x){let W=S;u(S)&&(W=g_(S)),f.push(y+x+"="+encodeURIComponent(W))})}catch(S){throw f.push(y+"type="+encodeURIComponent("_badmap")),S}}function lu(l){this.l=l.Ub||null,this.j=l.eb||!1}_(lu,y_),lu.prototype.g=function(){return new ph(this.l,this.j)},lu.prototype.i=function(l){return function(){return l}}({});function ph(l,f){Zt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ph,Zt),n=ph.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,du(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uu(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,du(this)),this.g&&(this.readyState=3,du(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lA(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function lA(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?uu(this):du(this),this.readyState==3&&lA(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,uu(this))},n.Qa=function(l){this.g&&(this.response=l,uu(this))},n.ga=function(){this.g&&uu(this)};function uu(l){l.readyState=4,l.l=null,l.j=null,l.v=null,du(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function du(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ph.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function uA(l){let f="";return ae(l,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function S_(l,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=uA(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Je(l,f,p))}function ft(l){Zt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ft,Zt);var L2=/^https?$/i,V2=["POST","PUT"];n=ft.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():E_.g(),this.v=this.o?j0(this.o):j0(E_),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(x){dA(this,x);return}if(l=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var S in y)p.set(S,y[S]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let x of y.keys())p.set(x,y.get(x));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),S=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(V2,f,void 0))||y||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,W]of p)this.g.setRequestHeader(x,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pA(this),this.u=!0,this.g.send(l),this.u=!1}catch(x){dA(this,x)}};function dA(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,fA(l),mh(l)}function fA(l){l.A||(l.A=!0,mn(l,"complete"),mn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mn(this,"complete"),mn(this,"abort"),mh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mh(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?hA(this):this.bb())},n.bb=function(){hA(this)};function hA(l){if(l.h&&typeof s<"u"&&(!l.v[1]||bi(l)!=4||l.Z()!=2)){if(l.u&&bi(l)==4)O0(l.Ea,0,l);else if(mn(l,"readystatechange"),bi(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=W===0){var S=String(l.D).match(rA)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),y=!L2.test(S?S.toLowerCase():"")}p=y}if(p)mn(l,"complete"),mn(l,"success");else{l.m=6;try{var x=2<bi(l)?l.g.statusText:""}catch{x=""}l.l=x+" ["+l.Z()+"]",fA(l)}}finally{mh(l)}}}}function mh(l,f){if(l.g){pA(l);let p=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||mn(l,"ready");try{p.onreadystatechange=y}catch{}}}function pA(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function bi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),g2(f)}};function mA(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function j2(l){let f={};l=(l.g&&2<=bi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(G(l[y]))continue;var p=b(l[y]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=f[S]||[];f[S]=x,x.push(p)}I(f,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fu(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function gA(l){this.Aa=0,this.i=[],this.j=new iu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fu("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fu("baseRetryDelayMs",5e3,l),this.cb=fu("retryDelaySeedMs",1e4,l),this.Wa=fu("forwardChannelMaxRetries",2,l),this.wa=fu("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Z0(l&&l.concurrentRequestLimit),this.Da=new O2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gA.prototype,n.la=8,n.G=1,n.connect=function(l,f,p,y){gn(0),this.W=l,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=bA(this,null,this.W),yh(this)};function A_(l){if(yA(l),l.G==3){var f=l.U++,p=Ci(l.I);if(Je(p,"SID",l.K),Je(p,"RID",f),Je(p,"TYPE","terminate"),hu(l,p),f=new so(l,l.j,f),f.L=2,f.v=hh(Ci(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=TA(f.j,null),f.g.ea(f.v)),f.F=Date.now(),uh(f)}CA(l)}function gh(l){l.g&&(M_(l),l.g.cancel(),l.g=null)}function yA(l){gh(l),l.u&&(a.clearTimeout(l.u),l.u=null),vh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function yh(l){if(!J0(l.h)&&!l.s){l.s=!0;var f=l.Ga;re||yt(),se||(re(),se=!0),be.add(f,l),l.B=0}}function B2(l,f){return X0(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ru(m(l.Ga,l,f),DA(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let S=new so(this,this.j,l),x=this.o;if(this.S&&(x?(x=v(x),C(x,this.S)):x=this.S),this.m!==null||this.O||(S.H=x,x=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=_A(this,S,f),p=Ci(this.I),Je(p,"RID",l),Je(p,"CVER",22),this.D&&Je(p,"X-HTTP-Session-Id",this.D),hu(this,p),x&&(this.O?f="headers="+encodeURIComponent(String(uA(x)))+"&"+f:this.m&&S_(p,this.m,x)),T_(this.h,S),this.Ua&&Je(p,"TYPE","init"),this.P?(Je(p,"$req",f),Je(p,"SID","null"),S.T=!0,I_(S,p,null)):I_(S,p,f),this.G=2}}else this.G==3&&(l?vA(this,l):this.i.length==0||J0(this.h)||vA(this))};function vA(l,f){var p;f?p=f.l:p=l.U++;let y=Ci(l.I);Je(y,"SID",l.K),Je(y,"RID",p),Je(y,"AID",l.T),hu(l,y),l.m&&l.o&&S_(y,l.m,l.o),p=new so(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),f&&(l.i=f.D.concat(l.i)),f=_A(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),T_(l.h,p),I_(p,y,f)}function hu(l,f){l.H&&ae(l.H,function(p,y){Je(f,y,p)}),l.l&&nA({},function(p,y){Je(f,y,p)})}function _A(l,f,p){p=Math.min(l.i.length,p);var y=l.l?m(l.l.Na,l.l,l):null;e:{var S=l.i;let x=-1;for(;;){let W=["count="+p];x==-1?0<p?(x=S[0].g,W.push("ofs="+x)):x=0:W.push("ofs="+x);let qe=!0;for(let qt=0;qt<p;qt++){let ke=S[qt].g,Jt=S[qt].map;if(ke-=x,0>ke)x=Math.max(0,S[qt].g-100),qe=!1;else try{F2(Jt,W,"req"+ke+"_")}catch{y&&y(Jt)}}if(qe){y=W.join("&");break e}}}return l=l.i.splice(0,p),f.D=l,y}function EA(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;re||yt(),se||(re(),se=!0),be.add(f,l),l.v=0}}function R_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ru(m(l.Fa,l),DA(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,wA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ru(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gn(10),gh(this),wA(this))};function M_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function wA(l){l.g=new so(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ci(l.qa);Je(f,"RID","rpc"),Je(f,"SID",l.K),Je(f,"AID",l.T),Je(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(f,"TO",l.ja),Je(f,"TYPE","xmlhttp"),hu(l,f),l.m&&l.o&&S_(f,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=hh(Ci(f)),p.m=null,p.P=!0,K0(p,l)}n.Za=function(){this.C!=null&&(this.C=null,gh(this),R_(this),gn(19))};function vh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function IA(l,f){var p=null;if(l.g==f){vh(l),M_(l),l.g=null;var y=2}else if(b_(l.h,f))p=f.D,eA(l.h,f),y=1;else return;if(l.G!=0){if(f.o)if(y==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var S=l.B;y=ah(),mn(y,new q0(y,p)),yh(l)}else EA(l);else if(S=f.s,S==3||S==0&&0<f.X||!(y==1&&B2(l,f)||y==2&&R_(l)))switch(p&&0<p.length&&(f=l.h,f.i=f.i.concat(p)),S){case 1:cs(l,5);break;case 4:cs(l,10);break;case 3:cs(l,6);break;default:cs(l,2)}}}function DA(l,f){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*f}function cs(l,f){if(l.j.info("Error code "+f),f==2){var p=m(l.fb,l),y=l.Xa;let S=!y;y=new as(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dh(y,"https"),hh(y),S?P2(y.toString(),p):k2(y.toString(),p)}else gn(2);l.G=0,l.l&&l.l.sa(f),CA(l),yA(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function CA(l){if(l.G=0,l.ka=[],l.l){let f=tA(l.h);(f.length!=0||l.i.length!=0)&&(T(l.ka,f),T(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function bA(l,f,p){var y=p instanceof as?Ci(p):new as(p);if(y.g!="")f&&(y.g=f+"."+y.g),fh(y,y.s);else{var S=a.location;y=S.protocol,f=f?f+"."+S.hostname:S.hostname,S=+S.port;var x=new as(null);y&&dh(x,y),f&&(x.g=f),S&&fh(x,S),p&&(x.l=p),y=x}return p=l.D,f=l.ya,p&&f&&Je(y,p,f),Je(y,"VER",l.la),hu(l,y),y}function TA(l,f,p){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ft(new lu({eb:p})):new ft(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function SA(){}n=SA.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _h(){}_h.prototype.g=function(l,f){return new Vn(l,f)};function Vn(l,f){Zt.call(this),this.g=new gA(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!G(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!G(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Fa(this)}_(Vn,Zt),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){A_(this.g)},Vn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=g_(l),l=p);f.i.push(new D2(f.Ya++,l)),f.G==3&&yh(f)},Vn.prototype.N=function(){this.g.l=null,delete this.j,A_(this.g),delete this.g,Vn.aa.N.call(this)};function AA(l){v_.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(AA,v_);function RA(){__.call(this),this.status=1}_(RA,__);function Fa(l){this.g=l}_(Fa,SA),Fa.prototype.ua=function(){mn(this.g,"a")},Fa.prototype.ta=function(l){mn(this.g,new AA(l))},Fa.prototype.sa=function(l){mn(this.g,new RA)},Fa.prototype.ra=function(){mn(this.g,"b")},_h.prototype.createWebChannel=_h.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,OC=Wi.createWebChannelTransport=function(){return new _h},kC=Wi.getStatEventTarget=function(){return ah()},PC=Wi.Event=os,ry=Wi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ch.NO_ERROR=0,ch.TIMEOUT=8,ch.HTTP_ERROR=6,cf=Wi.ErrorCode=ch,z0.COMPLETE="complete",xC=Wi.EventType=z0,B0.EventType=tu,tu.OPEN="a",tu.CLOSE="b",tu.ERROR="c",tu.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Kc=Wi.WebChannel=B0,R9=Wi.FetchXmlHttpFactory=lu,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,NC=Wi.XhrIo=ft}).apply(typeof ny<"u"?ny:typeof self<"u"?self:typeof window<"u"?window:{});var wO="@firebase/firestore",IO="4.8.0";var xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");var Pl="11.10.0";var Ho=new Ch("@firebase/firestore");function tl(){return Ho.logLevel}function KT(n){Ho.setLogLevel(n)}function j(n,...e){if(Ho.logLevel<=qr.DEBUG){let t=e.map(QT);Ho.debug(`Firestore (${Pl}): ${n}`,...t)}}function Dt(n,...e){if(Ho.logLevel<=qr.ERROR){let t=e.map(QT);Ho.error(`Firestore (${Pl}): ${n}`,...t)}}function Ln(n,...e){if(Ho.logLevel<=qr.WARN){let t=e.map(QT);Ho.warn(`Firestore (${Pl}): ${n}`,...t)}}function QT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LF(n,r,t)}function LF(n,e,t){let r=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Dt(r),new Error(r)}function te(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||LF(e,i,r)}function VF(n,e){n||Z(57014,e)}function Y(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends jA{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yy=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},HC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}},qC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zC=class{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){te(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new jt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>A(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new jt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new yy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new xt(e)}},GC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},WC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},KC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,UA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){te(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function M9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function YT(){return new TextEncoder}var Df=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=M9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function QC(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ue(r,i);{let o=YT(),s=N9(o.encode(DO(n,t)),o.encode(DO(e,t)));return s!==0?s:ue(r,i)}}t+=r>65535?2:1}return ue(n.length,e.length)}function DO(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function N9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ue(n[t],e[t]);return ue(n.length,e.length)}function ul(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jF(n){return n+"\0"}var CO="__name__",_y=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):QC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}},Re=class n extends _y{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},x9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ct=class n extends _y{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return x9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CO}static keyField(){return new n([CO])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};function ZT(n,e,t){if(!t)throw new L(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JT(n,e,t,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bO(n){if(!Q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TO(n){if(Q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _v(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z(12329,{type:typeof n})}function Pe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_v(n);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function UF(n,e){if(e<=0)throw new L(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Pt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Kf(n,e){if(!BF(n))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(N.INVALID_ARGUMENT,t);return!0}var SO=-62135596800,AO=1e6,Be=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SO)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AO}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-SO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Pt("string",Be._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};var oe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Be(0,0))}static max(){return new n(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dl=-1,fl=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function YC(n){return n.fields.find(e=>e.kind===2)}function aa(n){return n.fields.filter(e=>e.kind!==2)}fl.UNKNOWN_ID=-1;var al=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Cf=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,fr.min())}};function $F(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new fr(i,Q.empty(),e)}function HF(n){return new fr(n.readTime,n.key,dl)}var fr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(oe.min(),Q.empty(),dl)}static max(){return new n(oe.max(),Q.empty(),dl)}};function XT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var qF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ey=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function es(n){return A(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==qF)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Wn="SimpleDb",wy=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ma(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new jt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ma(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=eS(r.target.error);this.S.reject(new ma(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(j(Wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new JC(t)}},qo=class n{static delete(e){return j(Wn,"Removing database:",e),la(P_().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ih())return!1;if(n.F())return!0;let e=pu(),t=n.M(e),r=0<t&&t<10,i=zF(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(pu())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return A(this,null,function*(){return this.db||(j(Wn,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ma(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new L(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new L(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ma(e,s))},i.onupgradeneeded=o=>{j(Wn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{j(Wn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(Ln('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return A(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=wy.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.v(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(j(Wn,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function zF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ZC=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return la(this.$.delete())}},ma=class extends L{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ts(n){return n.name==="IndexedDbTransactionError"}var JC=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(j(Wn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(j(Wn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),la(r)}add(e){return j(Wn,"ADD",this.store.name,e,e),la(this.store.add(e))}get(e){return la(this.store.get(e)).next(t=>(t===void 0&&(t=null),j(Wn,"GET",this.store.name,e,t),t))}delete(e){return j(Wn,"DELETE",this.store.name,e),la(this.store.delete(e))}count(){return j(Wn,"COUNT",this.store.name),la(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){j(Wn,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=eS(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new ZC(a),u=t(a.primaryKey,a.value,c);if(u instanceof M){let d=u.catch(h=>(c.done(),M.reject(h)));r.push(d)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function la(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=eS(r.target.error);t(i)}})}var RO=!1;function eS(n){let e=qo.M(pu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new L("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RO||(RO=!0,setTimeout(()=>{throw r},0)),r}}return n}var mf="IndexBackfiller",XC=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){j(mf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>A(this,null,function*(){this.task=null;try{let t=yield this.te.re();j(mf,`Documents written: ${t}`)}catch(t){ts(t)?j(mf,"Ignoring IndexedDB error during index backfill: ",t):yield es(t)}yield this.ne(6e4)}))}},eb=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return A(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return j(mf,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(j(mf,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=HF(o);XT(s,r)>0&&(r=s)}),new fr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Kn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Bo=-1;function Qf(n){return n==null}function bf(n){return n===0&&1/n==-1/0}function GF(n){return typeof n=="number"&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Iy="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MO(e)),e=P9(n.get(t),e);return MO(e)}function P9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Iy:t+="";break;default:t+=o}}return t}function MO(n){return n+Iy+""}function fi(n){let e=n.length;if(te(e>=2,64408,{path:n}),e===2)return te(n.charAt(0)===Iy&&n.charAt(1)==="",56145,{path:n}),Re.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Iy,o);switch((s<0||s>t)&&Z(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Z(61167,{path:n})}o=s+2}return new Re(r)}var ca="remoteDocuments",Yf="owner",Qc="owner",Tf="mutationQueues",k9="userId",Or="mutations",NO="batchId",ha="userMutationsIndex",xO=["userId","batchId"];function ly(n,e){return[n,pn(e)]}function WF(n,e,t){return[n,pn(e),t]}var O9={},hl="documentMutations",Dy="remoteDocumentsV14",F9=["prefixPath","collectionGroup","readTime","documentId"],uy="documentKeyIndex",L9=["prefixPath","collectionGroup","documentId"],KF="collectionGroupIndex",V9=["collectionGroup","readTime","prefixPath","documentId"],Sf="remoteDocumentGlobal",tb="remoteDocumentGlobalKey",pl="targets",QF="queryTargetsIndex",j9=["canonicalId","targetId"],ml="targetDocuments",B9=["targetId","path"],tS="documentTargetsIndex",U9=["path","targetId"],Cy="targetGlobalKey",ga="targetGlobal",Af="collectionParents",$9=["collectionId","parent"],gl="clientMetadata",H9="clientId",Ev="bundles",q9="bundleId",wv="namedQueries",z9="name",nS="indexConfiguration",G9="indexId",nb="collectionGroupIndex",W9="collectionGroup",gf="indexState",K9=["indexId","uid"],YF="sequenceNumberIndex",Q9=["uid","sequenceNumber"],yf="indexEntries",Y9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZF="documentKeyIndex",Z9=["indexId","uid","orderedDocumentKey"],Iv="documentOverlays",J9=["userId","collectionPath","documentId"],rb="collectionPathOverlayIndex",X9=["userId","collectionPath","largestBatchId"],JF="collectionGroupOverlayIndex",e5=["userId","collectionGroup","largestBatchId"],rS="globals",t5="name",XF=[Tf,Or,hl,ca,pl,Yf,ga,ml,gl,Sf,Af,Ev,wv],n5=[...XF,Iv],eL=[Tf,Or,hl,Dy,pl,Yf,ga,ml,gl,Sf,Af,Ev,wv,Iv],tL=eL,iS=[...tL,nS,gf,yf],r5=iS,nL=[...iS,rS],i5=nL;var Rf=class extends Ey{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Bt(n,e){let t=Y(n);return qo.N(t.ce,e)}function PO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ns(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var nt=class n{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sl(this.root,e,this.comparator,!0)}},sl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}};pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var He=class n{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new by(this.data.getIterator())}getIteratorFrom(e){return new by(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},by=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Yc(n){return n.hasNext()?n.getNext():void 0}var Qn=class n{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new n([])}unionWith(e){let t=new He(Ct.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ty=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function iL(){return typeof atob<"u"}var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ty("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var o5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(n){if(te(!!n,39018),typeof n=="string"){let e=0,t=o5.exec(n);if(te(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zi(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}var oL="server_timestamp",sL="__type__",aL="__previous_value__",cL="__local_write_time__";function Dv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sL])===null||t===void 0?void 0:t.stringValue)===oL}function Cv(n){let e=n.mapValue.fields[aL];return Dv(e)?Cv(e):e}function Mf(n){let e=Yi(n.mapValue.fields[cL].timestampValue);return new Be(e.seconds,e.nanos)}var ib=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Sy="(default)",zo=class n{constructor(e,t){this.projectId=e,this.database=t||Sy}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Sy}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oS="__type__",lL="__max__",Vo={mapValue:{fields:{__type__:{stringValue:lL}}}},sS="__vector__",yl="value",dy={nullValue:"NULL_VALUE"};function Go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dv(n)?4:uL(n)?9007199254740991:bv(n)?10:11:Z(28295,{value:n})}function vi(n,e){if(n===e)return!0;let t=Go(n);if(t!==Go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mf(n).isEqual(Mf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yi(i.timestampValue),a=Yi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Zi(i.bytesValue).isEqual(Zi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ot(i.doubleValue),a=ot(o.doubleValue);return s===a?bf(s)===bf(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ul(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(PO(s)!==PO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vi(s[c],a[c])))return!1;return!0}(n,e);default:return Z(52216,{left:n})}}function Nf(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function Wo(n,e){if(n===e)return 0;let t=Go(n),r=Go(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ot(o.integerValue||o.doubleValue),c=ot(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return kO(n.timestampValue,e.timestampValue);case 4:return kO(Mf(n),Mf(e));case 5:return QC(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Zi(o),c=Zi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=ue(a[u],c[u]);if(d!==0)return d}return ue(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue(ot(o.latitude),ot(s.latitude));return a!==0?a:ue(ot(o.longitude),ot(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return OO(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let h=o.fields||{},m=s.fields||{},g=(a=h[yl])===null||a===void 0?void 0:a.arrayValue,_=(c=m[yl])===null||c===void 0?void 0:c.arrayValue,D=ue(((u=g?.values)===null||u===void 0?void 0:u.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:OO(g,_)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vo.mapValue&&s===Vo.mapValue)return 0;if(o===Vo.mapValue)return 1;if(s===Vo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let m=QC(c[h],d[h]);if(m!==0)return m;let g=Wo(a[c[h]],u[d[h]]);if(g!==0)return g}return ue(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Z(23264,{le:t})}}function kO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=Yi(n),r=Yi(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function OO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Wo(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function vl(n){return ob(n)}function ob(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Yi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Zi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ob(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ob(t.fields[s])}`;return i+"}"}(n.mapValue):Z(61005,{value:n})}function fy(n){switch(Go(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Cv(n);return e?16+fy(e):16;case 5:return 2*n.stringValue.length;case 6:return Zi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+fy(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ns(r.fields,(o,s)=>{i+=o.length+fy(s)}),i}(n.mapValue);default:throw Z(13486,{value:n})}}function ya(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sb(n){return!!n&&"integerValue"in n}function xf(n){return!!n&&"arrayValue"in n}function FO(n){return!!n&&"nullValue"in n}function LO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hy(n){return!!n&&"mapValue"in n}function bv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oS])===null||t===void 0?void 0:t.stringValue)===sS}function vf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ns(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lL}var dL={mapValue:{fields:{[oS]:{stringValue:sS},[yl]:{arrayValue:{}}}}};function s5(n){return"nullValue"in n?dy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ya(zo.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?bv(n)?dL:{mapValue:{}}:Z(35942,{value:n})}function a5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ya(zo.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?dL:"mapValue"in n?bv(n)?{mapValue:{}}:Vo:Z(61959,{value:n})}function VO(n,e){let t=Wo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jO(n,e){let t=Wo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vf(t)}setAll(e){let t=Ct.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=vf(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ns(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(vf(this.value))}};function fL(n){let e=[];return ns(n.fields,(t,r)=>{let i=new Ct([t]);if(hy(r)){let o=fL(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qn(e)}var kt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _i=class{constructor(e,t){this.position=e,this.inclusive=t}};function BO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Wo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function UO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}var va=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function c5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ay=class{},Te=class n extends Ay{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lb(e,t,r):t==="array-contains"?new fb(e,r):t==="in"?new Ry(e,r):t==="not-in"?new hb(e,r):t==="array-contains-any"?new pb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ub(e,r):new db(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&Go(this.value)===Go(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},je=class n extends Ay{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return _l(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function _l(n){return n.op==="and"}function ab(n){return n.op==="or"}function aS(n){return hL(n)&&_l(n)}function hL(n){for(let e of n.filters)if(e instanceof je)return!1;return!0}function cb(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+vl(n.value);if(aS(n))return n.filters.map(e=>cb(e)).join(",");{let e=n.filters.map(t=>cb(t)).join(",");return`${n.op}(${e})`}}function pL(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(n,e):n instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&pL(s,i.filters[a]),!0):!1}(n,e):void Z(19439)}function mL(n,e){let t=n.filters.concat(e);return je.create(t,n.op)}function gL(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${vl(t.value)}`}(n):n instanceof je?function(t){return t.op.toString()+" {"+t.getFilters().map(gL).join(" ,")+"}"}(n):"Filter"}var lb=class extends Te{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},ub=class extends Te{constructor(e,t){super(e,"in",t),this.keys=yL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},db=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=yL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var fb=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xf(t)&&Nf(t.arrayValue,this.value)}},Ry=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Nf(this.value.arrayValue,t)}},hb=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nf(this.value.arrayValue,t)}},pb=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nf(this.value.arrayValue,r))}};var mb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function gb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new mb(n,e,t,r,i,o,s)}function _a(n){let e=Y(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),e.Pe=t}return e.Pe}function Zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UO(n.startAt,e.startAt)&&UO(n.endAt,e.endAt)}function My(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ny(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function $O(n,e,t){let r=dy,i=!0;for(let o of Ny(n,e)){let s=dy,a=!0;switch(o.op){case"<":case"<=":s=s5(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=dy}VO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];VO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function HO(n,e,t){let r=Vo,i=!0;for(let o of Ny(n,e)){let s=Vo,a=!0;switch(o.op){case">=":case">":s=a5(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Vo}jO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];jO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Fr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function vL(n,e,t,r,i,o,s,a){return new Fr(n,e,t,r,i,o,s,a)}function kl(n){return new Fr(n)}function qO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cS(n){return n.collectionGroup!==null}function cl(n){let e=Y(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new He(Ct.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new va(o,r))}),t.has(Ct.keyField().canonicalString())||e.Te.push(new va(Ct.keyField(),r))}return e.Te}function Cn(n){let e=Y(n);return e.Ie||(e.Ie=l5(e,cl(n))),e.Ie}function l5(n,e){if(n.limitType==="F")return gb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new va(i.field,o)});let t=n.endAt?new _i(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _i(n.startAt.position,n.startAt.inclusive):null;return gb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yb(n,e){let t=n.filters.concat([e]);return new Fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xy(n,e,t){return new Fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jf(n,e){return Zf(Cn(n),Cn(e))&&n.limitType===e.limitType}function _L(n){return`${_a(Cn(n))}|lt:${n.limitType}`}function nl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>gL(i)).join(", ")}]`),Qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vl(i)).join(",")),`Target(${r})`}(Cn(n))}; limitType=${n.limitType})`}function Xf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=BO(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,cl(r),i)||r.endAt&&!function(s,a,c){let u=BO(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,cl(r),i))}(n,e)}function EL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wL(n){return(e,t)=>{let r=!1;for(let i of cl(n)){let o=u5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function u5(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Wo(c,u):Z(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:n.dir})}}var Lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ns(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return rL(this.inner)}size(){return this.innerSize}};var d5=new nt(Q.comparator);function On(){return d5}var IL=new nt(Q.comparator);function hf(...n){let e=IL;for(let t of n)e=e.insert(t.key,t);return e}function DL(n){let e=IL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hi(){return _f()}function CL(){return _f()}function _f(){return new Lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var f5=new nt(Q.comparator),h5=new He(Q.comparator);function _e(...n){let e=h5;for(let t of n)e=e.add(t);return e}var p5=new He(ue);function lS(){return p5}function uS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function bL(n){return{integerValue:""+n}}function TL(n,e){return GF(e)?bL(e):uS(n,e)}var El=class{constructor(){this._=void 0}};function m5(n,e,t){return n instanceof Ko?function(i,o){let s={fields:{[sL]:{stringValue:oL},[cL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dv(o)&&(o=Cv(o)),o&&(s.fields[aL]=o),{mapValue:s}}(t,e):n instanceof Ji?AL(n,e):n instanceof Xi?RL(n,e):function(i,o){let s=SL(i,o),a=zO(s)+zO(i.Ee);return sb(s)&&sb(i.Ee)?bL(a):uS(i.serializer,a)}(n,e)}function g5(n,e,t){return n instanceof Ji?AL(n,e):n instanceof Xi?RL(n,e):t}function SL(n,e){return n instanceof Qo?function(r){return sb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ko=class extends El{},Ji=class extends El{constructor(e){super(),this.elements=e}};function AL(n,e){let t=ML(e);for(let r of n.elements)t.some(i=>vi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xi=class extends El{constructor(e){super(),this.elements=e}};function RL(n,e){let t=ML(e);for(let r of n.elements)t=t.filter(i=>!vi(i,r));return{arrayValue:{values:t}}}var Qo=class extends El{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function zO(n){return ot(n.integerValue||n.doubleValue)}function ML(n){return xf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ea=class{constructor(e,t){this.field=e,this.transform=t}};function y5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ji&&i instanceof Ji||r instanceof Xi&&i instanceof Xi?ul(r.elements,i.elements,vi):r instanceof Qo&&i instanceof Qo?vi(r.Ee,i.Ee):r instanceof Ko&&i instanceof Ko}(n.transform,e.transform)}var vb=class{constructor(e,t){this.version=e,this.transformResults=t}},mt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function py(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wl=class{};function NL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zo(n.key,mt.none()):new Yo(n.key,n.data,mt.none());{let t=n.data,r=hn.empty(),i=new He(Ct.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Vr(n.key,r,new Qn(i.toArray()),mt.none())}}function v5(n,e,t){n instanceof Yo?function(i,o,s){let a=i.value.clone(),c=WO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Vr?function(i,o,s){if(!py(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=WO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(xL(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ef(n,e,t,r){return n instanceof Yo?function(o,s,a,c){if(!py(o.precondition,s))return a;let u=o.value.clone(),d=KO(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vr?function(o,s,a,c){if(!py(o.precondition,s))return a;let u=KO(o.fieldTransforms,c,s),d=s.data;return d.setAll(xL(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(o,s,a){return py(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function _5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=SL(r.transform,i||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function GO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ul(r,i,(o,s)=>y5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yo=class extends wl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vr=class extends wl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function WO(n,e,t){let r=new Map;te(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,g5(s,a,t[i]))}return r}function KO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,m5(o,s,e))}return r}var Zo=class extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pf=class extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var kf=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&v5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ef(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ef(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=CL();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=NL(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,r)=>GO(t,r))&&ul(this.baseMutations,e.baseMutations,(t,r)=>GO(t,r))}},_b=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){te(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return f5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Of=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Eb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Mt,Me;function PL(n){switch(n){case N.OK:return Z(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return Z(15467,{code:n})}}function kL(n){if(n===void 0)return Dt("GRPC error has no .code"),N.UNKNOWN;switch(n){case Mt.OK:return N.OK;case Mt.CANCELLED:return N.CANCELLED;case Mt.UNKNOWN:return N.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return N.INTERNAL;case Mt.UNAVAILABLE:return N.UNAVAILABLE;case Mt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Mt.NOT_FOUND:return N.NOT_FOUND;case Mt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Mt.ABORTED:return N.ABORTED;case Mt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Mt.DATA_LOSS:return N.DATA_LOSS;default:return Z(39323,{code:n})}}(Me=Mt||(Mt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var QO=null;var E5=new Gi([4294967295,4294967295],0);function YO(n){let e=YT().encode(n),t=new MC;return t.update(e),new Uint8Array(t.digest())}function ZO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gi([t,r],0),new Gi([i,o],0)]}var wb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pa(`Invalid padding: ${t}`);if(r<0)throw new pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Gi.fromNumber(r)));return i.compare(E5)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=YO(e),[r,i]=ZO(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=YO(e),[r,i]=ZO(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ff=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Lf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(oe.min(),i,new nt(ue),On(),_e())}},Lf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var ll=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Py=class{constructor(e,t){this.targetId=e,this.De=t}},ky=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Oy=class{constructor(){this.ve=0,this.Ce=JO(),this.Fe=Tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=_e(),t=_e(),r=_e();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:o})}}),new Lf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=JO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Ib=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=On(),this.je=iy(),this.Je=iy(),this.He=new nt(ue)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(My(o))if(r===0){let s=new Q(o.path);this.Xe(t,s,kt.newNoDocument(s,oe.min()))}else te(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}QO?.ct(function(d,h,m,g,_){var D,T,F,G,B,X;let ce={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},ae=h.unchangedNames;return ae&&(ce.bloomFilter={applied:_===0,hashCount:(D=ae?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(G=(F=(T=ae?.bits)===null||T===void 0?void 0:T.bitmap)===null||F===void 0?void 0:F.length)!==null&&G!==void 0?G:0,padding:(X=(B=ae?.bits)===null||B===void 0?void 0:B.padding)!==null&&X!==void 0?X:0,mightContain:I=>{var v;return(v=g?.mightContain(I))!==null&&v!==void 0&&v}}),ce}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Zi(r).toUint8Array()}catch(c){if(c instanceof Ty)return Ln("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new wb(s,i,o)}catch(c){return Ln(c instanceof pa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&My(a.target)){let c=new Q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,kt.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=_e();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Ff(e,t,this.He,this.ze,r);return this.ze=On(),this.je=iy(),this.Je=iy(),this.He=new nt(ue),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Oy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new He(ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new He(ue),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Oy),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function iy(){return new nt(Q.comparator)}function JO(){return new nt(Q.comparator)}var w5={asc:"ASCENDING",desc:"DESCENDING"},I5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D5={and:"AND",or:"OR"},Db=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cb(n,e){return n.useProto3Json||Qf(e)?e:{value:e}}function Il(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C5(n,e){return Il(n,e.toTimestamp())}function bt(n){return te(!!n,49232),oe.fromTimestamp(function(t){let r=Yi(t);return new Be(r.seconds,r.nanos)}(n))}function dS(n,e){return bb(n,e).canonicalString()}function bb(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function FL(n){let e=Re.fromString(n);return te(GL(e),10190,{key:e.toString()}),e}function Vf(n,e){return dS(n.databaseId,e.path)}function mi(n,e){let t=FL(e);if(t.get(1)!==n.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(jL(t))}function LL(n,e){return dS(n.databaseId,e)}function VL(n){let e=FL(n);return e.length===4?Re.emptyPath():jL(e)}function Tb(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jL(n){return te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function XO(n,e,t){return{name:Vf(n,e),fields:t.value.mapValue.fields}}function BL(n,e,t){let r=mi(n,e.name),i=bt(e.updateTime),o=e.createTime?bt(e.createTime):oe.min(),s=new hn({mapValue:{fields:e.fields}}),a=kt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function b5(n,e){return"found"in e?function(r,i){te(!!i.found,43571),i.found.name,i.found.updateTime;let o=mi(r,i.found.name),s=bt(i.found.updateTime),a=i.found.createTime?bt(i.found.createTime):oe.min(),c=new hn({mapValue:{fields:i.found.fields}});return kt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){te(!!i.missing,3894),te(!!i.readTime,22933);let o=mi(r,i.missing),s=bt(i.readTime);return kt.newNoDocument(o,s)}(n,e):Z(7234,{result:e})}function T5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(te(d===void 0||typeof d=="string",58123),Tt.fromBase64String(d||"")):(te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Tt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?N.UNKNOWN:kL(u.code);return new L(d,u.message||"")}(s);t=new ky(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=mi(n,r.document.name),o=bt(r.document.updateTime),s=r.document.createTime?bt(r.document.createTime):oe.min(),a=new hn({mapValue:{fields:r.document.fields}}),c=kt.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new ll(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=mi(n,r.document),o=r.readTime?bt(r.readTime):oe.min(),s=kt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ll([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=mi(n,r.document),o=r.removedTargetIds||[];t=new ll([],o,i,null)}else{if(!("filter"in e))return Z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Eb(i,o),a=r.targetId;t=new Py(a,s)}}return t}function jf(n,e){let t;if(e instanceof Yo)t={update:XO(n,e.key,e.value)};else if(e instanceof Zo)t={delete:Vf(n,e.key)};else if(e instanceof Vr)t={update:XO(n,e.key,e.data),updateMask:x5(e.fieldMask)};else{if(!(e instanceof Pf))return Z(16599,{Rt:e.type});t={verify:Vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ko)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ji)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qo)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:C5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z(27497)}(n,e.precondition)),t}function Sb(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?mt.updateTime(bt(o.updateTime)):o.exists!==void 0?mt.exists(o.exists):mt.none()}(e.currentDocument):mt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Ko;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ji(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Xi(d)}else"increment"in a?c=new Qo(s,a.increment):Z(16584,{proto:a});let u=Ct.fromServerFormat(a.fieldPath);return new Ea(u,c)}(n,i)):[];if(e.update){e.update.name;let i=mi(n,e.update.name),o=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Qn(u.map(d=>Ct.fromServerFormat(d)))}(e.updateMask);return new Vr(i,o,s,t,r)}return new Yo(i,o,t,r)}if(e.delete){let i=mi(n,e.delete);return new Zo(i,t)}if(e.verify){let i=mi(n,e.verify);return new Pf(i,t)}return Z(1463,{proto:e})}function S5(n,e){return n&&n.length>0?(te(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?bt(i.updateTime):bt(o);return s.isEqual(oe.min())&&(s=bt(o)),new vb(s,i.transformResults||[])}(t,e))):[]}function UL(n,e){return{documents:[LL(n,e.path)]}}function $L(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LL(n,i);let o=function(u){if(u.length!==0)return zL(je.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:rl(m.field),direction:R5(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Cb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function HL(n){let e=VL(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){te(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(h){let m=qL(h);return m instanceof je&&aS(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(h){return h.map(m=>function(_){return new va(il(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Qf(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(h){let m=!!h.before,g=h.values||[];return new _i(g,m)}(t.startAt));let u=null;return t.endAt&&(u=function(h){let m=!h.before,g=h.values||[];return new _i(g,m)}(t.endAt)),vL(e,i,s,o,a,"F",c,u)}function A5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qL(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=il(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=il(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=il(t.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=il(t.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(n):n.fieldFilter!==void 0?function(t){return Te.create(il(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return je.create(t.compositeFilter.filters.map(r=>qL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(t.compositeFilter.op))}(n):Z(30097,{filter:n})}function R5(n){return w5[n]}function M5(n){return I5[n]}function N5(n){return D5[n]}function rl(n){return{fieldPath:n.canonicalString()}}function il(n){return Ct.fromServerFormat(n.fieldPath)}function zL(n){return n instanceof Te?function(t){if(t.op==="=="){if(LO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(FO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(FO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:M5(t.op),value:t.value}}}(n):n instanceof je?function(t){let r=t.getFilters().map(i=>zL(i));return r.length===1?r[0]:{compositeFilter:{op:N5(t.op),filters:r}}}(n):Z(54877,{filter:n})}function x5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dl=class n{constructor(e,t,r,i,o=oe.min(),s=oe.min(),a=Tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fy=class{constructor(e){this.gt=e}};function P5(n,e){let t;if(e.document)t=BL(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Q.fromSegments(e.noDocument.path),i=Ia(e.noDocument.readTime);t=kt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{let r=Q.fromSegments(e.unknownDocument.path),i=Ia(e.unknownDocument.version);t=kt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Be(i[0],i[1]);return oe.fromTimestamp(o)}(e.readTime)),t}function eF(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ly(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Vf(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Il(o,s.version.toTimestamp()),createTime:Il(o,s.createTime.toTimestamp())}}(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wa(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:wa(e.version)}}return r}function Ly(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wa(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ia(n){let e=new Be(n.seconds,n.nanoseconds);return oe.fromTimestamp(e)}function ua(n,e){let t=(e.baseMutations||[]).map(o=>Sb(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Sb(n.gt,o)),i=Be.fromMillis(e.localWriteTimeMs);return new kf(e.batchId,i,t,r)}function pf(n){let e=Ia(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ia(n.lastLimboFreeSnapshotVersion):oe.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return te(s===1,1966,{count:s}),Cn(kl(VL(o.documents[0])))}(n.query):function(o){return Cn(HL(o))}(n.query),new Dl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function WL(n,e){let t=wa(e.snapshotVersion),r=wa(e.lastLimboFreeSnapshotVersion),i;i=My(e.target)?UL(n.gt,e.target):$L(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_a(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fS(n){let e=HL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xy(e,e.limit,"L"):e}function FC(n,e){return new Of(e.largestBatchId,Sb(n.gt,e.overlayMutation))}function tF(n,e){let t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function nF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wa(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ab=class{getBundleMetadata(e,t){return rF(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ia(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return rF(e).put(function(i){return{bundleId:i.id,createTime:wa(bt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return iF(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:fS(o.bundledQuery),readTime:Ia(o.readTime)}}(r)})}saveNamedQuery(e,t){return iF(e).put(function(i){return{name:i.name,readTime:wa(bt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function rF(n){return Bt(n,Ev)}function iF(n){return Bt(n,wv)}var Vy=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return lf(e).get(tF(this.userId,t)).next(r=>r?FC(this.serializer,r):null)}getOverlays(e,t){let r=hi();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Of(t,s);i.push(this.wt(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(pn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(lf(e).Y(rb,a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=hi(),o=pn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return lf(e).j(rb,s).next(a=>{for(let c of a){let u=FC(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=hi(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lf(e).X({index:JF,range:a},(c,u,d)=>{let h=FC(this.serializer,u);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()}).next(()=>o)}wt(e,t){return lf(e).put(function(i,o,s){let[a,c,u]=tF(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:jf(i.gt,s.mutation)}}(this.serializer,this.userId,t))}};function lf(n){return Bt(n,Iv)}var Rb=class{St(e){return Bt(e,rS)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ki=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),bf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Yi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Zi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?uL(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):bv(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Z(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=yl,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ot(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Q.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ki.Ut=new Ki;var Zc=255;function k5(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function oF(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=k5(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Mb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=oF(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=oF(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(Zc),this.rn(255)}sn(){this._n(Zc),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===Zc?(this.rn(Zc),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Zc?(this._n(Zc),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Nb=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},xb=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},da=class{constructor(){this.un=new Mb,this.cn=new Nb(this.un),this.ln=new xb(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var fa=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:my(this.In),directionalValue:my(this.dn),orderedDocumentKey:my(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function ko(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=sF(n.In,e.In),t!==0?t:(t=sF(n.dn,e.dn),t!==0?t:Q.comparator(n.Tn,e.Tn)))}function sF(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function my(n){return L_()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function aF(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var jy=class{constructor(e){this.Vn=new He((t,r)=>Ct.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(te(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=YC(e);if(t!==void 0&&!this.yn(t))return!1;let r=aa(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new He(Ct.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new al(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new al(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new al(r.field,r.dir==="asc"?0:1)));return new fl(fl.UNKNOWN_ID,this.collectionId,t,Cf.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function KL(n){var e,t;if(te(n instanceof Te||n instanceof je,20012),n instanceof Te){if(n instanceof Ry){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Te.create(n.field,"==",o)))||[];return je.create(i,"or")}return n}let r=n.filters.map(i=>KL(i));return je.create(r,n.op)}function O5(n){if(n.getFilters().length===0)return[];let e=Ob(KL(n));return te(QL(e),7391),Pb(e)||kb(e)?[e]:e.getFilters()}function Pb(n){return n instanceof Te}function kb(n){return n instanceof je&&aS(n)}function QL(n){return Pb(n)||kb(n)||function(t){if(t instanceof je&&ab(t)){for(let r of t.getFilters())if(!Pb(r)&&!kb(r))return!1;return!0}return!1}(n)}function Ob(n){if(te(n instanceof Te||n instanceof je,34018),n instanceof Te)return n;if(n.filters.length===1)return Ob(n.filters[0]);let e=n.filters.map(r=>Ob(r)),t=je.create(e,n.op);return t=By(t),QL(t)?t:(te(t instanceof je,64498),te(_l(t),40251),te(t.filters.length>1,57927),t.filters.reduce((r,i)=>hS(r,i)))}function hS(n,e){let t;return te(n instanceof Te||n instanceof je,38388),te(e instanceof Te||e instanceof je,25473),t=n instanceof Te?e instanceof Te?function(i,o){return je.create([i,o],"and")}(n,e):cF(n,e):e instanceof Te?cF(e,n):function(i,o){if(te(i.filters.length>0&&o.filters.length>0,48005),_l(i)&&_l(o))return mL(i,o.getFilters());let s=ab(i)?i:o,a=ab(i)?o:i,c=s.filters.map(u=>hS(u,a));return je.create(c,"or")}(n,e),By(t)}function cF(n,e){if(_l(e))return mL(e,n.getFilters());{let t=e.filters.map(r=>hS(n,r));return je.create(t,"or")}}function By(n){if(te(n instanceof Te||n instanceof je,11850),n instanceof Te)return n;let e=n.getFilters();if(e.length===1)return By(e[0]);if(hL(n))return n;let t=e.map(i=>By(i)),r=[];return t.forEach(i=>{i instanceof Te?r.push(i):i instanceof je&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:je.create(r,n.op)}var Fb=class{constructor(){this.Dn=new Bf}addToCollectionParentIndex(e,t){return this.Dn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(fr.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Bf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new He(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(Re.comparator)).toArray()}};var lF="IndexedDbIndexManager",oy=new Uint8Array(0),Lb=class{constructor(e,t){this.databaseId=t,this.vn=new Bf,this.Cn=new Lr(r=>_a(r),(r,i)=>Zf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:pn(i)};return uF(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[jF(t),""],!1,!0);return uF(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(fi(s.parent))}return r})}addFieldIndex(e,t){let r=uf(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Xc(e);return o.next(a=>{s.put(nF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=uf(e),i=Xc(e),o=Jc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=uf(e),r=Jc(e),i=Xc(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return M.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new jy(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Jc(e),i=!0,o=new Map;return M.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=_e(),a=[];return M.forEach(o,(c,u)=>{j(lF,`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(c)} to execute ${_a(t)}`);let d=function(B,X){let ce=YC(X);if(ce===void 0)return null;for(let ae of Ny(B,ce.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null}(u,c),h=function(B,X){let ce=new Map;for(let ae of aa(X))for(let I of Ny(B,ae.fieldPath))switch(I.op){case"==":case"in":ce.set(ae.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ce.set(ae.fieldPath.canonicalString(),I.value),Array.from(ce.values())}return null}(u,c),m=function(B,X){let ce=[],ae=!0;for(let I of aa(X)){let v=I.kind===0?$O(B,I.fieldPath,B.startAt):HO(B,I.fieldPath,B.startAt);ce.push(v.value),ae&&(ae=v.inclusive)}return new _i(ce,ae)}(u,c),g=function(B,X){let ce=[],ae=!0;for(let I of aa(X)){let v=I.kind===0?HO(B,I.fieldPath,B.endAt):$O(B,I.fieldPath,B.endAt);ce.push(v.value),ae&&(ae=v.inclusive)}return new _i(ce,ae)}(u,c),_=this.xn(c,u,m),D=this.xn(c,u,g),T=this.On(c,u,h),F=this.Nn(c.indexId,d,_,m.inclusive,D,g.inclusive,T);return M.forEach(F,G=>r.H(G,t.limit).next(B=>{B.forEach(X=>{let ce=Q.fromSegments(X.documentKey);s.has(ce)||(s=s.add(ce),a.push(ce))})}))}).next(()=>a)}return M.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=O5(je.create(e.filters,"and")).map(r=>gb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),u=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let m=t?this.Bn(t[h/u]):oy,g=this.Ln(e,m,r[h%u],i),_=this.kn(e,m,o[h%u],s),D=a.map(T=>this.Ln(e,m,T,!0));d.push(...this.createRange(g,_,D))}return d}Ln(e,t,r,i){let o=new fa(e,Q.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new fa(e,Q.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new jy(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return M.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new He(Ct.comparator),d=!1;for(let h of c.filters)for(let m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new da;for(let i of aa(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);Ki.Ut.bt(o,s)}return r.an()}Bn(e){let t=new da;return Ki.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new da;return Ki.Ut.bt(ya(this.databaseId,t),r.hn(function(o){let s=aa(o);return s.length===0?0:s[s.length-1].kind}(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new da);let o=0;for(let s of aa(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&xf(a))i=this.Un(i,s,a);else{let u=c.hn(s.kind);Ki.Ut.bt(a,u)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new da;c.seed(a.an()),Ki.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=uf(e),i=Xc(e);return(t?r.j(nb,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,h){let m=h?new Cf(h.sequenceNumber,new fr(Ia(h.readTime),new Q(fi(h.documentKey)),h.largestBatchId)):Cf.empty(),g=d.fields.map(([_,D])=>new al(Ct.fromServerFormat(_),D));return new fl(d.indexId,d.collectionGroup,g,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=uf(e),o=Xc(e);return this.Wn(e).next(s=>i.j(nb,IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>o.put(nF(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.Gn(e,i,c).next(u=>{let d=this.zn(o,c);return u.isEqual(d)?M.resolve():this.jn(e,o,c,u,d)}))))})}Jn(e,t,r,i){return Jc(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Jc(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Jc(e),o=new He(ko);return i.X({index:ZF,range:IDBKeyRange.only([r.indexId,this.uid,my(this.Qn(r,t))])},(s,a)=>{o=o.add(new fa(r.indexId,t,aF(a.arrayValue),aF(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new He(ko),i=this.qn(t,e);if(i==null)return r;let o=YC(t);if(o!=null){let s=e.data.field(o.fieldPath);if(xf(s))for(let a of s.arrayValue.values||[])r=r.add(new fa(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new fa(t.indexId,e.key,oy,i));return r}jn(e,t,r,i,o){j(lF,"Updating index entries for document '%s'",t.key);let s=[];return function(c,u,d,h,m){let g=c.getIterator(),_=u.getIterator(),D=Yc(g),T=Yc(_);for(;D||T;){let F=!1,G=!1;if(D&&T){let B=d(D,T);B<0?G=!0:B>0&&(F=!0)}else D!=null?G=!0:F=!0;F?(h(T),T=Yc(_)):G?(m(D),D=Yc(g)):(D=Yc(g),T=Yc(_))}}(i,o,ko,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),M.waitFor(s)}Wn(e){let t=1;return Xc(e).X({index:YF,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ko(s,a)).filter((s,a,c)=>!a||ko(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ko(s,e),c=ko(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,oy,Q.empty()),c=i[s+1].Rn(this.uid,oy,Q.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return ko(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dF)}getMinOffset(e,t){return M.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||Z(44426))).next(dF)}};function uF(n){return Bt(n,Af)}function Jc(n){return Bt(n,yf)}function uf(n){return Bt(n,nS)}function Xc(n){return Bt(n,gf)}function dF(n){te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;XT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fr(e.readTime,e.documentKey,t)}var fF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YL=41943040,kn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function ZL(n,e,t){let r=n.store(Or),i=n.store(hl),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(d,h,m)=>(a++,m.delete()));o.push(c.next(()=>{te(a===1,47070,{batchId:t.batchId})}));let u=[];for(let d of t.mutations){let h=WF(e,d.key.path,t.batchId);o.push(i.delete(h)),u.push(d.key)}return M.waitFor(o).next(()=>u)}function Uy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Z(14731);e=n.noDocument}return JSON.stringify(e).length}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(YL,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);var $y=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){te(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).X({index:ha,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ol(e),s=Oo(e);return s.add({}).next(a=>{te(typeof a=="number",49019);let c=new kf(a,t,r,i),u=function(g,_,D){let T=D.baseMutations.map(G=>jf(g.gt,G)),F=D.mutations.map(G=>jf(g.gt,G));return{userId:_,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:T,mutations:F}}(this.serializer,this.userId,c),d=[],h=new He((m,g)=>ue(m.canonicalString(),g.canonicalString()));for(let m of i){let g=WF(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(g,O9))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Oo(e).get(t).next(r=>r?(te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ua(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?M.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Oo(e).X({index:ha,range:i},(s,a,c)=>{a.userId===this.userId&&(te(a.batchId>=r,47524,{er:r}),o=ua(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Bo;return Oo(e).X({index:ha,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Bo],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).j(ha,t).next(r=>r.map(i=>ua(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ly(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ol(e).X({range:i},(s,a,c)=>{let[u,d,h]=s,m=fi(d);if(u===this.userId&&t.path.isEqual(m))return Oo(e).get(h).next(g=>{if(!g)throw Z(61480,{tr:s,batchId:h});te(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),o.push(ua(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(ue),i=[];return t.forEach(o=>{let s=ly(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ol(e).X({range:a},(u,d,h)=>{let[m,g,_]=u,D=fi(g);m===this.userId&&o.path.isEqual(D)?r=r.add(_):h.done()});i.push(c)}),M.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ly(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new He(ue);return ol(e).X({range:s},(c,u,d)=>{let[h,m,g]=c,_=fi(m);h===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(g)):d.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Oo(e).get(o).next(s=>{if(s===null)throw Z(35274,{batchId:o});te(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(ua(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZL(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ol(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=fi(o[1]);i.push(c)}else a.done()}).next(()=>{te(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return JL(e,this.userId,t)}sr(e){return XL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Bo,lastStreamToken:""})}};function JL(n,e,t){let r=ly(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ol(n).X({range:o,Z:!0},(a,c,u)=>{let[d,h,m]=a;d===e&&h===i&&(s=!0),u.done()}).next(()=>s)}function Oo(n){return Bt(n,Or)}function ol(n){return Bt(n,hl)}function XL(n){return Bt(n,Tf)}var Cl=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Vb=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new Cl(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>oe.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>el(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(te(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return el(e).X((s,a)=>{let c=pf(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return el(e).X((r,i)=>{let o=pf(i);t(o)})}cr(e){return hF(e).get(Cy).next(t=>(te(t!==null,2888),t))}lr(e,t){return hF(e).put(Cy,t)}hr(e,t){return el(e).put(WL(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=_a(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return el(e).X({range:i,index:QF},(s,a,c)=>{let u=pf(a);Zf(t,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Lo(e);return t.forEach(s=>{let a=pn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=Lo(e);return M.forEach(t,o=>{let s=pn(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Lo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Lo(e),o=_e();return i.X({range:r,Z:!0},(s,a,c)=>{let u=fi(s[1]),d=new Q(u);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=pn(t.path),i=IDBKeyRange.bound([r],[jF(r)],!1,!0),o=0;return Lo(e).X({index:tS,Z:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}Et(e,t){return el(e).get(t).next(r=>r?pf(r):null)}};function el(n){return Bt(n,pl)}function hF(n){return Bt(n,ga)}function Lo(n){return Bt(n,ml)}var pF="LruGarbageCollector",F5=1048576;function mF([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var jb=class{constructor(e){this.Tr=e,this.buffer=new He(mF),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();mF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Hy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(pF,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>A(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ts(t)?j(pF,"Ignoring IndexedDB error during garbage collection: ",t):yield es(t)}yield this.Rr(3e5)}))}},Bb=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Kn.ue);let r=new jb(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(fF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fF):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),tl()<=qr.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function eV(n,e){return new Bb(n,e)}var Ub=class{constructor(e,t){this.db=e,this.garbageCollector=eV(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return sy(e,r)}removeReference(e,t,r){return sy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sy(e,t)}Sr(e,t){return function(i,o){let s=!1;return XL(i).ee(a=>JL(i,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,oe.min()),Lo(e).delete(function(h){return[0,pn(h.path)]}(s))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sy(e,t)}wr(e,t){let r=Lo(e),i,o=Kn.ue;return r.X({index:tS},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Kn.ue&&t(new Q(fi(i)),o),o=u,i=c):o=Kn.ue}).next(()=>{o!==Kn.ue&&t(new Q(fi(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function sy(n,e){return Lo(n).put(function(r,i){return{targetId:0,path:pn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var qy=class{constructor(){this.changes=new Lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $b=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sa(e).put(r)}removeEntry(e,t,r){return sa(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ly(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=kt.newInvalidDocument(t);return sa(e).X({index:uy,range:IDBKeyRange.only(df(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:kt.newInvalidDocument(t)};return sa(e).X({index:uy,range:IDBKeyRange.only(df(t))},(i,o)=>{r={document:this.Dr(t,o),size:Uy(o)}}).next(()=>r)}getEntries(e,t){let r=On();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=On(),i=new nt(Q.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,Uy(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return M.resolve();let i=new He(vF);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(df(i.first()),df(i.last())),s=i.getIterator(),a=s.getNext();return sa(e).X({index:uy,range:o},(c,u,d)=>{let h=Q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&vF(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?d.G(df(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ly(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(e).j(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=On();for(let h of u){let m=this.Dr(Q.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(Xf(t,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=On(),s=yF(t,r),a=yF(t,fr.max());return sa(e).X({index:KF,range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let h=this.Dr(Q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(h.key,h),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Hb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gF(e).get(tb).next(t=>(te(!!t,20021),t))}br(e,t){return gF(e).put(tb,t)}Dr(e,t){if(t){let r=P5(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return kt.newInvalidDocument(e)}};function tV(n){return new $b(n)}var Hb=class extends qy{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Lr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new He((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=eF(this.Or.serializer,s);i=i.add(o.path.popLast());let u=Uy(c);r+=u-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=eF(this.Or.serializer,s.convertToNoDocument(oe.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function gF(n){return Bt(n,Sf)}function sa(n){return Bt(n,Dy)}function df(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yF(n,e){let t=e.documentKey.path.toArray();return[n,Ly(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vF(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ue(t[o],r[o]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var qb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ef(r.mutation,i,Qn.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=hi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=hf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=On(),s=_f(),a=function(){return _f()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Vr)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Ef(d.mutation,u,d.mutation.getFieldMask(),Be.now())):s.set(u.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var h;return a.set(u,new qb(d,(h=s.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_f(),i=new nt((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Qn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let h=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,h=CL();d.forEach(m=>{if(!o.has(m)){let g=NL(t.get(m),r.get(m));g!==null&&h.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(hi()),a=dl,c=o;return s.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,_e())).next(d=>({batchId:a,changes:DL(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=hf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=hf();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let u=function(h,m){return new Fr(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,m)=>{s=s.insert(h,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,kt.newInvalidDocument(d)))});let a=hf();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Ef(d.mutation,u,Qn.empty(),Be.now()),Xf(t,u)&&(a=a.insert(c,u))}),a})}};var zb=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return M.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:bt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:fS(i.bundledQuery),readTime:bt(i.readTime)}}(t)),M.resolve()}};var Gb=class{constructor(){this.overlays=new nt(Q.comparator),this.kr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hi();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=hi(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new nt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=hi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=hi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Of(t,r));let o=this.kr.get(t);o===void 0&&(o=_e(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Wb=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Uf=class{constructor(){this.qr=new He(Nt.Qr),this.$r=new He(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Nt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Nt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Q(new Re([])),r=new Nt(t,e),i=new Nt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Q(new Re([])),r=new Nt(t,e),i=new Nt(t,e+1),o=_e();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Nt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Nt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Q.comparator(e.key,t.key)||ue(e.Hr,t.Hr)}static Ur(e,t){return ue(e.Hr,t.Hr)||Q.comparator(e.key,t.key)}};var Kb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new He(Nt.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new kf(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Nt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Bo:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Nt(t,0),i=new Nt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(ue);return t.forEach(i=>{let o=new Nt(i,0),s=new Nt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new Nt(new Q(o),0),a=new He(ue);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),M.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){te(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(t.mutations,i=>{let o=new Nt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Nt(t,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Qb=class{constructor(e){this.ni=e,this.docs=function(){return new nt(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(t))}getEntries(e,t){let r=On();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():kt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=On(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||XT(HF(d),r)<=0||(i.has(d.key)||Xf(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Z(9500)}ri(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Yb(this)}getSize(e){return M.resolve(this.size)}},Yb=class extends qy{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Zb=class{constructor(e){this.persistence=e,this.ii=new Lr(t=>_a(t),Zf),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.si=0,this.oi=new Uf,this.targetCount=0,this._i=Cl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),M.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.hr(t),M.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.oi.containsKey(t))}};var $f=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Kn(0),this.ci=!1,this.ci=!0,this.li=new Wb,this.referenceDelegate=e(this),this.hi=new Zb(this),this.indexManager=new Fb,this.remoteDocumentCache=function(i){return new Qb(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Fy(t),this.Ti=new zb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Kb(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Jb(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Jb=class extends Ey{constructor(e){super(),this.currentSequenceNumber=e}},Gy=class n{constructor(e){this.persistence=e,this.Ai=new Uf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Z(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=Q.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,oe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return M.or([()=>M.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Wy=class n{constructor(e,t){this.persistence=e,this.gi=new Lr(r=>pn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eV(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fy(e.data.value)),t}Sr(e,t,r){return M.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Xb=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new wy("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore(Yf)}(e),function(c){c.createObjectStore(Tf,{keyPath:k9}),c.createObjectStore(Or,{keyPath:NO,autoIncrement:!0}).createIndex(ha,xO,{unique:!0}),c.createObjectStore(hl)}(e),_F(e),function(c){c.createObjectStore(ca)}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(ml),c.deleteObjectStore(pl),c.deleteObjectStore(ga)}(e),_F(e)),s=s.next(()=>function(c){let u=c.store(ga),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put(Cy,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store(Or).j().next(h=>{c.deleteObjectStore(Or),c.createObjectStore(Or,{keyPath:NO,autoIncrement:!0}).createIndex(ha,xO,{unique:!0});let m=u.store(Or),g=h.map(_=>m.put(_));return M.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(gl,{keyPath:H9})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(Sf)}(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Ev,{keyPath:q9})})(e),function(c){c.createObjectStore(wv,{keyPath:z9})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore(Iv,{keyPath:J9});u.createIndex(rb,X9,{unique:!1}),u.createIndex(JF,e5,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore(Dy,{keyPath:F9});u.createIndex(uy,L9),u.createIndex(KF,V9)}(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(ca))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(nS,{keyPath:G9,autoIncrement:!0}).createIndex(nb,W9,{unique:!1}),c.createObjectStore(gf,{keyPath:K9}).createIndex(YF,Q9,{unique:!1}),c.createObjectStore(yf,{keyPath:Y9}).createIndex(ZF,Z9,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(gf).clear()}).next(()=>{t.objectStore(yf).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(rS,{keyPath:t5})})(e)})),r<18&&i>=18&&L_()&&(s=s.next(()=>{t.objectStore(gf).clear()}).next(()=>{t.objectStore(yf).clear()})),s}yi(e){let t=0;return e.store(ca).X((r,i)=>{t+=Uy(i)}).next(()=>{let r={byteSize:t};return e.store(Sf).put(tb,r)})}pi(e){let t=e.store(Tf),r=e.store(Or);return t.j().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Bo],[o.userId,o.lastAcknowledgedBatchId]);return r.j(ha,s).next(a=>M.forEach(a,c=>{te(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let u=ua(this.serializer,c);return ZL(e,o.userId,u).next(()=>{})}))}))}wi(e){let t=e.store(ml),r=e.store(ca);return e.store(ga).get(Cy).next(i=>{let o=[];return r.X((s,a)=>{let c=new Re(s),u=function(h){return[0,pn(h)]}(c);o.push(t.get(u).next(d=>d?M.resolve():(h=>t.put({targetId:0,path:pn(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}Si(e,t){e.createObjectStore(Af,{keyPath:$9});let r=t.store(Af),i=new Bf,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:pn(c)})}};return t.store(ca).X({Z:!0},(s,a)=>{let c=new Re(s);return o(c.popLast())}).next(()=>t.store(hl).X({Z:!0},([s,a,c],u)=>{let d=fi(a);return o(d.popLast())}))}bi(e){let t=e.store(pl);return t.X((r,i)=>{let o=pf(i),s=WL(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(ca),i=[];return r.X((o,s)=>{let a=t.store(Dy),c=function(h){return h.document?new Q(Re.fromString(h.document.name).popFirst(5)):h.noDocument?Q.fromSegments(h.noDocument.path):h.unknownDocument?Q.fromSegments(h.unknownDocument.path):Z(36783)}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}Ci(e,t){let r=t.store(Or),i=tV(this.serializer),o=new $f(Gy.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:_e();ua(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),M.forEach(a,(c,u)=>{let d=new xt(u),h=Vy.yt(this.serializer,d),m=o.getIndexManager(d),g=$y.yt(d,this.serializer,m,o.referenceDelegate);return new zy(i,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new Rf(t,Kn.ue),c).next()})})}};function _F(n){n.createObjectStore(ml,{keyPath:B9}).createIndex(tS,U9,{unique:!0}),n.createObjectStore(pl,{keyPath:"targetId"}).createIndex(QF,j9,{unique:!0}),n.createObjectStore(ga)}var Fo="IndexedDbPersistence",LC=18e5,VC=5e3,jC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nV="main",eT=class n{constructor(e,t,r,i,o,s,a,c,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=u,this.xi=d,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new L(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ub(this,i),this.Qi=t+nV,this.serializer=new Fy(c),this.$i=new qo(this.Qi,this.Oi,new Xb(this.serializer)),this.li=new Rb,this.hi=new Vb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tV(this.serializer),this.Ti=new Ab,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&Dt(Fo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new L(N.FAILED_PRECONDITION,jC);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Kn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>A(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>A(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ay(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(ts(e))return j(Fo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j(Fo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return ff(e).get(Qc).next(t=>M.resolve(this.Xi(t)))}es(e){return ay(e).delete(this.clientId)}ts(){return A(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,LC)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Bt(t,gl);return r.j().next(i=>{let o=this.rs(i,LC),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?M.resolve(!0):ff(e).get(Qc).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,VC)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new L(N.FAILED_PRECONDITION,jC);return!1}}return!(!this.networkEnabled||!this.inForeground)||ay(e).j().next(r=>this.rs(r,VC).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&j(Fo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return A(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Yf,gl],e=>{let t=new Rf(e,Kn.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>ay(e).j().next(t=>this.rs(t,LC).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return $y.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lb(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Vy.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){j(Fo,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===18?i5:c===17?nL:c===16?r5:c===15?iS:c===14?tL:c===13?eL:c===12?n5:c===11?XF:void Z(60245)}(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Rf(a,this.ui?this.ui.next():Kn.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new L(N.FAILED_PRECONDITION,qF);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return ff(e).get(Qc).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,VC)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new L(N.FAILED_PRECONDITION,jC)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ff(e).put(Qc,t)}static C(){return qo.C()}Yi(e){let t=ff(e);return t.get(Qc).next(r=>this.Xi(r)?(j(Fo,"Releasing primary lease."),t.delete(Qc)):M.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;F_()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return j(Fo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt(Fo,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ff(n){return Bt(n,Yf)}function ay(n){return Bt(n,gl)}function pS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var tT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=_e(),i=_e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var nT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ky=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return F_()?8:zF(pu())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nT;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(tl()<=qr.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(tl()<=qr.DEBUG&&j("QueryEngine","Query:",nl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(tl()<=qr.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):M.resolve())}ps(e,t){if(qO(t))return M.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xy(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=_e(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,xy(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return qO(t)||i.isEqual(oe.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?M.resolve(null):(tl()<=qr.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nl(t)),this.vs(e,s,t,$F(i,dl)).next(a=>a))})}bs(e,t){let r=new He(wL(e));return t.forEach((i,o)=>{Xf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return tl()<=qr.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",nl(t)),this.gs.getDocumentsMatchingQuery(e,t,fr.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mS="LocalStore",L5=3e8,rT=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new nt(ue),this.Ms=new Lr(o=>_a(o),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zy(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function rV(n,e,t,r){return new rT(n,e,t,r)}function iV(n,e){return A(this,null,function*(){let t=Y(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=_e();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function V5(n,e){let t=Y(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let h=u.batch,m=h.keys(),g=M.resolve();return m.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(D=>{let T=u.docVersions.get(_);te(T!==null,48541),D.version.compareTo(T)<0&&(h.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),d.addEntry(D)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oV(n){let e=Y(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function j5(n,e){let t=Y(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,h)=>{let m=i.get(h);if(!m)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Tt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(D,T,F){return D.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=L5?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,g,d)&&a.push(t.hi.updateTargetData(o,g))});let c=On(),u=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(sV(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(oe.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function sV(n,e,t){let r=_e(),i=_e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=On();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(mS,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function B5(n,e){let t=Y(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bl(n,e){let t=Y(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Dl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Tl(n,e,t){return A(this,null,function*(){let r=Y(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ts(s))throw s;j(mS,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Qy(n,e,t){let r=Y(n),i=oe.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let h=Y(c),m=h.Ms.get(d);return m!==void 0?M.resolve(h.Fs.get(m)):h.hi.getTargetData(u,d)}(r,s,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:oe.min(),t?o:_e())).next(a=>(lV(r,EL(e),a),{documents:a,qs:o})))}function aV(n,e){let t=Y(n),r=Y(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function cV(n,e){let t=Y(n),r=t.xs.get(e)||oe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,$F(r,dl),Number.MAX_SAFE_INTEGER)).then(i=>(lV(t,e,i),i))}function lV(n,e,t){let r=n.xs.get(e)||oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function U5(n,e,t,r){return A(this,null,function*(){let i=Y(n),o=_e(),s=On();for(let u of t){let d=e.Qs(u.metadata.name);u.document&&(o=o.add(d));let h=e.$s(u);h.setReadTime(e.Us(u.metadata.readTime)),s=s.insert(d,h)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield bl(i,function(d){return Cn(kl(Re.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>sV(u,a,s).next(d=>(a.apply(u),d)).next(d=>i.hi.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.hi.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ls,d.ks)).next(()=>d.Ls)))})}function $5(r,i){return A(this,arguments,function*(n,e,t=_e()){let o=yield bl(n,Cn(fS(e.bundledQuery))),s=Y(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=bt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let u=o.withResumeToken(Tt.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(u.targetId,u),s.hi.updateTargetData(a,u).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var uV="firestore_clients";function EF(n,e){return`${uV}_${n}_${e}`}var dV="firestore_mutations";function wF(n,e,t){let r=`${dV}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var fV="firestore_targets";function BC(n,e){return`${fV}_${n}_${e}`}var di="SharedClientState",Yy=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new L(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Dt(di,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},wf=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new L(r.error.code,r.error.message))),o?new n(e,r.state,i):(Dt(di,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zy=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=lS();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=GF(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Dt(di,`Failed to parse client data for instance '${e}': ${t}`),null)}},iT=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Dt(di,`Failed to parse online state: ${e}`),null)}},Hf=class{constructor(){this.activeTargetIds=lS()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},If=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new nt(ue),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=EF(this.persistenceKey,this.js),this.eo=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Hf),this.no=new RegExp(`^${uV}_${s}_([^_]*)$`),this.ro=new RegExp(`^${dV}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${fV}_${s}_(\\d+)$`),this.so=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.oo=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return A(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(EF(this.persistenceKey,r));if(i){let o=Zy.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(BC(this.persistenceKey,e));if(i){let o=wf.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BC(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return j(di,"READ",e,t),t}setItem(e,t){j(di,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){j(di,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(j(di,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>A(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=function(o){let s=Kn.ue;if(o!=null)try{let a=JSON.parse(o);te(typeof a=="number",30636,{wo:o}),s=a}catch(a){Dt(di,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Kn.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new Yy(this.currentUser,e,t,r),o=wF(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=wF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=BC(this.persistenceKey,e),o=new wf(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return Zy.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Yy.Ks(new xt(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return wf.Ks(i,t)}ao(e){return iT.Ks(e)}So(e){return JSON.parse(e)}fo(e){return A(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);j(di,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=lS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Jy=class{constructor(){this.Fo=new Hf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var oT=class{xo(e){}shutdown(){}};var IF="ConnectivityMonitor",Xy=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(IF,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(IF,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cy=null;function sT(){return cy===null?cy=function(){return 268435456+Math.round(2147483648*Math.random())}():cy++,"0x"+cy.toString(16)}var UC="RestConnection",H5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aT=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sy?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=sT(),a=this.Go(e,t.toUriEncodedString());j(UC,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),d=O_(u);return this.jo(e,a,c,r,d).then(h=>(j(UC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Ln(UC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=H5[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var cT=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var fn="WebChannelConnection",lT=class extends aT{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=sT();return new Promise((a,c)=>{let u=new NC;u.setWithCredentials(!0),u.listenOnce(xC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cf.NO_ERROR:let h=u.getResponseJson();j(fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case cf.TIMEOUT:j(fn,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:let m=u.getStatus();if(j(fn,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let D=function(F){let G=F.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(G)>=0?G:N.UNKNOWN}(_.status);c(new L(D,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(fn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);j(fn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=sT(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OC(),a=kC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");j(fn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=s.createWebChannel(d,c);this.T_(h);let m=!1,g=!1,_=new cT({Ho:T=>{g?j(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(j(fn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),j(fn,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Yo:()=>h.close()}),D=(T,F,G)=>{T.listen(F,B=>{try{G(B)}catch(X){setTimeout(()=>{throw X},0)}})};return D(h,Kc.EventType.OPEN,()=>{g||(j(fn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),D(h,Kc.EventType.CLOSE,()=>{g||(g=!0,j(fn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),D(h,Kc.EventType.ERROR,T=>{g||(g=!0,Ln(fn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),D(h,Kc.EventType.MESSAGE,T=>{var F;if(!g){let G=T.data[0];te(!!G,16349);let B=G,X=B?.error||((F=B[0])===null||F===void 0?void 0:F.error);if(X){j(fn,`RPC '${e}' stream ${i} received error:`,X);let ce=X.status,ae=function(w){let C=Mt[w];if(C!==void 0)return kL(C)}(ce),I=X.message;ae===void 0&&(ae=N.INTERNAL,I="Unknown error status: "+ce+" with message "+X.message),g=!0,_.__(new L(ae,I)),h.close()}else j(fn,`RPC '${e}' stream ${i} received:`,G),_.a_(G)}}),D(a,PC.STAT_EVENT,T=>{T.stat===ry.PROXY?j(fn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===ry.NOPROXY&&j(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function hV(){return typeof window<"u"?window:null}function gy(){return typeof document<"u"?document:null}function eh(n){return new Db(n,!0)}var qf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var DF="PersistentStream",ev=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return A(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return A(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return A(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>A(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(DF,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(j(DF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uT=class extends ev{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=T5(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?bt(s.readTime):oe.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Tb(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=My(c)?{documents:UL(o,c)}:{query:$L(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OL(o,s.resumeToken);let u=Cb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=Il(o,s.snapshotVersion.toTimestamp());let u=Cb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=A5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Tb(this.serializer),t.removeTarget=e,this.k_(t)}},dT=class extends ev{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=S5(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Tb(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>jf(this.serializer,r))};this.k_(t)}};var fT=class{},hT=class extends fT{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,bb(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,bb(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},pT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dt(t),this._a=!1):j("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Da="RemoteStore",mT=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>A(this,null,function*(){rs(this)&&(j(Da,"Restarting streams for network reachability change."),yield function(c){return A(this,null,function*(){let u=Y(c);u.Ia.add(4),yield Ol(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield th(u)})}(this))}))}),this.Aa=new pT(r,i)}};function th(n){return A(this,null,function*(){if(rs(n))for(let e of n.da)yield e(!0)})}function Ol(n){return A(this,null,function*(){for(let e of n.da)yield e(!1)})}function Tv(n,e){let t=Y(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),vS(t)?yS(t):Ll(t).x_()&&gS(t,e))}function Sl(n,e){let t=Y(n),r=Ll(t);t.Ta.delete(e),r.x_()&&pV(t,e),t.Ta.size===0&&(r.x_()?r.B_():rs(t)&&t.Aa.set("Unknown"))}function gS(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(n).H_(e)}function pV(n,e){n.Ra.$e(e),Ll(n).Y_(e)}function yS(n){n.Ra=new Ib({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ll(n).start(),n.Aa.aa()}function vS(n){return rs(n)&&!Ll(n).M_()&&n.Ta.size>0}function rs(n){return Y(n).Ia.size===0}function mV(n){n.Ra=void 0}function q5(n){return A(this,null,function*(){n.Aa.set("Online")})}function z5(n){return A(this,null,function*(){n.Ta.forEach((e,t)=>{gS(n,e)})})}function G5(n,e){return A(this,null,function*(){mV(n),vS(n)?(n.Aa.la(e),yS(n)):n.Aa.set("Unknown")})}function W5(n,e,t){return A(this,null,function*(){if(n.Aa.set("Online"),e instanceof ky&&e.state===2&&e.cause)try{yield function(i,o){return A(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){j(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tv(n,r)}else if(e instanceof ll?n.Ra.Ye(e):e instanceof Py?n.Ra.it(e):n.Ra.et(e),!t.isEqual(oe.min()))try{let r=yield oV(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Tt.EMPTY_BYTE_STRING,d.snapshotVersion)),pV(o,c);let h=new Dl(d.target,c,u,d.sequenceNumber);gS(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j(Da,"Failed to raise snapshot:",r),yield tv(n,r)}})}function tv(n,e,t){return A(this,null,function*(){if(!ts(e))throw e;n.Ia.add(1),yield Ol(n),n.Aa.set("Offline"),t||(t=()=>oV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>A(null,null,function*(){j(Da,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield th(n)}))})}function gV(n,e){return e().catch(t=>tv(n,t,e))}function Fl(n){return A(this,null,function*(){let e=Y(n),t=Jo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Bo;for(;K5(e);)try{let i=yield B5(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Q5(e,i)}catch(i){yield tv(e,i)}yV(e)&&vV(e)})}function K5(n){return rs(n)&&n.Pa.length<10}function Q5(n,e){n.Pa.push(e);let t=Jo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function yV(n){return rs(n)&&!Jo(n).M_()&&n.Pa.length>0}function vV(n){Jo(n).start()}function Y5(n){return A(this,null,function*(){Jo(n).na()})}function Z5(n){return A(this,null,function*(){let e=Jo(n);for(let t of n.Pa)e.X_(t.mutations)})}function J5(n,e,t){return A(this,null,function*(){let r=n.Pa.shift(),i=_b.from(r,e,t);yield gV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fl(n)})}function X5(n,e){return A(this,null,function*(){e&&Jo(n).Z_&&(yield function(r,i){return A(this,null,function*(){if(function(s){return PL(s)&&s!==N.ABORTED}(i.code)){let o=r.Pa.shift();Jo(r).N_(),yield gV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Fl(r)}})}(n,e)),yV(n)&&vV(n)})}function CF(n,e){return A(this,null,function*(){let t=Y(n);t.asyncQueue.verifyOperationInProgress(),j(Da,"RemoteStore received new credentials");let r=rs(t);t.Ia.add(3),yield Ol(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield th(t)})}function gT(n,e){return A(this,null,function*(){let t=Y(n);e?(t.Ia.delete(2),yield th(t)):e||(t.Ia.add(2),yield Ol(t),t.Aa.set("Unknown"))})}function Ll(n){return n.Va||(n.Va=function(t,r,i){let o=Y(t);return o.ia(),new uT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:q5.bind(null,n),e_:z5.bind(null,n),n_:G5.bind(null,n),J_:W5.bind(null,n)}),n.da.push(e=>A(null,null,function*(){e?(n.Va.N_(),vS(n)?yS(n):n.Aa.set("Unknown")):(yield n.Va.stop(),mV(n))}))),n.Va}function Jo(n){return n.ma||(n.ma=function(t,r,i){let o=Y(t);return o.ia(),new dT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Y5.bind(null,n),n_:X5.bind(null,n),ea:Z5.bind(null,n),ta:J5.bind(null,n)}),n.da.push(e=>A(null,null,function*(){e?(n.ma.N_(),yield Fl(n)):(yield n.ma.stop(),n.Pa.length>0&&(j(Da,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var yT=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vl(n,e){if(Dt("AsyncQueue",`${e}: ${n}`),ts(n))return new L(N.UNAVAILABLE,`${e}: ${n}`);throw n}var nv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=hf(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rv=class{constructor(){this.fa=new nt(Q.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Z(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Al=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,nv.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vT=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},_T=class{constructor(){this.queries=bF(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Y(t),o=i.queries;i.queries=bF(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function bF(){return new Lr(n=>_L(n),Jf)}function _S(n,e){return A(this,null,function*(){let t=Y(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new vT,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Vl(s,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&wS(t)})}function ES(n,e){return A(this,null,function*(){let t=Y(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function e8(n,e){let t=Y(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&wS(t)}function t8(n,e,t){let r=Y(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function wS(n){n.Da.forEach(e=>{e.next()})}var ET,TF;(TF=ET||(ET={})).Fa="default",TF.Cache="cache";var zf=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ET.Cache}};var wT=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var iv=class{constructor(e){this.serializer=e}Qs(e){return mi(this.serializer,e)}$s(e){return e.metadata.exists?BL(this.serializer,e.document,!1):kt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return bt(e)}},IT=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=_V(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=Re.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new iv(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||_e()).add(o);t.set(s,a)}}return t}za(e){return A(this,null,function*(){let t=yield U5(e,new iv(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield $5(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function _V(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ov=class{constructor(e){this.key=e}},sv=class{constructor(e){this.key=e}},av=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=_e(),this.mutatedKeys=_e(),this.Xa=wL(e),this.eu=new nv(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new rv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let m=i.get(d),g=Xf(this.query,h)?h:null,_=!!m&&this.mutatedKeys.has(m.key),D=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),T=!1;m&&g?m.data.isEqual(g.data)?_!==D&&(r.track({type:3,doc:g}),T=!0):this.iu(m,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(c||u)&&(a=!0)),T&&(g?(s=s.add(g),o=D?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,h)=>function(g,_){let D=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{At:T})}};return D(g)-D(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Al(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=_e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new sv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new ov(r))}),t}uu(e){this.Ha=e.qs,this.Za=_e();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Al.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},is="SyncEngine",DT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},CT=class{constructor(e){this.key=e,this.lu=!1}},bT=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Lr(a=>_L(a),Jf),this.Tu=new Map,this.Iu=new Set,this.du=new nt(Q.comparator),this.Eu=new Map,this.Au=new Uf,this.Ru={},this.Vu=new Map,this.mu=Cl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function n8(n,e,t=!0){return A(this,null,function*(){let r=Sv(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield EV(r,e,t,!0),i})}function r8(n,e){return A(this,null,function*(){let t=Sv(n);yield EV(t,e,!0,!1)})}function EV(n,e,t,r){return A(this,null,function*(){let i=yield bl(n.localStore,Cn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield IS(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Tv(n.remoteStore,i),a})}function IS(n,e,t,r,i){return A(this,null,function*(){n.gu=(h,m,g)=>function(D,T,F,G){return A(this,null,function*(){let B=T.view.nu(F);B.Ds&&(B=yield Qy(D.localStore,T.query,!1).then(({documents:I})=>T.view.nu(I,B)));let X=G&&G.targetChanges.get(T.targetId),ce=G&&G.targetMismatches.get(T.targetId)!=null,ae=T.view.applyChanges(B,D.isPrimaryClient,X,ce);return TT(D,T.targetId,ae._u),ae.snapshot})}(n,h,m,g);let o=yield Qy(n.localStore,e,!0),s=new av(e,o.qs),a=s.nu(o.documents),c=Lf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);TT(n,t,u._u);let d=new DT(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function i8(n,e,t){return A(this,null,function*(){let r=Y(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Jf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sl(r.remoteStore,i.targetId),Rl(r,i.targetId)}).catch(es))):(Rl(r,i.targetId),yield Tl(r.localStore,i.targetId,!0))})}function o8(n,e){return A(this,null,function*(){let t=Y(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sl(t.remoteStore,r.targetId))})}function s8(n,e,t){return A(this,null,function*(){let r=TS(n);try{let i=yield function(s,a){let c=Y(s),u=Be.now(),d=a.reduce((g,_)=>g.add(_.key),_e()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=On(),D=_e();return c.Os.getEntries(g,d).next(T=>{_=T,_.forEach((F,G)=>{G.isValidDocument()||(D=D.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(T=>{h=T;let F=[];for(let G of a){let B=_5(G,h.get(G.key).overlayedDocument);B!=null&&F.push(new Vr(G.key,B,fL(B.value.mapValue),mt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,F,a)}).next(T=>{m=T;let F=T.applyToLocalDocumentSet(h,D);return c.documentOverlayCache.saveOverlays(g,T.batchId,F)})}).then(()=>({batchId:m.batchId,changes:DL(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new nt(ue)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),yield no(r,i.changes),yield Fl(r.remoteStore)}catch(i){let o=Vl(i,"Failed to persist write");t.reject(o)}})}function wV(n,e){return A(this,null,function*(){let t=Y(n);try{let r=yield j5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?te(s.lu,14607):i.removedDocuments.size>0&&(te(s.lu,42227),s.lu=!1))}),yield no(t,r,e)}catch(r){yield es(r)}})}function SF(n,e,t){let r=Y(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Y(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(let m of h.wa)m.va(a)&&(u=!0)}),u&&wS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a8(n,e,t){return A(this,null,function*(){let r=Y(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new nt(Q.comparator);s=s.insert(o,kt.newNoDocument(o,oe.min()));let a=_e().add(o),c=new Ff(oe.min(),new Map,new nt(ue),s,a);yield wV(r,c),r.du=r.du.remove(o),r.Eu.delete(e),bS(r)}else yield Tl(r.localStore,e,!1).then(()=>Rl(r,e,t)).catch(es)})}function c8(n,e){return A(this,null,function*(){let t=Y(n),r=e.batch.batchId;try{let i=yield V5(t.localStore,e);CS(t,r,null),DS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield no(t,i)}catch(i){yield es(i)}})}function l8(n,e,t){return A(this,null,function*(){let r=Y(n);try{let i=yield function(s,a){let c=Y(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(te(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);CS(r,e,t),DS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield no(r,i)}catch(i){yield es(i)}})}function u8(n,e){return A(this,null,function*(){let t=Y(n);rs(t.remoteStore)||j(is,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=Y(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===Bo)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=Vl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function DS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function CS(n,e,t){let r=Y(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Rl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||IV(n,r)})}function IV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Sl(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),bS(n))}function TT(n,e,t){for(let r of t)r instanceof ov?(n.Au.addReference(r.key,e),d8(n,r)):r instanceof sv?(j(is,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||IV(n,r.key)):Z(19791,{yu:r})}function d8(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(j(is,"New document in limbo: "+t),n.Iu.add(r),bS(n))}function bS(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Q(Re.fromString(e)),r=n.mu.next();n.Eu.set(r,new CT(t)),n.du=n.du.insert(t,r),Tv(n.remoteStore,new Dl(Cn(kl(t.path)),r,"TargetPurposeLimboResolution",Kn.ue))}}function no(n,e,t){return A(this,null,function*(){let r=Y(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=tT.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,u){return A(this,null,function*(){let d=Y(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(u,m=>M.forEach(m.Is,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>M.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!ts(h))throw h;j(mS,"Failed to update sequence numbers: "+h)}for(let h of u){let m=h.targetId;if(!h.fromCache){let g=d.Fs.get(m),_=g.snapshotVersion,D=g.withLastLimboFreeSnapshotVersion(_);d.Fs=d.Fs.insert(m,D)}}})}(r.localStore,o))})}function f8(n,e){return A(this,null,function*(){let t=Y(n);if(!t.currentUser.isEqual(e)){j(is,"User change. New user:",e.toKey());let r=yield iV(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield no(t,r.Bs)}})}function h8(n,e){let t=Y(n),r=t.Eu.get(e);if(r&&r.lu)return _e().add(r.key);{let i=_e(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function p8(n,e){return A(this,null,function*(){let t=Y(n),r=yield Qy(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&TT(t,e.targetId,i._u),i})}function m8(n,e){return A(this,null,function*(){let t=Y(n);return cV(t.localStore,e).then(r=>no(t,r))})}function g8(n,e,t,r){return A(this,null,function*(){let i=Y(n),o=yield function(a,c){let u=Y(a),d=Y(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Xn(h,c).next(m=>m?u.localDocuments.getDocuments(h,m):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Fl(i.remoteStore):t==="acknowledged"||t==="rejected"?(CS(i,e,r||null),DS(i,e),function(a,c){Y(Y(a).mutationQueue).rr(c)}(i.localStore,e)):Z(6720,"Unknown batchState",{wu:t}),yield no(i,o)):j(is,"Cannot apply mutation batch with id: "+e)})}function y8(n,e){return A(this,null,function*(){let t=Y(n);if(Sv(t),TS(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield AF(t,r.toArray());t.fu=!0,yield gT(t.remoteStore,!0);for(let o of i)Tv(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Rl(t,s),Tl(t.localStore,s,!0))),Sl(t.remoteStore,s)}),yield i,yield AF(t,r),function(s){let a=Y(s);a.Eu.forEach((c,u)=>{Sl(a.remoteStore,u)}),a.Au.jr(),a.Eu=new Map,a.du=new nt(Q.comparator)}(t),t.fu=!1,yield gT(t.remoteStore,!1)}})}function AF(n,e,t){return A(this,null,function*(){let r=Y(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield bl(r.localStore,Cn(c[0]));for(let u of c){let d=r.Pu.get(u),h=yield p8(r,d);h.snapshot&&o.push(h.snapshot)}}else{let u=yield aV(r.localStore,s);a=yield bl(r.localStore,u),yield IS(r,DV(u),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function DV(n){return vL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function v8(n){return function(t){return Y(Y(t).persistence).Ps()}(Y(n).localStore)}function _8(n,e,t,r){return A(this,null,function*(){let i=Y(n);if(i.fu)return void j(is,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield cV(i.localStore,EL(o[0])),a=Ff.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);yield no(i,s,a);break}case"rejected":yield Tl(i.localStore,e,!0),Rl(i,e,r);break;default:Z(64155,t)}})}function E8(n,e,t){return A(this,null,function*(){let r=Sv(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j(is,"Adding an already active target "+i);continue}let o=yield aV(r.localStore,i),s=yield bl(r.localStore,o);yield IS(r,DV(o),s.targetId,!1,s.resumeToken),Tv(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield Tl(r.localStore,i,!1).then(()=>{Sl(r.remoteStore,i),Rl(r,i)}).catch(es))}})}function Sv(n){let e=Y(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a8.bind(null,e),e.hu.J_=e8.bind(null,e.eventManager),e.hu.pu=t8.bind(null,e.eventManager),e}function TS(n){let e=Y(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l8.bind(null,e),e}function w8(n,e,t){let r=Y(n);(function(o,s,a){return A(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(g,_){let D=Y(g),T=bt(_.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",F=>D.Ti.getBundleMetadata(F,_.id)).then(F=>!!F&&F.createTime.compareTo(T)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(_V(c));let u=new IT(c,s.serializer),d=yield s.Su();for(;d;){let m=yield u.Wa(d);m&&a._updateProgress(m),d=yield s.Su()}let h=yield u.za(o.localStore);return yield no(o,h.Ja,void 0),yield function(g,_){let D=Y(g);return D.persistence.runTransaction("Save bundle","readwrite",T=>D.Ti.saveBundleMetadata(T,_))}(o.localStore,c),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(c){return Ln(is,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var SS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return A(this,null,function*(){this.serializer=eh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return rV(this.persistence,new Ky,t.initialUser,this.serializer)}Du(t){return new $f(Gy.Vi,this.serializer)}bu(t){return new Jy}terminate(){return A(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),ST=class extends SS{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){te(this.persistence.referenceDelegate instanceof Wy,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Hy(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new $f(r=>Wy.Vi(r,t),this.serializer)}},cv=class n extends SS{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){yield x_(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield TS(this.Mu.syncEngine),yield Fl(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return rV(this.persistence,new Ky,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Hy(r,e.asyncQueue,t)}Fu(e,t){let r=new eb(t,this.persistence);return new XC(e.asyncQueue,r)}Du(e){let t=pS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new eT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hV(),gy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Jy}},AT=class n extends cv{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return A(this,null,function*(){yield x_(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof If&&(this.sharedClientState.syncEngine={Do:g8.bind(null,t),vo:_8.bind(null,t),Co:E8.bind(null,t),Ps:v8.bind(null,t),bo:m8.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>A(this,null,function*(){yield y8(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=hV();if(!If.C(t))throw new L(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=pS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new If(t,e.asyncQueue,r,e.clientId,e.initialUser)}},AS=(()=>{class n{initialize(t,r){return A(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f8.bind(null,this.syncEngine),yield gT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _T}()}createDatastore(t){let r=eh(t.databaseInfo.databaseId),i=function(s){return new lT(s)}(t.databaseInfo);return function(s,a,c,u){return new hT(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new mT(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>SF(this.syncEngine,r,0),function(){return Xy.C()?new Xy:new oT}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,h){let m=new bT(o,s,a,c,u,d);return h&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return A(this,null,function*(){var t,r;yield function(o){return A(this,null,function*(){let s=Y(o);j(Da,"RemoteStore shutting down."),s.Ia.add(5),yield Ol(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function RF(n,e=10240){let t=0;return{read(){return A(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return A(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ml=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var RT=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new jt,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return A(this,null,function*(){return this.metadata.promise})}Su(){return A(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return A(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new wT(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return A(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return A(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return A(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var MT=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return A(this,null,function*(){let s=Y(i),a={documents:o.map(h=>Vf(s.serializer,h))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,Re.emptyPath(),a,o.length),u=new Map;c.forEach(h=>{let m=b5(s.serializer,h);u.set(m.key.toString(),m)});let d=[];return o.forEach(h=>{let m=u.get(h.toString());te(!!m,55234,{key:h}),d.push(m)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Q.fromPath(r);this.mutations.push(new Pf(i,this.precondition(i)))}),yield function(r,i){return A(this,null,function*(){let o=Y(r),s={writes:i.map(a=>jf(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,Re.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Z(50498,{Wu:e.constructor.name});t=oe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new L(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(oe.min())?mt.exists(!1):mt.updateTime(t):mt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(oe.min()))throw new L(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(t)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var NT=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new qf(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>A(this,null,function*(){let e=new MT(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Qf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!PL(t)}return!1}};var Xo="FirestoreClient",xT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=Df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>A(this,null,function*(){j(Xo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(Xo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Vl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $C(n,e){return A(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j(Xo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>A(null,null,function*(){r.isEqual(i)||(yield iV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ln("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ln("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function MF(n,e){return A(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield RS(n);j(Xo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>CF(e.remoteStore,i)),n._onlineComponents=e})}function RS(n){return A(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(Xo,"Using user provided OfflineComponentProvider");try{yield $C(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ln("Error using user provided cache. Falling back to memory cache: "+t),yield $C(n,new SS)}}else j(Xo,"Using default OfflineComponentProvider"),yield $C(n,new ST(void 0));return n._offlineComponents})}function Av(n){return A(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(Xo,"Using user provided OnlineComponentProvider"),yield MF(n,n._uninitializedComponentsProvider._online)):(j(Xo,"Using default OnlineComponentProvider"),yield MF(n,new AS))),n._onlineComponents})}function CV(n){return RS(n).then(e=>e.persistence)}function MS(n){return RS(n).then(e=>e.localStore)}function bV(n){return Av(n).then(e=>e.remoteStore)}function NS(n){return Av(n).then(e=>e.syncEngine)}function I8(n){return Av(n).then(e=>e.datastore)}function Nl(n){return A(this,null,function*(){let e=yield Av(n),t=e.eventManager;return t.onListen=n8.bind(null,e.syncEngine),t.onUnlisten=i8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o8.bind(null,e.syncEngine),t})}function D8(n){return n.asyncQueue.enqueue(()=>A(null,null,function*(){let e=yield CV(n),t=yield bV(n);return e.setNetworkEnabled(!0),function(i){let o=Y(i);return o.Ia.delete(0),th(o)}(t)}))}function C8(n){return n.asyncQueue.enqueue(()=>A(null,null,function*(){let e=yield CV(n),t=yield bV(n);return e.setNetworkEnabled(!1),function(i){return A(this,null,function*(){let o=Y(i);o.Ia.add(0),yield Ol(o),o.Aa.set("Offline")})}(t)}))}function b8(n,e){let t=new jt;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(i,o,s){return A(this,null,function*(){try{let a=yield function(u,d){let h=Y(u);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new L(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Vl(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield MS(n),e,t)})),t.promise}function TV(n,e,t={}){let r=new jt;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(o,s,a,c,u){let d=new Ml({next:m=>{d.Ou(),s.enqueueAndForget(()=>ES(o,h));let g=m.docs.has(a);!g&&m.fromCache?u.reject(new L(N.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new L(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new zf(kl(a.path),d,{includeMetadataChanges:!0,ka:!0});return _S(o,h)}(yield Nl(n),n.asyncQueue,e,t,r)})),r.promise}function T8(n,e){let t=new jt;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(i,o,s){return A(this,null,function*(){try{let a=yield Qy(i,o,!0),c=new av(o,a.qs),u=c.nu(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=Vl(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield MS(n),e,t)})),t.promise}function SV(n,e,t={}){let r=new jt;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(o,s,a,c,u){let d=new Ml({next:m=>{d.Ou(),s.enqueueAndForget(()=>ES(o,h)),m.fromCache&&c.source==="server"?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new zf(a,d,{includeMetadataChanges:!0,ka:!0});return _S(o,h)}(yield Nl(n),n.asyncQueue,e,t,r)})),r.promise}function S8(n,e){let t=new Ml(e);return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(i,o){Y(i).Da.add(o),o.next()}(yield Nl(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(i,o){Y(i).Da.delete(o)}(yield Nl(n),t)}))}}function A8(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?YT().encode(s):s,function(d,h){return new RT(d,h)}(function(d,h){if(d instanceof Uint8Array)return RF(d,h);if(d instanceof ArrayBuffer)return RF(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,eh(e));n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){w8(yield NS(n),i,r)}))}function R8(n,e){return n.asyncQueue.enqueue(()=>A(null,null,function*(){return function(r,i){let o=Y(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))}(yield MS(n),e)}))}function AV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NF=new Map;var RV="firestore.googleapis.com",xF=!0,lv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RV,this.ssl=xF}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:xF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F5)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ca=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HC;switch(r.type){case"firstParty":return new WC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=NF.get(t);r&&(j("ComponentProvider","Removing Datastore"),NF.delete(t),r.terminate())}(this),Promise.resolve()}};function Rv(n,e,t,r={}){var i;n=Pe(n,Ca);let o=O_(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(FA(`https://${c}`),VA("Firestore",!0)),s.host!==RV&&s.host!==c&&Ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Dh(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=xt.MOCK_USER;else{d=LA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xt(m)}n._authCredentials=new qC(new yy(d,h))}}var Qt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ue=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kf(t,n._jsonSchema))return new n(e,r||null,new Q(Re.fromString(t.referencePath)))}};Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Pt("string",Ue._jsonSchemaVersion),referencePath:Pt("string")};var gi=class n extends Qt{constructor(e,t,r){super(e,t,kl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function nh(n,e,...t){if(n=st(n),ZT("collection","path",e),n instanceof Ca){let r=Re.fromString(e,...t);return TO(r),new gi(n,null,r)}{if(!(n instanceof Ue||n instanceof gi))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return TO(r),new gi(n.firestore,null,r)}}function xS(n,e){if(n=Pe(n,Ca),ZT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qt(n,null,function(r){return new Fr(Re.emptyPath(),r)}(e))}function Sa(n,e,...t){if(n=st(n),arguments.length===1&&(e=Df.newId()),ZT("doc","path",e),n instanceof Ca){let r=Re.fromString(e,...t);return bO(r),new Ue(n,null,new Q(r))}{if(!(n instanceof Ue||n instanceof gi))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return bO(r),new Ue(n.firestore,n instanceof gi?n.converter:null,new Q(r))}}function Mv(n,e){return n=st(n),e=st(e),(n instanceof Ue||n instanceof gi)&&(e instanceof Ue||e instanceof gi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Nv(n,e){return n=st(n),e=st(e),n instanceof Qt&&e instanceof Qt&&n.firestore===e.firestore&&Jf(n._query,e._query)&&n.converter===e.converter}var PF="AsyncQueue",uv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qf(this,"async_queue_retry"),this.oc=()=>{let r=gy();r&&j(PF,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=gy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=gy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new jt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return A(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ts(e))throw e;j(PF,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Dt("INTERNAL UNHANDLED ERROR: ",kF(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=yT.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Z(47125,{hc:kF(this.tc)})}verifyOperationInProgress(){}Pc(){return A(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function kF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function PT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var kT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var MV=-1,lt=class extends Ca{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new uv(e),this._firestoreClient=void 0,yield e}})}};function NV(n,e){let t=typeof n=="object"?n:gu(),r=typeof n=="string"?n:e||Sy,i=V_(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=OA("firestore");o&&Rv(i,...o)}return i}function Yt(n){if(n._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xV(n),n._firestoreClient}function xV(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new ib(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,AV(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function PS(n,e){Ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return PV(n,AS.provider,{build:r=>new cv(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function kS(n){return A(this,null,function*(){Ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();PV(n,AS.provider,{build:t=>new AT(t,e.cacheSizeBytes)})})}function PV(n,e,t){if((n=Pe(n,lt))._firestoreClient||n._terminated)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new L(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xV(n)}function OS(n){if(n._initialized&&!n._terminated)throw new L(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new jt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>A(null,null,function*(){try{yield function(r){return A(this,null,function*(){if(!qo.C())return Promise.resolve();let i=r+nV;yield qo.delete(i)})}(pS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function FS(n){return function(t){let r=new jt;return t.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return u8(yield NS(t),r)})),r.promise}(Yt(n=Pe(n,lt)))}function LS(n){return D8(Yt(n=Pe(n,lt)))}function VS(n){return C8(Yt(n=Pe(n,lt)))}function jS(n,e){let t=Yt(n=Pe(n,lt)),r=new kT;return A8(t,n._databaseId,e,r),r}function BS(n,e){return R8(Yt(n=Pe(n,lt)),e).then(t=>t?new Qt(n,null,t.query):null)}var Yn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Pt("string",Yn._jsonSchemaVersion),bytes:Pt("string")};var jr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var eo=class{constructor(e){this._methodName=e}};var yi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Kf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};yi._jsonSchemaVersion="firestore/geoPoint/1.0",yi._jsonSchema={type:Pt("string",yi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};var Uo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Uo._jsonSchemaVersion="firestore/vectorValue/1.0",Uo._jsonSchema={type:Pt("string",Uo._jsonSchemaVersion),vectorValues:Pt("object")};var M8=/^__.*__$/,OT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yo(e,this.data,t,this.fieldTransforms)}},dv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function kV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ec:n})}}var fv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kV(this.Ec)&&M8.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},FT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||eh(e)}Dc(e,t,r,i=!1){return new fv({Ec:e,methodName:t,bc:r,path:Ct.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Aa(n){let e=n._freezeSettings(),t=eh(n._databaseId);return new FT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xv(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);HS("Data must be an object, but it was:",s,r);let a=LV(r,s),c,u;if(o.merge)c=new Qn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let m=UT(e,h,t);if(!s.contains(m))throw new L(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);jV(d,m)||d.push(m)}c=new Qn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new OT(new hn(a),c,u)}var Gf=class n extends eo{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function OV(n,e,t){return new fv({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var LT=class n extends eo{_toFieldTransform(e){return new Ea(e.path,new Ko)}isEqual(e){return e instanceof n}},VT=class n extends eo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=OV(this,e,!0),r=this.vc.map(o=>Ra(o,t)),i=new Ji(r);return new Ea(e.path,i)}isEqual(e){return e instanceof n&&Dh(this.vc,e.vc)}},jT=class n extends eo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=OV(this,e,!0),r=this.vc.map(o=>Ra(o,t)),i=new Xi(r);return new Ea(e.path,i)}isEqual(e){return e instanceof n&&Dh(this.vc,e.vc)}},BT=class n extends eo{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Qo(e.serializer,TL(e.serializer,this.Cc));return new Ea(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function US(n,e,t,r){let i=n.Dc(1,e,t);HS("Data must be an object, but it was:",i,r);let o=[],s=hn.empty();ns(r,(c,u)=>{let d=qS(e,c,t);u=st(u);let h=i.gc(d);if(u instanceof Gf)o.push(d);else{let m=Ra(u,h);m!=null&&(o.push(d),s.set(d,m))}});let a=new Qn(o);return new dv(s,a,i.fieldTransforms)}function $S(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[UT(e,r,t)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(UT(e,o[m])),c.push(o[m+1]);let u=[],d=hn.empty();for(let m=a.length-1;m>=0;--m)if(!jV(u,a[m])){let g=a[m],_=c[m];_=st(_);let D=s.gc(g);if(_ instanceof Gf)u.push(g);else{let T=Ra(_,D);T!=null&&(u.push(g),d.set(g,T))}}let h=new Qn(u);return new dv(d,h,s.fieldTransforms)}function FV(n,e,t,r=!1){return Ra(t,n.Dc(r?4:3,e))}function Ra(n,e){if(VV(n=st(n)))return HS("Unsupported field value:",e,n),LV(n,e);if(n instanceof eo)return function(r,i){if(!kV(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ra(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:Il(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Il(i.serializer,o)}}if(r instanceof yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:OL(i.serializer,r._byteString)};if(r instanceof Ue){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Uo)return function(s,a){return{mapValue:{fields:{[oS]:{stringValue:sS},[yl]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return uS(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${_v(r)}`)}(n,e)}function LV(n,e){let t={};return rL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ns(n,(r,i)=>{let o=Ra(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function VV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof yi||n instanceof Yn||n instanceof Ue||n instanceof eo||n instanceof Uo)}function HS(n,e,t){if(!VV(t)||!BF(t)){let r=_v(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function UT(n,e,t){if((e=st(e))instanceof jr)return e._internalPath;if(typeof e=="string")return qS(n,e);throw hv("Field path arguments must be of type string or ",n,!1,void 0,t)}var N8=new RegExp("[~\\*/\\[\\]]");function qS(n,e,t){if(e.search(N8)>=0)throw hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jr(...e.split("."))._internalPath}catch{throw hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hv(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+n+c)}function jV(n,e){return n.some(t=>t.isEqual(e))}var ba=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $T(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Pv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},$T=class extends ba{data(){return super.data()}};function Pv(n,e){return typeof e=="string"?qS(n,e):e instanceof jr?e._internalPath:e._delegate._internalPath}function BV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wf=class{},Ta=class extends Wf{};function Br(n,e,...t){let r=[];e instanceof Wf&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof HT).length,a=o.filter(c=>c instanceof pv).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var pv=class n extends Ta{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return $V(e._query,t),new Qt(e.firestore,e.converter,yb(e._query,t))}_parse(e){let t=Aa(e.firestore);return function(o,s,a,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FF(h,d);let _=[];for(let D of h)_.push(OF(c,o,D));m={arrayValue:{values:_}}}else m=OF(c,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FF(h,d),m=FV(a,s,h,d==="in"||d==="not-in");return Te.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function zS(n,e,t){let r=e,i=Pv("where",n);return pv._create(i,r,t)}var HT=class n extends Wf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:je.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)$V(s,c),s=yb(s,c)}(e._query,t),new Qt(e.firestore,e.converter,yb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var qT=class n extends Ta{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new va(o,s)}(e._query,this._field,this._direction);return new Qt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Fr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function kv(n,e="asc"){let t=e,r=Pv("orderBy",n);return qT._create(r,t)}var mv=class n extends Ta{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Qt(e.firestore,e.converter,xy(e._query,this._limit,this._limitType))}};function GS(n){return UF("limit",n),mv._create("limit",n,"F")}function WS(n){return UF("limitToLast",n),mv._create("limitToLast",n,"L")}var gv=class n extends Ta{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UV(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,function(i,o){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function KS(...n){return gv._create("startAt",n,!0)}function QS(...n){return gv._create("startAfter",n,!1)}var yv=class n extends Ta{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UV(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,function(i,o){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function YS(...n){return yv._create("endBefore",n,!1)}function ZS(...n){return yv._create("endAt",n,!0)}function UV(n,e,t,r){if(t[0]=st(t[0]),t[0]instanceof ba)return function(o,s,a,c,u){if(!c)throw new L(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of cl(o))if(h.field.isKeyField())d.push(ya(s,c.key));else{let m=c.data.field(h.field);if(Dv(m))throw new L(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=h.field.canonicalString();throw new L(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new _i(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Aa(n.firestore);return function(s,a,c,u,d,h){let m=s.explicitOrderBy;if(d.length>m.length)throw new L(N.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let _=0;_<d.length;_++){let D=d[_];if(m[_].field.isKeyField()){if(typeof D!="string")throw new L(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof D}`);if(!cS(s)&&D.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${D}' contains a slash.`);let T=s.path.child(Re.fromString(D));if(!Q.isDocumentKey(T))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let F=new Q(T);g.push(ya(a,F))}else{let T=FV(c,u,D);g.push(T)}}return new _i(g,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function OF(n,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cS(e)&&t.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!Q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ya(n,new Q(r))}if(t instanceof Ue)return ya(n,t._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_v(t)}.`)}function FF(n,e){if(!Array.isArray(n)||n.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $V(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xl=class{convertValue(e,t="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ns(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[yl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ot(s.doubleValue));return new Uo(o)}convertGeoPoint(e){return new yi(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Cv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mf(e));default:return null}}convertTimestamp(e){let t=Yi(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);te(GL(r),9688,{name:e});let i=new zo(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||Dt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ov(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var zT=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,t)}};var Qi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bn=class n extends ba{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $o(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Pv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};bn._jsonSchemaVersion="firestore/documentSnapshot/1.0",bn._jsonSchema={type:Pt("string",bn._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};var $o=class extends bn{data(e={}){return super.data(e)}},Fn=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $o(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:x8(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Df.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function x8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:n})}}function Fv(n,e){return n instanceof bn&&e instanceof bn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fn&&e instanceof Fn&&n._firestore===e._firestore&&Nv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Lv(n){n=Pe(n,Ue);let e=Pe(n.firestore,lt);return TV(Yt(e),n._key).then(t=>i0(e,n,t))}Fn._jsonSchemaVersion="firestore/querySnapshot/1.0",Fn._jsonSchema={type:Pt("string",Fn._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};var to=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,t)}};function JS(n){n=Pe(n,Ue);let e=Pe(n.firestore,lt),t=Yt(e),r=new to(e);return b8(t,n._key).then(i=>new bn(e,r,n._key,i,new Qi(i!==null&&i.hasLocalMutations,!0),n.converter))}function XS(n){n=Pe(n,Ue);let e=Pe(n.firestore,lt);return TV(Yt(e),n._key,{source:"server"}).then(t=>i0(e,n,t))}function Vv(n){n=Pe(n,Qt);let e=Pe(n.firestore,lt),t=Yt(e),r=new to(e);return BV(n._query),SV(t,n._query).then(i=>new Fn(e,r,n,i))}function e0(n){n=Pe(n,Qt);let e=Pe(n.firestore,lt),t=Yt(e),r=new to(e);return T8(t,n._query).then(i=>new Fn(e,r,n,i))}function t0(n){n=Pe(n,Qt);let e=Pe(n.firestore,lt),t=Yt(e),r=new to(e);return SV(t,n._query,{source:"server"}).then(i=>new Fn(e,r,n,i))}function rh(n,e,t){n=Pe(n,Ue);let r=Pe(n.firestore,lt),i=Ov(n.converter,e,t);return jl(r,[xv(Aa(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mt.none())])}function jv(n,e,t,...r){n=Pe(n,Ue);let i=Pe(n.firestore,lt),o=Aa(i),s;return s=typeof(e=st(e))=="string"||e instanceof jr?$S(o,"updateDoc",n._key,e,t,r):US(o,"updateDoc",n._key,e),jl(i,[s.toMutation(n._key,mt.exists(!0))])}function n0(n){return jl(Pe(n.firestore,lt),[new Zo(n._key,mt.none())])}function Bv(n,e){let t=Pe(n.firestore,lt),r=Sa(n),i=Ov(n.converter,e);return jl(t,[xv(Aa(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function Uv(n,...e){var t,r,i;n=st(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||PT(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(PT(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(n instanceof Ue)u=Pe(n.firestore,lt),d=kl(n._key.path),c={next:h=>{e[s]&&e[s](i0(u,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Pe(n,Qt);u=Pe(h.firestore,lt),d=h._query;let m=new to(u);c={next:g=>{e[s]&&e[s](new Fn(u,m,h,g))},error:e[s+1],complete:e[s+2]},BV(n._query)}return function(m,g,_,D){let T=new Ml(D),F=new zf(g,T,_);return m.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return _S(yield Nl(m),F)})),()=>{T.Ou(),m.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return ES(yield Nl(m),F)}))}}(Yt(u),d,a,c)}function r0(n,e){return S8(Yt(n=Pe(n,lt)),PT(e)?e:{next:e})}function jl(n,e){return function(r,i){let o=new jt;return r.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return s8(yield NS(r),i,o)})),o.promise}(Yt(n),e)}function i0(n,e,t){let r=t.docs.get(e._key),i=new to(n);return new bn(n,i,e._key,r,new Qi(t.hasPendingWrites,t.fromCache),e.converter)}var P8={maxAttempts:5};var vv=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Aa(e)}set(e,t,r){this._verifyNotCommitted();let i=jo(e,this._firestore),o=Ov(i.converter,t,r),s=xv(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,mt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jo(e,this._firestore),s;return s=typeof(t=st(t))=="string"||t instanceof jr?$S(this._dataReader,"WriteBatch.update",o._key,t,r,i):US(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jo(e,this._firestore);return this._mutations=this._mutations.concat(new Zo(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jo(n,e){if((n=st(n)).firestore!==e)throw new L(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var GT=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Aa(e)}get(e){let t=jo(e,this._firestore),r=new zT(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return Z(24041);let o=i[0];if(o.isFoundDocument())return new ba(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new ba(this._firestore,r,t._key,null,t.converter);throw Z(18433,{doc:o})})}set(e,t,r){let i=jo(e,this._firestore),o=Ov(i.converter,t,r),s=xv(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=jo(e,this._firestore),s;return s=typeof(t=st(t))=="string"||t instanceof jr?$S(this._dataReader,"Transaction.update",o._key,t,r,i):US(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=jo(e,this._firestore);return this._transaction.delete(t._key),this}};var WT=class extends GT{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jo(e,this._firestore),r=new to(this._firestore);return super.get(e).then(i=>new bn(this._firestore,r,t._key,i._document,new Qi(!1,!1),t.converter))}};function o0(n,e,t){n=Pe(n,lt);let r=Object.assign(Object.assign({},P8),t);return function(o){if(o.maxAttempts<1)throw new L(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new jt;return o.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){let u=yield I8(o);new NT(o.asyncQueue,u,a,s,c).zu()})),c.promise}(Yt(n),i=>e(new WT(n,i)),r)}function s0(){return new Gf("deleteField")}function HV(){return new LT("serverTimestamp")}function qV(...n){return new VT("arrayUnion",n)}function zV(...n){return new jT("arrayRemove",n)}function a0(n){return new BT("increment",n)}(function(e,t=!0){(function(i){Pl=i})($A),mu(new ls("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new lt(new zC(r.getProvider("auth-internal")),new KC(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),en(wO,IO,e),en(wO,IO,"esm2017")})();var Ur=class{constructor(e){return e}},GV="firestore",c0=class{constructor(){return Wc(GV)}};var l0=new z("angularfire2.firestore-instances");function k8(n,e){let t=rf(GV,n,e);return t&&new Ur(t)}function O8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ur(r)}}var F8={provide:c0,deps:[[new sn,l0]]},L8={provide:Ur,useFactory:k8,deps:[[new sn,l0],zi]};function WV(n,...e){return en("angularfire",Dn.full,"fst"),Kr([L8,F8,{provide:l0,useFactory:O8(n),multi:!0,deps:[he,it,dr,ia,[new sn,af],[new sn,ui],...e]}])}var KV=Ht(Bv,!0,2);var Bl=Ht(nh,!0,2);var $r=Ht(Sa,!0,2);var u0=Ht(Lv,!0);var $v=Ht(Vv,!0);var QV=Ht(NV,!0);var YV=Ht(kv,!0,2),ZV=Ht(Br,!0,2);var Hr=Ht(rh,!0,2);var gt=class n{constructor(e){this.firestore=e;this.loadPortfolioData()}portfolioData$=new vt(null);initializeFirestoreData(){return A(this,null,function*(){try{console.log("Starting Firestore initialization...");let e=this.getFallbackData();yield this.updatePersonalInfo(e.personal_info),console.log("Personal info initialized"),yield this.updateSkills(e.skills),console.log("Skills initialized"),yield this.updateExperience(e.experience.items),console.log("Experience initialized"),yield this.updateProjects(e.projects.items),console.log("Projects initialized"),yield this.updateEducation(e.education.items),console.log("Education initialized"),yield this.updateCertifications(e.certifications.items),console.log("Certifications initialized"),yield this.updateAchievements(e.achievements.items),console.log("Achievements initialized"),console.log("Firestore initialization complete!")}catch(e){throw console.error("Error initializing Firestore:",e),e}})}loadPortfolioData(){return A(this,null,function*(){try{let e=Bl(this.firestore,"portfolio"),t=yield $v(e),r={};t.forEach(i=>{r[i.id]=i.data()}),this.portfolioData$.next(r)}catch(e){console.error("Error loading portfolio data:",e),this.loadFallbackData()}})}loadFallbackData(){let e=this.getFallbackData();this.portfolioData$.next(e)}getFallbackData(){return{personal_info:{name:"Kshitij Singh",title:"Associate Software Engineer",tagline:"Building scalable solutions with .NET and cloud technologies",email:"sisodia.kshitijsingh@gmail.com",phone:"+91 9971411395",location:"Hyderabad, Telangana",website:"",linkedin:"https://linkedin.com/in/kshitijsingh9971/",github:"https://github.com/3sterisk",about:"Software engineer with experience in full-stack development using .NET technologies, Angular, and cloud platforms. Skilled in building scalable solutions with both SQL and NoSQL databases, API development, and Azure cloud services. Strong background in automation, data analytics, and cross-functional collaboration."},skills:{frontend:["Angular","ReactJS","JavaScript","React Native","Lightning Web Components"],backend:["C#","ASP .NET Core","ASP .NET MVC","Entity Framework","APEX","Java Servlets","Python"],database:["Azure Cosmos DB","SQL Server","MySQL","Redis","PL/SQL"],cloud:["Azure","Azure DevOps","Azure Data Factory","Azure Synapse Analytics","Azure CLI","Docker"],tools:["Git","Visual Studio","VS Code","SSMS","Linux","Apache Server","GitHub Copilot"]},experience:{items:[{company:"Accenture",position:"Associate Software Engineer",duration:"Feb 2024 - Present",location:"Hyderabad, Telangana",achievements:["Developed features for both frontend and backend using .NET technologies with Angular and C#","Built and integrated APIs leveraging Azure Data Factory and Azure Synapse Analytics for data pipelines","Utilized Azure DevOps for CI/CD pipelines and automated deployment processes","Developed APIs and managed caching using Redis to optimize performance and reduce latency","Collaborated with cross-functional teams maintaining consistent data flow across multiple services"]},{company:"Salesforce",position:"Intern",duration:"April 2022 - June 2022",location:"Remote",achievements:["Created organizational setups and automated processes for effective workflow","Demonstrated expertise in Lightning Web Components and APEX development","Streamlined processes and optimized code to enhance system performance","Developed and implemented security protocols for data protection and compliance"]},{company:"Highradius",position:"Intern",duration:"Jan 2022 - April 2022",location:"Remote",achievements:["Developed a B2B fintech solution with seamless frontend-backend integration","Created a custom prediction model for accurate forecasting based on cleaned data","Utilized ReactJS, Java servlets, Apache server, and MySQL for full-stack development","Conducted data cleaning to ensure high-quality data for analysis"]}]},projects:{items:[{name:"React Native Mobile App",description:"Cutting-edge mobile app revolutionizing student access to academic help with intuitive interfaces for service requests",technologies:["React Native","Redux","REST APIs"],features:["Student assistance request interface","Service provider platform","Redux state management","Real-time updates via RESTful APIs","Cross-platform compatibility (Android & iOS)"],github:"https://github.com/3sterisk/react-native-app",live_demo:"",image:"/images/react-native-project.jpg"},{name:"AI-Enabled Snake Game Agent",description:"AI-driven Snake game using reinforcement learning with RNN for strategic decision-making and memory incorporation",technologies:["Python","Pygame","Machine Learning","RNN","Reinforcement Learning"],features:["Reinforcement learning optimization","RNN-based decision memory","Strategic gameplay planning","Iterative improvement system"],github:"https://github.com/3sterisk/ai-snake-game",live_demo:"",image:"/images/ai-snake-project.jpg"}]},education:{items:[{degree:"Bachelor of Engineering",school:"Chandigarh University",duration:"June 2019 - May 2023",gpa:"",relevant_coursework:["Software Engineering","Data Structures","Algorithms","Database Management","Web Development"]}]},certifications:{items:["Azure Cloud Services",".NET Development","Salesforce Development"]},achievements:{items:["Full-stack developer with expertise in .NET technologies","Experience with both SQL and NoSQL database systems","Proficient in cloud technologies and DevOps practices","Strong background in API development and data analytics"]}}}updatePersonalInfo(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","personal_info");yield Hr(t,e),yield this.loadPortfolioData()})}updateSkills(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","skills");yield Hr(t,e),yield this.loadPortfolioData()})}updateExperience(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","experience");yield Hr(t,{items:e}),yield this.loadPortfolioData()})}updateProjects(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","projects");yield Hr(t,{items:e}),yield this.loadPortfolioData()})}updateEducation(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","education");yield Hr(t,{items:e}),yield this.loadPortfolioData()})}updateCertifications(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","certifications");yield Hr(t,{items:e}),yield this.loadPortfolioData()})}updateAchievements(e){return A(this,null,function*(){let t=$r(this.firestore,"portfolio","achievements");yield Hr(t,{items:e}),yield this.loadPortfolioData()})}getPersonalInfo(){return this.portfolioData$.pipe(ne(e=>e?.personal_info||null))}getSkills(){return this.portfolioData$.pipe(ne(e=>e?.skills||null))}getExperience(){return this.portfolioData$.pipe(ne(e=>e?.experience?.items||[]))}getProjects(){return this.portfolioData$.pipe(ne(e=>e?.projects?.items||[]))}getEducation(){return this.portfolioData$.pipe(ne(e=>e?.education?.items||[]))}getCertifications(){return this.portfolioData$.pipe(ne(e=>e?.certifications?.items||[]))}getAchievements(){return this.portfolioData$.pipe(ne(e=>e?.achievements?.items||[]))}getPortfolioData(){return this.portfolioData$.asObservable()}static \u0275fac=function(t){return new(t||n)(q(Ur))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hv=class n{constructor(e){this.portfolioService=e}personalInfo;ngOnInit(){this.portfolioService.getPersonalInfo().subscribe(e=>{this.personalInfo=e})}downloadResume(){let e="/assets/resume/Kshitij_Singh_Resume.pdf",t="Kshitij_Singh_Resume.pdf",r=document.createElement("a");r.href=e,r.download=t,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r),this.showNotification("Resume download started!")}showNotification(e){let t=document.createElement("div");t.className="notification show",t.textContent=e,t.style.cssText=`
    position: fixed;
    top: 100px;
    right: 20px;
    background: var(--color-success);
    color: var(--color-btn-primary-text);
    padding: 12px 20px;
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    z-index: 1001;
    transform: translateX(0);
    transition: transform 0.3s ease;
  `,document.body.appendChild(t),setTimeout(()=>{t.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},300)},3e3)}scrollToContact(){let e=document.getElementById("contact");e&&e.scrollIntoView({behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-hero"]],decls:30,vars:8,consts:[["id","home",1,"hero"],[1,"hero-container"],["appScrollAnimate","",1,"hero-content","pre-fade-in"],[1,"hero-text"],[1,"hero-greeting"],[1,"hero-name"],[1,"hero-subtitle"],[1,"hero-tagline"],[1,"hero-buttons"],[1,"btn","btn--primary","btn--lg",3,"click"],[1,"fas","fa-envelope"],[1,"btn","btn--secondary","btn--lg",3,"click"],[1,"fas","fa-download"],[1,"hero-social"],["target","_blank",1,"social-link",3,"href"],[1,"fab","fa-linkedin-in"],[1,"fab","fa-github"],[1,"social-link",3,"href"],[1,"hero-image"],[1,"avatar"],[1,"avatar-placeholder"]],template:function(t,r){if(t&1&&(k(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),H(5,"Hi there! I'm"),P(),k(6,"h1",5),H(7),P(),k(8,"h2",6),H(9),P(),k(10,"p",7),H(11),P(),k(12,"div",8)(13,"button",9),pt("click",function(){return r.scrollToContact()}),ge(14,"i",10),H(15," Get In Touch "),P(),k(16,"button",11),pt("click",function(){return r.downloadResume()}),ge(17,"i",12),H(18," Download Resume "),P()(),k(19,"div",13)(20,"a",14),ge(21,"i",15),P(),k(22,"a",14),ge(23,"i",16),P(),k(24,"a",17),ge(25,"i",10),P()()(),k(26,"div",18)(27,"div",19)(28,"div",20),H(29),P()()()()()()),t&2){let i;$(7),Ae(r.personalInfo==null?null:r.personalInfo.name),$(2),Ae(r.personalInfo==null?null:r.personalInfo.title),$(2),Ae(r.personalInfo==null?null:r.personalInfo.tagline),$(9),le("href",r.personalInfo==null?null:r.personalInfo.linkedin,Oi),$(2),le("href",r.personalInfo==null?null:r.personalInfo.github,Oi),$(2),le("href","mailto:"+(r.personalInfo==null?null:r.personalInfo.email),Oi),$(5),Co(" ",r.personalInfo==null||r.personalInfo.name==null?null:r.personalInfo.name.charAt(0),"",r.personalInfo==null||r.personalInfo.name==null||(i=r.personalInfo.name.split(" ")[1])==null?null:i.charAt(0)," ")}},dependencies:[un],encapsulation:2})};function j8(n,e){if(n&1&&(k(0,"span",9),H(1),P()),n&2){let t=e.$implicit;$(),Ft(" ",t," ")}}function B8(n,e){if(n&1&&(k(0,"div",5)(1,"h3",6),H(2),od(3,"titlecase"),P(),k(4,"div",7),Le(5,j8,2,1,"span",8),P()()),n&2){let t=e.$implicit,r=Ve();$(2),Ae(RI(3,2,t)),$(3),le("ngForOf",r.skills[t])}}var Ul=class n{constructor(e){this.portfolioService=e}skills;ngOnInit(){this.portfolioService.getSkills().subscribe(e=>{this.skills=e})}getSkillCategories(){return Object.keys(this.skills||{})}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-skills"]],decls:6,vars:1,consts:[["id","skills",1,"skills"],[1,"container"],[1,"section-title"],["appScrollAnimate","",1,"skills-categories","pre-fade-in"],["class","skill-category",4,"ngFor","ngForOf"],[1,"skill-category"],[1,"category-title"],[1,"skill-tags"],["class","skill-tag",4,"ngFor","ngForOf"],[1,"skill-tag"]],template:function(t,r){t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"Skills & Technologies"),P(),k(4,"div",3),Le(5,B8,6,4,"div",4),P()()()),t&2&&($(5),le("ngForOf",r.getSkillCategories()))},dependencies:[Lt,lr,un,GI],encapsulation:2})};var qv=class n{constructor(e){this.portfolioService=e}personalInfo;experience=[];skills;projects=[];subscriptions=new rt;ngOnInit(){this.subscriptions.add(this.portfolioService.getPersonalInfo().subscribe(e=>{this.personalInfo=e})),this.subscriptions.add(this.portfolioService.getExperience().subscribe(e=>{this.experience=e})),this.subscriptions.add(this.portfolioService.getSkills().subscribe(e=>{this.skills=e})),this.subscriptions.add(this.portfolioService.getProjects().subscribe(e=>{this.projects=e}))}getProfessionalExperience(){if(!this.experience||this.experience.length===0)return"0";let e=this.experience.filter(a=>!a.position.toLowerCase().includes("intern"));if(e.length===0)return"0";let t=e.map(a=>{let u=a.duration.split(" - ")[0];return this.parseDate(u)}),r=new Date(Math.min(...t.map(a=>a.getTime()))),o=Math.abs(new Date().getTime()-r.getTime());return`${Math.ceil(o/(1e3*60*60*24*365.25))}+`}getCompaniesCount(){return!this.experience||this.experience.length===0?"0":`${this.experience.filter(t=>!t.position.toLowerCase().includes("intern")).length}`}getTechnologiesCount(){if(!this.skills)return"0";let e=0;return Object.keys(this.skills).forEach(t=>{e+=this.skills[t].length}),`${e}+`}getProjectsCount(){return!this.projects||this.projects.length===0?"0":`${this.projects.length}+`}parseDate(e){let t={Jan:0,January:0,Feb:1,February:1,Mar:2,March:2,April:3,Apr:3,May:4,Jun:5,June:5,Jul:6,July:6,Aug:7,August:7,Sep:8,September:8,Oct:9,October:9,Nov:10,November:10,Dec:11,December:11},r=e.trim().split(" "),i=t[r[0]]||0,o=parseInt(r[1])||new Date().getFullYear();return new Date(o,i,1)}getTotalYearsExperience(){if(!this.experience||this.experience.length===0)return"0";let e=this.experience.map(s=>{let c=s.duration.split(" - ")[0];return this.parseDate(c)}),t=new Date(Math.min(...e.map(s=>s.getTime()))),i=Math.abs(new Date().getTime()-t.getTime());return`${Math.ceil(i/(1e3*60*60*24*365.25))}+`}getInternshipsCount(){return!this.experience||this.experience.length===0?"0":`${this.experience.filter(t=>t.position.toLowerCase().includes("intern")).length}`}getSkillCategoriesCount(){return this.skills?`${Object.keys(this.skills).length}`:"0"}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-about"]],decls:28,vars:5,consts:[["id","about",1,"about"],[1,"container"],[1,"section-title"],["appScrollAnimate","",1,"about-content","pre-fade-in"],[1,"about-text"],[1,"about-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"]],template:function(t,r){t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"About Me"),P(),k(4,"div",3)(5,"p",4),H(6),P(),k(7,"div",5)(8,"div",6)(9,"div",7),H(10),P(),k(11,"div",8),H(12,"Years Professional Experience"),P()(),k(13,"div",6)(14,"div",7),H(15),P(),k(16,"div",8),H(17,"Companies Worked At"),P()(),k(18,"div",6)(19,"div",7),H(20),P(),k(21,"div",8),H(22,"Technologies Mastered"),P()(),k(23,"div",6)(24,"div",7),H(25),P(),k(26,"div",8),H(27,"Projects Built"),P()()()()()()),t&2&&($(6),Ae(r.personalInfo==null?null:r.personalInfo.about),$(4),Ae(r.getProfessionalExperience()),$(5),Ae(r.getCompaniesCount()),$(5),Ae(r.getTechnologiesCount()),$(5),Ae(r.getProjectsCount()))},dependencies:[un],encapsulation:2})};function H8(n,e){if(n&1&&(k(0,"span"),ge(1,"i",14),H(2),P()),n&2){let t=Ve().$implicit;$(2),Ft(" GPA: ",t.gpa)}}function q8(n,e){if(n&1&&(k(0,"span",18),H(1),P()),n&2){let t=e.$implicit;$(),Ft(" ",t," ")}}function z8(n,e){if(n&1&&(k(0,"div",15)(1,"h4"),H(2,"Relevant Coursework:"),P(),k(3,"div",16),Le(4,q8,2,1,"span",17),P()()),n&2){let t=Ve().$implicit;$(4),le("ngForOf",t.relevant_coursework)}}function G8(n,e){if(n&1&&(k(0,"div",23),ge(1,"i",24),k(2,"span"),H(3),P()()),n&2){let t=e.$implicit;$(3),Ae(t)}}function W8(n,e){if(n&1&&(k(0,"div",19)(1,"h4",20),H(2,"Certifications"),P(),k(3,"div",21),Le(4,G8,4,1,"div",22),P()()),n&2){let t=Ve().$implicit;$(4),le("ngForOf",t.certifications)}}function K8(n,e){if(n&1&&(k(0,"li"),H(1),P()),n&2){let t=e.$implicit;$(),Ae(t)}}function Q8(n,e){if(n&1&&(k(0,"div",25)(1,"h4"),H(2,"Achievements:"),P(),k(3,"ul"),Le(4,K8,2,1,"li",26),P()()),n&2){let t=Ve().$implicit;$(4),le("ngForOf",t.achievements)}}function Y8(n,e){if(n&1&&(k(0,"div",5)(1,"h3",6),H(2),P(),k(3,"div",7),H(4),P(),k(5,"div",8)(6,"span"),ge(7,"i",9),H(8),P(),Le(9,H8,3,1,"span",10),P(),Le(10,z8,5,1,"div",11)(11,W8,5,1,"div",12)(12,Q8,5,1,"div",13),P()),n&2){let t=e.$implicit;$(2),Ae(t.degree),$(2),Ae(t.school),$(4),Ft(" ",t.duration),$(),le("ngIf",t.gpa),$(),le("ngIf",t.relevant_coursework),$(),le("ngIf",t.certifications),$(),le("ngIf",t.achievements)}}var $l=class n{constructor(e){this.portfolioService=e}education=[];ngOnInit(){this.portfolioService.getEducation().subscribe(e=>{this.education=e})}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-education"]],decls:6,vars:1,consts:[["id","education",1,"education"],[1,"container"],[1,"section-title"],[1,"education-content"],["class","education-item pre-fade-in","appScrollAnimate","",4,"ngFor","ngForOf"],["appScrollAnimate","",1,"education-item","pre-fade-in"],[1,"education-degree"],[1,"education-school"],[1,"education-meta"],[1,"fas","fa-calendar"],[4,"ngIf"],["class","coursework",4,"ngIf"],["class","certifications",4,"ngIf"],["class","achievements",4,"ngIf"],[1,"fas","fa-star"],[1,"coursework"],[1,"course-tags"],["class","course-tag",4,"ngFor","ngForOf"],[1,"course-tag"],[1,"certifications"],[1,"certifications-title"],[1,"cert-list"],["class","cert-item",4,"ngFor","ngForOf"],[1,"cert-item"],[1,"fas","fa-certificate"],[1,"achievements"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"Education & Certifications"),P(),k(4,"div",3),Le(5,Y8,13,7,"div",4),P()()()),t&2&&($(5),le("ngForOf",r.education))},dependencies:[Lt,lr,Ui,un],encapsulation:2})};function J8(n,e){if(n&1&&(k(0,"li"),H(1),P()),n&2){let t=e.$implicit;$(),Ft(" ",t," ")}}function X8(n,e){if(n&1&&(k(0,"div",5)(1,"div",6)(2,"div",7)(3,"h3",8),H(4),P(),k(5,"div",9),H(6),P(),k(7,"div",10)(8,"span"),ge(9,"i",11),H(10),P(),k(11,"span"),ge(12,"i",12),H(13),P()()(),k(14,"ul",13),Le(15,J8,2,1,"li",14),P()()()),n&2){let t=e.$implicit;$(4),Ae(t.position),$(2),Ae(t.company),$(4),Ft(" ",t.duration),$(3),Ft(" ",t.location),$(2),le("ngForOf",t.achievements)}}var Hl=class n{constructor(e){this.portfolioService=e}experience=[];ngOnInit(){this.portfolioService.getExperience().subscribe(e=>{this.experience=e})}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-experience"]],decls:6,vars:1,consts:[["id","experience",1,"experience"],[1,"container"],[1,"section-title"],[1,"experience-timeline"],["class","experience-item pre-fade-in","appScrollAnimate","",4,"ngFor","ngForOf"],["appScrollAnimate","",1,"experience-item","pre-fade-in"],[1,"experience-content"],[1,"experience-header"],[1,"experience-title"],[1,"experience-company"],[1,"experience-meta"],[1,"fas","fa-calendar"],[1,"fas","fa-map-marker-alt"],[1,"experience-achievements"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"Professional Experience"),P(),k(4,"div",3),Le(5,X8,16,5,"div",4),P()()()),t&2&&($(5),le("ngForOf",r.experience))},dependencies:[Lt,lr,un],encapsulation:2})};var zv=class n{constructor(e){this.firestore=e}RATE_LIMIT_MAX=3;RATE_LIMIT_WINDOW_MS=60*60*1e3;submitContactForm(e){return A(this,null,function*(){let t=this.getClientId();yield this.checkRateLimit(t);try{let r=de(U({},e),{timestamp:Be.now()}),i=Bl(this.firestore,"contact-messages");yield KV(i,r),yield this.updateRateLimit(t)}catch(r){throw console.error("Error submitting contact form:",r),new Error("Something went wrong while sending your message.")}})}checkRateLimit(e){return A(this,null,function*(){let t=$r(this.firestore,"rate-limits",e);try{let r=yield u0(t);if(r.exists()){let i=r.data(),o=Date.now(),s=i.lastSubmission.toMillis(),a=i.count;if(o-s<this.RATE_LIMIT_WINDOW_MS&&a>=this.RATE_LIMIT_MAX)throw new Error("Too many submissions. Please wait before sending another message.")}}catch(r){if(r instanceof Error&&r.message.includes("Too many submissions"))throw r;console.warn("Failed to check rate limit:",r)}})}updateRateLimit(e){return A(this,null,function*(){let t=$r(this.firestore,"rate-limits",e);try{let r=yield u0(t),i=Be.now();if(r.exists()){let o=r.data(),s=o.lastSubmission.toMillis(),a=o.count,u=Date.now()-s<this.RATE_LIMIT_WINDOW_MS?a+1:1;yield Hr(t,{count:u,lastSubmission:i})}else yield Hr(t,{count:1,lastSubmission:i})}catch(r){console.warn("Failed to update rate limit:",r)}})}getClientId(){let e=localStorage.getItem("portfolio-client-id");return e||(e="client-"+Math.random().toString(36).substring(2,10)+"-"+Date.now().toString(36),localStorage.setItem("portfolio-client-id",e)),e}static \u0275fac=function(t){return new(t||n)(q(Ur))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function n6(n,e){if(n&1&&(k(0,"div",6),ge(1,"i",27),k(2,"span"),H(3),P()()),n&2){let t=Ve();$(3),Ae(t.personalInfo==null?null:t.personalInfo.phone)}}function r6(n,e){if(n&1&&(k(0,"div",6),ge(1,"i",28),k(2,"span"),H(3),P()()),n&2){let t=Ve();$(3),Ae(t.personalInfo==null?null:t.personalInfo.location)}}function i6(n,e){if(n&1&&(k(0,"a",29),ge(1,"i",30),P()),n&2){let t=Ve();le("href",t.personalInfo==null?null:t.personalInfo.linkedin,Oi)}}function o6(n,e){if(n&1&&(k(0,"a",29),ge(1,"i",31),P()),n&2){let t=Ve();le("href",t.personalInfo==null?null:t.personalInfo.github,Oi)}}function s6(n,e){if(n&1&&(k(0,"a",32),ge(1,"i",7),P()),n&2){let t=Ve();le("href","mailto:"+(t.personalInfo==null?null:t.personalInfo.email),Oi)}}function a6(n,e){n&1&&(k(0,"span"),ge(1,"i",33),H(2," Send Message "),P())}function c6(n,e){n&1&&(k(0,"span"),ge(1,"i",34),H(2," Sending... "),P())}var ql=class n{constructor(e,t,r){this.fb=e;this.portfolioService=t;this.contactService=r;this.contactForm=this.fb.group({name:["",[ln.required,ln.minLength(2)]],email:["",[ln.required,ln.email]],subject:["",[ln.required,ln.minLength(5)]],message:["",[ln.required,ln.minLength(10)]]})}contactForm;personalInfo;isSubmitting=!1;ngOnInit(){this.portfolioService.getPersonalInfo().subscribe(e=>{this.personalInfo=e})}copyEmail(){return A(this,null,function*(){try{yield navigator.clipboard.writeText(this.personalInfo.email),this.showNotification("Email copied to clipboard!")}catch{let t=document.createElement("textarea");t.value=this.personalInfo.email,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.showNotification("Email copied to clipboard!")}})}onSubmit(){return A(this,null,function*(){if(this.contactForm.valid&&!this.isSubmitting){this.isSubmitting=!0;try{yield this.contactService.submitContactForm(this.contactForm.value),this.contactForm.reset(),this.showNotification("Message sent successfully! I'll get back to you soon.")}catch(e){this.showNotification(e.message||"Error sending message. Please try again.","error")}finally{this.isSubmitting=!1}}})}showNotification(e,t="success"){document.querySelectorAll(".notification").forEach(o=>o.remove());let i=document.createElement("div");i.className=`notification ${t}`,i.textContent=e,document.body.appendChild(i),setTimeout(()=>i.classList.add("show"),100),setTimeout(()=>{i.classList.remove("show"),setTimeout(()=>i.remove(),300)},3e3)}static \u0275fac=function(t){return new(t||n)(J(Dg),J(gt),J(zv))};static \u0275cmp=We({type:n,selectors:[["app-contact"]],decls:45,vars:19,consts:[["id","contact",1,"contact"],[1,"container"],[1,"section-title"],["appScrollAnimate","",1,"contact-content","pre-fade-in"],[1,"contact-info"],[1,"contact-details"],[1,"contact-item"],[1,"fas","fa-envelope"],["id","email-text"],["id","copy-email",1,"copy-btn",3,"click"],[1,"fas","fa-copy"],["class","contact-item",4,"ngIf"],[1,"contact-social"],["class","social-link","target","_blank",3,"href",4,"ngIf"],["class","social-link",3,"href",4,"ngIf"],["id","contact-form",1,"contact-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","required","",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","required","",1,"form-control"],["for","subject",1,"form-label"],["type","text","id","subject","name","subject","formControlName","subject","required","",1,"form-control"],["for","message",1,"form-label"],["id","message","name","message","rows","5","formControlName","message","required","",1,"form-control"],["type","submit",1,"btn","btn--primary","btn--full-width",3,"disabled"],[4,"ngIf"],[1,"fas","fa-phone"],[1,"fas","fa-map-marker-alt"],["target","_blank",1,"social-link",3,"href"],[1,"fab","fa-linkedin-in"],[1,"fab","fa-github"],[1,"social-link",3,"href"],[1,"fas","fa-paper-plane"],[1,"fas","fa-spinner","fa-spin"]],template:function(t,r){if(t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"Get In Touch"),P(),k(4,"div",3)(5,"div",4)(6,"h3"),H(7,"Let's work together!"),P(),k(8,"p"),H(9),P(),k(10,"p"),H(11,"I'm always interested in new opportunities and exciting projects. Feel free to reach out!"),P(),k(12,"div",5)(13,"div",6),ge(14,"i",7),k(15,"span",8),H(16),P(),k(17,"button",9),pt("click",function(){return r.copyEmail()}),ge(18,"i",10),P()(),Le(19,n6,4,1,"div",11)(20,r6,4,1,"div",11),P(),k(21,"div",12),Le(22,i6,2,1,"a",13)(23,o6,2,1,"a",13)(24,s6,2,1,"a",14),P()(),k(25,"form",15),pt("ngSubmit",function(){return r.onSubmit()}),k(26,"div",16)(27,"label",17),H(28,"Name *"),P(),ge(29,"input",18),P(),k(30,"div",16)(31,"label",19),H(32,"Email *"),P(),ge(33,"input",20),P(),k(34,"div",16)(35,"label",21),H(36,"Subject *"),P(),ge(37,"input",22),P(),k(38,"div",16)(39,"label",23),H(40,"Message *"),P(),ge(41,"textarea",24),P(),k(42,"button",25),Le(43,a6,3,0,"span",26)(44,c6,3,0,"span",26),P()()()()()),t&2){let i,o,s,a;$(9),Ae(r.personalInfo==null?null:r.personalInfo.about),$(7),Ae(r.personalInfo==null?null:r.personalInfo.email),$(3),le("ngIf",r.personalInfo==null?null:r.personalInfo.phone),$(),le("ngIf",r.personalInfo==null?null:r.personalInfo.location),$(2),le("ngIf",r.personalInfo==null?null:r.personalInfo.linkedin),$(),le("ngIf",r.personalInfo==null?null:r.personalInfo.github),$(),le("ngIf",r.personalInfo==null?null:r.personalInfo.email),$(),le("formGroup",r.contactForm),$(4),At("is-invalid",((i=r.contactForm.get("name"))==null?null:i.invalid)&&((i=r.contactForm.get("name"))==null?null:i.touched)),$(4),At("is-invalid",((o=r.contactForm.get("email"))==null?null:o.invalid)&&((o=r.contactForm.get("email"))==null?null:o.touched)),$(4),At("is-invalid",((s=r.contactForm.get("subject"))==null?null:s.invalid)&&((s=r.contactForm.get("subject"))==null?null:s.touched)),$(4),At("is-invalid",((a=r.contactForm.get("message"))==null?null:a.invalid)&&((a=r.contactForm.get("message"))==null?null:a.touched)),$(),le("disabled",r.contactForm.invalid||r.isSubmitting),$(),le("ngIf",!r.isSubmitting),$(),le("ngIf",r.isSubmitting)}},dependencies:[Mc,Ig,Rc,yg,vg,Vd,Fd,Ld,Lt,Ui,un],encapsulation:2})};var zl=class n{constructor(e){this.portfolioService=e}personalInfo;currentYear=new Date().getFullYear();ngOnInit(){this.personalInfo=this.portfolioService.getPersonalInfo()}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-footer"]],decls:6,vars:2,consts:[[1,"footer"],[1,"container"],[1,"footer-content"],[1,"footer-info"]],template:function(t,r){t&1&&(an(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p"),H(5),Kt()()()()()),t&2&&($(5),Co("\xA9 ",r.currentYear," ",r.personalInfo==null?null:r.personalInfo.name,". Built with passion and modern web technologies."))},dependencies:[Lt],encapsulation:2})};function d6(n,e){if(n&1&&(k(0,"span",17),H(1),P()),n&2){let t=e.$implicit;$(),Ft(" ",t," ")}}function f6(n,e){if(n&1&&(k(0,"li"),H(1),P()),n&2){let t=e.$implicit;$(),Ae(t)}}function h6(n,e){if(n&1&&(k(0,"div",18)(1,"h4"),H(2,"Key Features:"),P(),k(3,"ul"),Le(4,f6,2,1,"li",19),P()()),n&2){let t=Ve().$implicit;$(4),le("ngForOf",t.features)}}function p6(n,e){if(n&1){let t=$s();k(0,"a",20),pt("click",function(){Er(t);let i=Ve().$implicit,o=Ve();return wr(o.openLink(i.github))}),ge(1,"i",21),k(2,"span"),H(3,"Code"),P()()}}function m6(n,e){if(n&1){let t=$s();k(0,"a",20),pt("click",function(){Er(t);let i=Ve().$implicit,o=Ve();return wr(o.openLink(i.live_demo))}),ge(1,"i",22),k(2,"span"),H(3,"Live Demo"),P()()}}function g6(n,e){if(n&1&&(k(0,"div",5)(1,"div",6)(2,"div",7),ge(3,"i",8),P()(),k(4,"div",9)(5,"h3",10),H(6),P(),k(7,"p",11),H(8),P(),k(9,"div",12),Le(10,d6,2,1,"span",13),P(),Le(11,h6,5,1,"div",14),k(12,"div",15),Le(13,p6,4,0,"a",16)(14,m6,4,0,"a",16),P()()()),n&2){let t=e.$implicit;$(6),Ae(t.name),$(2),Ae(t.description),$(2),le("ngForOf",t.technologies),$(),le("ngIf",t.features),$(2),le("ngIf",t.github),$(),le("ngIf",t.live_demo)}}var Gl=class n{constructor(e){this.portfolioService=e}projects=[];ngOnInit(){this.portfolioService.getProjects().subscribe(e=>{this.projects=e})}openLink(e){window.open(e,"_blank")}static \u0275fac=function(t){return new(t||n)(J(gt))};static \u0275cmp=We({type:n,selectors:[["app-projects"]],decls:6,vars:1,consts:[["id","projects",1,"projects"],[1,"container"],[1,"section-title"],[1,"projects-grid"],["class","project-card pre-fade-in","appScrollAnimate","",4,"ngFor","ngForOf"],["appScrollAnimate","",1,"project-card","pre-fade-in"],[1,"project-image"],[1,"project-placeholder"],[1,"fas","fa-code"],[1,"project-content"],[1,"project-title"],[1,"project-description"],[1,"project-tech"],["class","tech-tag",4,"ngFor","ngForOf"],["class","project-features",4,"ngIf"],[1,"project-links"],["class","project-link",3,"click",4,"ngIf"],[1,"tech-tag"],[1,"project-features"],[4,"ngFor","ngForOf"],[1,"project-link",3,"click"],[1,"fab","fa-github"],[1,"fas","fa-external-link-alt"]],template:function(t,r){t&1&&(k(0,"section",0)(1,"div",1)(2,"h2",2),H(3,"Featured Projects"),P(),k(4,"div",3),Le(5,g6,15,6,"div",4),P()()()),t&2&&($(5),le("ngForOf",r.projects))},dependencies:[Lt,lr,Ui,un],encapsulation:2})};var Gv=class n{isDarkMode=new vt(!0);isDarkMode$=this.isDarkMode.asObservable();constructor(){let e=localStorage.getItem("theme")||"dark";this.setTheme(e==="dark")}toggleTheme(){let e=!this.isDarkMode.value;this.setTheme(e)}setTheme(e){this.isDarkMode.next(e),document.documentElement.setAttribute("data-color-scheme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wl=class n{constructor(e,t){this.themeService=e;this.portfolioService=t}isMobileMenuOpen=!1;activeSection="home";personalInfo;ngOnInit(){this.portfolioService.getPersonalInfo().subscribe(e=>{this.personalInfo=e})}getLogoInitials(){if(!this.personalInfo?.name)return"AJ";let r=this.personalInfo.name.trim().split(/\s+/).filter(i=>i.length>0);if(r.length>=2)return r[0].charAt(0).toUpperCase()+r[r.length-1].charAt(0).toUpperCase();if(r.length===1){let i=r[0];return i.length>=2?i.charAt(0).toUpperCase()+i.charAt(1).toUpperCase():i.charAt(0).toUpperCase()+i.charAt(0).toUpperCase()}return"AJ"}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}scrollToSection(e){let t=document.getElementById(e);if(t){let i=t.offsetTop-70;window.scrollTo({top:i,behavior:"smooth"})}this.activeSection=e,this.isMobileMenuOpen=!1}onWindowScroll(){let e=window.pageYOffset+100,t=["home","about","skills","experience","projects","education","contact"];for(let r of t){let i=document.getElementById(r);if(i){let o=i.offsetTop,s=i.offsetHeight;if(e>=o&&e<o+s){this.activeSection=r;break}}}}static \u0275fac=function(t){return new(t||n)(J(Gv),J(gt))};static \u0275cmp=We({type:n,selectors:[["app-navbar"]],hostBindings:function(t,r){t&1&&pt("scroll",function(){return r.onWindowScroll()},tI)},decls:36,vars:19,consts:[["id","navbar",1,"nav"],[1,"nav-container"],[1,"nav-logo"],["href","#home",1,"logo-text"],[1,"nav-menu"],[1,"nav-link",3,"click"],[1,"nav-controls"],[1,"theme-toggle",3,"click"],[1,"fas","fa-sun"],[1,"fas","fa-moon"],[1,"hamburger",3,"click"],[1,"bar"],[1,"nav-underline"]],template:function(t,r){t&1&&(an(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),H(4),Kt()(),an(5,"ul",4)(6,"li")(7,"a",5),sr("click",function(){return r.scrollToSection("home")}),H(8,"Home"),Kt()(),an(9,"li")(10,"a",5),sr("click",function(){return r.scrollToSection("about")}),H(11,"About"),Kt()(),an(12,"li")(13,"a",5),sr("click",function(){return r.scrollToSection("skills")}),H(14,"Skills"),Kt()(),an(15,"li")(16,"a",5),sr("click",function(){return r.scrollToSection("experience")}),H(17,"Experience"),Kt()(),an(18,"li")(19,"a",5),sr("click",function(){return r.scrollToSection("projects")}),H(20,"Projects"),Kt()(),an(21,"li")(22,"a",5),sr("click",function(){return r.scrollToSection("education")}),H(23,"Education"),Kt()(),an(24,"li")(25,"a",5),sr("click",function(){return r.scrollToSection("contact")}),H(26,"Contact"),Kt()()(),an(27,"div",6)(28,"button",7),sr("click",function(){return r.toggleTheme()}),yc(29,"i",8)(30,"i",9),Kt(),an(31,"div",10),sr("click",function(){return r.toggleMobileMenu()}),yc(32,"span",11)(33,"span",11)(34,"span",11),Kt()()(),yc(35,"span",12),Kt()),t&2&&($(4),Ae(r.getLogoInitials()),$(),At("active",r.isMobileMenuOpen),$(2),At("active",r.activeSection==="home"),$(3),At("active",r.activeSection==="about"),$(3),At("active",r.activeSection==="skills"),$(3),At("active",r.activeSection==="experience"),$(3),At("active",r.activeSection==="projects"),$(3),At("active",r.activeSection==="education"),$(3),At("active",r.activeSection==="contact"),$(6),At("active",r.isMobileMenuOpen))},dependencies:[Lt],encapsulation:2})};var Wv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-home"]],standalone:!1,decls:10,vars:0,template:function(t,r){t&1&&(ge(0,"app-navbar"),k(1,"main"),ge(2,"app-hero")(3,"app-about")(4,"app-skills")(5,"app-experience")(6,"app-projects")(7,"app-education")(8,"app-contact"),P(),ge(9,"app-footer"))},dependencies:[Hv,Ul,qv,$l,Hl,ql,zl,Gl,Wl],encapsulation:2})};var Kv=class n{constructor(e){this.auth=e;this.user$=mO(this.auth)}user$;signIn(e,t){return A(this,null,function*(){try{return yield yO(this.auth,e,t)}catch(r){throw r}})}signOut(){return A(this,null,function*(){yield vO(this.auth)})}isAdmin(){return this.user$.pipe(ne(e=>e?e.email==="sisodia.kshitijsingh@gmail.com":!1))}static \u0275fac=function(t){return new(t||n)(q(oa))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function w6(n,e){n&1&&(k(0,"span"),H(1,"Login"),P())}function I6(n,e){n&1&&(k(0,"span"),H(1,"Logging in..."),P())}function D6(n,e){if(n&1&&(k(0,"div",13),H(1),P()),n&2){let t=Ve(2);$(),Ft(" ",t.errorMessage," ")}}function C6(n,e){if(n&1){let t=$s();k(0,"div",2)(1,"div",3)(2,"h2"),H(3,"Admin Login"),P(),k(4,"form",4),pt("ngSubmit",function(){Er(t);let i=Ve();return wr(i.login())}),k(5,"div",5)(6,"label",6),H(7,"Email"),P(),ge(8,"input",7),P(),k(9,"div",5)(10,"label",8),H(11,"Password"),P(),ge(12,"input",9),P(),k(13,"button",10),Le(14,w6,2,0,"span",11)(15,I6,2,0,"span",11),P(),Le(16,D6,2,1,"div",12),P()()()}if(n&2){let t=Ve();$(4),le("formGroup",t.loginForm),$(9),le("disabled",t.loginForm.invalid||t.isLoading),$(),le("ngIf",!t.isLoading),$(),le("ngIf",t.isLoading),$(),le("ngIf",t.errorMessage)}}function b6(n,e){if(n&1&&(k(0,"div",23)(1,"h4"),H(2),P(),k(3,"p")(4,"strong"),H(5,"Subject:"),P(),H(6),P(),k(7,"p")(8,"strong"),H(9,"Message:"),P(),H(10),P(),k(11,"small"),H(12),od(13,"date"),P()()),n&2){let t=e.$implicit;$(2),Co("",t.name," (",t.email,")"),$(4),Ft(" ",t.subject),$(4),Ft(" ",t.message),$(2),Ae(MI(13,5,t.timestamp==null?null:t.timestamp.toDate(),"medium"))}}function T6(n,e){if(n&1){let t=$s();k(0,"div",14)(1,"div",15)(2,"h1"),H(3,"Portfolio Admin Panel"),P(),k(4,"button",16),pt("click",function(){Er(t);let i=Ve();return wr(i.logout())}),H(5,"Logout"),P()(),k(6,"div",17)(7,"div",18)(8,"h2"),H(9,"Personal Information"),P(),k(10,"textarea",19),wm("ngModelChange",function(i){Er(t);let o=Ve();return AI(o.personalInfoJson,i)||(o.personalInfoJson=i),wr(i)}),H(11,"        "),P(),k(12,"button",20),pt("click",function(){Er(t);let i=Ve();return wr(i.updatePersonalInfo())}),H(13," Update Personal Info "),P()(),k(14,"button",20),pt("click",function(){Er(t);let i=Ve();return wr(i.initFirestore())}),H(15," Initialize Firestore Data "),P(),k(16,"div",18)(17,"h2"),H(18,"Contact Messages"),P(),k(19,"div",21),Le(20,b6,14,8,"div",22),P()()()()}if(n&2){let t=Ve();$(10),Em("ngModel",t.personalInfoJson),$(10),le("ngForOf",t.contactMessages)}}var Kl=class n{constructor(e,t,r,i,o,s){this.fb=e;this.authService=t;this.portfolioService=r;this.firestore=i;this.ngZone=o;this.cdr=s;this.loginForm=this.fb.group({email:["",[ln.required,ln.email]],password:["",[ln.required,ln.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";personalInfoJson="";contactMessages=[];isAdminUser=!1;isInitializing=!1;initMessage="";initMessageClass="";ngOnInit(){this.authService.isAdmin().subscribe(e=>{console.log("\u{1F3AF} Admin status changed:",e),this.ngZone.run(()=>{this.isAdminUser=e,this.cdr.detectChanges(),e&&this.loadAdminData()})})}login(){return A(this,null,function*(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";try{yield this.authService.signIn(this.loginForm.value.email,this.loginForm.value.password),console.log("\u2705 Login successful, checking admin status..."),setTimeout(()=>{this.authService.isAdmin().pipe(er(1)).subscribe(e=>{console.log("\u{1F504} Post-login admin check:",e),this.ngZone.run(()=>{this.isAdminUser=e,this.cdr.detectChanges(),e&&this.loadAdminData()})})},500)}catch(e){this.ngZone.run(()=>{this.errorMessage=e.message||"Login failed"})}finally{this.ngZone.run(()=>{this.isLoading=!1})}}})}logout(){return A(this,null,function*(){yield this.authService.signOut()})}initializeFirestore(){return A(this,null,function*(){this.isInitializing=!0,this.initMessage="";try{yield this.portfolioService.initializeFirestoreData(),this.ngZone.run(()=>{this.initMessage="Firestore initialized successfully!",this.initMessageClass="success-message"}),setTimeout(()=>{this.ngZone.run(()=>{this.loadAdminData()})},1e3)}catch(e){this.ngZone.run(()=>{this.initMessage="Error initializing Firestore. Check console for details.",this.initMessageClass="error-message"}),console.error("Firestore initialization error:",e)}finally{this.ngZone.run(()=>{this.isInitializing=!1})}})}initFirestore(){return A(this,null,function*(){try{yield this.portfolioService.initializeFirestoreData(),alert("Firestore initialized successfully!")}catch(e){alert("Error initializing Firestore. Check console."),console.error(e)}})}loadAdminData(){return A(this,null,function*(){this.portfolioService.getPersonalInfo().subscribe(e=>{this.ngZone.run(()=>{this.personalInfoJson=JSON.stringify(e,null,2)})}),yield this.loadContactMessages()})}loadContactMessages(){return A(this,null,function*(){try{yield this.ngZone.run(()=>A(this,null,function*(){let e=Bl(this.firestore,"contact-messages"),t=ZV(e,YV("timestamp","desc")),r=yield $v(t);this.contactMessages=[],r.forEach(i=>{this.contactMessages.push(U({id:i.id},i.data()))}),console.log(`Loaded ${this.contactMessages.length} contact messages`)}))}catch(e){console.error("Error loading contact messages:",e),this.ngZone.run(()=>{this.contactMessages=[]})}})}updatePersonalInfo(){return A(this,null,function*(){try{let e=JSON.parse(this.personalInfoJson);yield this.portfolioService.updatePersonalInfo(e),this.showNotification("Personal info updated successfully!")}catch{this.showNotification("Error updating personal info","error")}})}showNotification(e,t="success"){alert(`${t==="success"?"\u2705":"\u274C"} ${e}`)}static \u0275fac=function(t){return new(t||n)(J(Dg),J(Kv),J(gt),J(Ur),J(he),J(Li))};static \u0275cmp=We({type:n,selectors:[["app-admin"]],decls:3,vars:2,consts:[["adminDashboard",""],["class","admin-panel",4,"ngIf","ngIfElse"],[1,"admin-panel"],[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","required","",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn--primary",3,"disabled"],[4,"ngIf"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"admin-dashboard"],[1,"admin-header"],[1,"btn","btn--secondary",3,"click"],[1,"admin-sections"],[1,"admin-section"],["rows","10",1,"json-editor",3,"ngModelChange","ngModel"],[1,"btn","btn--primary",3,"click"],[1,"messages-list"],["class","message-item",4,"ngFor","ngForOf"],[1,"message-item"]],template:function(t,r){if(t&1&&Le(0,C6,17,5,"div",1)(1,T6,21,2,"ng-template",null,0,NI),t&2){let i=SI(2);le("ngIf",!r.isAdminUser)("ngIfElse",i)}},dependencies:[Lt,lr,Ui,Mc,Ig,Rc,yg,vg,Vd,Fd,Ld,Cg,WD,WI],encapsulation:2})};var S6=[{path:"",component:Wv},{path:"admin",component:Kl},{path:"**",redirectTo:""}],Qv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({imports:[Xg.forRoot(S6),Xg]})};var Yv=class n{title=Ir("angular-portfolio");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&ge(0,"router-outlet")},dependencies:[Jd],encapsulation:2})};var A6="firebase",R6="11.10.0";yn.registerVersion(A6,R6,"app-compat");var M6=["ngOnDestroy"],XV=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(M6.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let h=d?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,h),h})})})});var Zv=class{constructor(e){return e}},Ql=new z("angularfire2.app.options"),Yl=new z("angularfire2.app.name");function ih(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=yn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>yn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;N6("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Zv(s)}var N6=(n,...e)=>{_c()&&typeof console<"u"&&console[n](...e)},x6={provide:Zv,useFactory:ih,deps:[Ql,he,[new sn,Yl]]},e2=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ql,useValue:t},{provide:Yl,useValue:r}]}}constructor(t){yn.registerVersion("angularfire",Dn.full,"core"),yn.registerVersion("angularfire",Dn.full,"app-compat"),yn.registerVersion("angular",Cm.full,t.toString())}static \u0275fac=function(r){return new(r||n)(q(Mn))};static \u0275mod=tt({type:n});static \u0275inj=Ke({providers:[x6]})}return n})();function Jv(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return P6(i,s)||(JV("error",`${e} was already initialized on the ${t} Firebase App with different settings.${k6?" You may need to reload as Firebase is not HMR aware.":""}`),JV("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function P6(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var k6=typeof module<"u"&&!!module.hot,JV=(n,...e)=>{_c()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var f0=new z("angularfire2.auth.use-emulator"),h0=new z("angularfire2.auth.settings"),p0=new z("angularfire2.auth.tenant-id"),m0=new z("angularfire2.auth.langugage-code"),g0=new z("angularfire2.auth.use-device-language"),y0=new z("angularfire.auth.persistence"),v0=(n,e,t,r,i,o,s,a)=>Jv(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),_0=(()=>{class n{injector=O(ze);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,u,d,h,m,g){let _=new Xe,D=ie(void 0).pipe(jn(s.outsideAngular),at(()=>o.runOutsideAngular(()=>import("./chunk-L66WL2BJ.js"))),ne(()=>ih(t,o,r)),ne(T=>v0(T,o,a,u,d,h,c,m)),cp({bufferSize:1,refCount:!1}));if(Fm(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{D.pipe(mr()).subscribe();let T=D.pipe(at(B=>B.getRedirectResult().then(X=>X,()=>null)),dn(this.injector),cp({bufferSize:1,refCount:!1})),F=D.pipe(at(B=>new fe(X=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(ce=>X.next(ce),ce=>X.error(ce),()=>X.complete()))})))),G=D.pipe(at(B=>new fe(X=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(ce=>X.next(ce),ce=>X.error(ce),()=>X.complete()))}))));this.authState=T.pipe(lp(F),Xn(s.outsideAngular),jn(s.insideAngular)),this.user=T.pipe(lp(G),Xn(s.outsideAngular),jn(s.insideAngular)),this.idToken=this.user.pipe(at(B=>B?Se(B.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(at(B=>B?Se(B.getIdTokenResult()):ie(null))),this.credential=lE(T,_,this.authState.pipe(Ot(B=>!B))).pipe(ne(B=>B?.user?B:null),Xn(s.outsideAngular),jn(s.insideAngular))}return XV(this,D,o,{spy:{apply:(T,F,G)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&G.then(B=>_.next(B))}}})}static \u0275fac=function(r){return new(r||n)(q(Ql),q(Yl,8),q(Mn),q(he),q(dr),q(f0,8),q(h0,8),q(p0,8),q(m0,8),q(g0,8),q(y0,8),q(ui,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),t2=(()=>{class n{constructor(){yn.registerVersion("angularfire",Dn.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({providers:[_0]})}return n})();var F6="@firebase/firestore-compat",L6="0.3.53";function b0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new L("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function n2(){if(typeof Uint8Array>"u")throw new L("unimplemented","Uint8Arrays are not available in this environment.")}function r2(){if(!iL())throw new L("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xv=class n{constructor(e){this._delegate=e}static fromBase64String(e){return r2(),new n(Yn.fromBase64String(e))}static fromUint8Array(e){return n2(),new n(Yn.fromUint8Array(e))}toBase64(){return r2(),this._delegate.toBase64()}toUint8Array(){return n2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function E0(n){return V6(n,["next","error","complete"])}function V6(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var w0=class{enableIndexedDbPersistence(e,t){return PS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return kS(e._delegate)}clearIndexedDbPersistence(e){return OS(e._delegate)}},e_=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Rv(this._delegate,e,t,r)}enableNetwork(){return LS(this._delegate)}disableNetwork(){return VS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return FS(this._delegate)}onSnapshotsInSync(e){return r0(this._delegate,e)}get app(){if(!this._appCompat)throw new L("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xl(this,nh(this._delegate,e))}catch(t){throw Tn(t,"collection()","Firestore.collection()")}}doc(e){try{return new wi(this,Sa(this._delegate,e))}catch(t){throw Tn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pa(this,xS(this._delegate,e))}catch(t){throw Tn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return o0(this._delegate,t=>e(new t_(this,t)))}batch(){return Yt(this._delegate),new n_(new vv(this._delegate,e=>jl(this._delegate,e)))}loadBundle(e){return jS(this._delegate,e)}namedQuery(e){return BS(this._delegate,e).then(t=>t?new Pa(this,t):null)}},Zl=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xv(new Yn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return wi.forKey(t,this.firestore,null)}};function j6(n){KT(n)}var t_=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Zl(e)}get(e){let t=Ma(e);return this._delegate.get(t).then(r=>new Na(this._firestore,new bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Ma(e);return r?(b0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ma(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ma(e);return this._delegate.delete(t),this}},n_=class{constructor(e){this._delegate=e}set(e,t,r){let i=Ma(e);return r?(b0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ma(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ma(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Jl=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new $o(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xa(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Zl(e),t),i.set(t,o)),o}};Jl.INSTANCES=new WeakMap;var wi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zl(e)}static forPath(e,t,r){if(e.length%2!==0)throw new L("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ue(t._delegate,r,new Q(e)))}static forKey(e,t,r){return new n(t,new Ue(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xl(this.firestore,nh(this._delegate,e))}catch(t){throw Tn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=st(e),e instanceof Ue?Mv(this._delegate,e):!1}set(e,t){t=b0("DocumentReference.set",t);try{return t?rh(this._delegate,e,t):rh(this._delegate,e)}catch(r){throw Tn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?jv(this._delegate,e):jv(this._delegate,e,t,...r)}catch(i){throw Tn(i,"updateDoc()","DocumentReference.update()")}}delete(){return n0(this._delegate)}onSnapshot(...e){let t=i2(e),r=o2(e,i=>new Na(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Uv(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=JS(this._delegate):e?.source==="server"?t=XS(this._delegate):t=Lv(this._delegate),t.then(r=>new Na(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Tn(n,e,t){return n.message=n.message.replace(e,t),n}function i2(n){for(let e of n)if(typeof e=="object"&&!E0(e))return e;return{}}function o2(n,e){var t,r;let i;return E0(n[0])?i=n[0]:E0(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Na=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fv(this._delegate,e._delegate)}},xa=class extends Na{data(e){let t=this._delegate.data(e);return this._delegate._converter||VF(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Pa=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zl(e)}where(e,t,r){try{return new n(this.firestore,Br(this._delegate,zS(e,t,r)))}catch(i){throw Tn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Br(this._delegate,kv(e,t)))}catch(r){throw Tn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Br(this._delegate,GS(e)))}catch(t){throw Tn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Br(this._delegate,WS(e)))}catch(t){throw Tn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Br(this._delegate,KS(...e)))}catch(t){throw Tn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Br(this._delegate,QS(...e)))}catch(t){throw Tn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Br(this._delegate,YS(...e)))}catch(t){throw Tn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Br(this._delegate,ZS(...e)))}catch(t){throw Tn(t,"endAt()","Query.endAt()")}}isEqual(e){return Nv(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=e0(this._delegate):e?.source==="server"?t=t0(this._delegate):t=Vv(this._delegate),t.then(r=>new oh(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=i2(e),r=o2(e,i=>new oh(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Uv(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},I0=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},oh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new I0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xa(this._firestore,r))})}isEqual(e){return Fv(this._delegate,e._delegate)}},Xl=class n extends Pa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new wi(this.firestore,e):null}doc(e){try{return e===void 0?new wi(this.firestore,Sa(this._delegate)):new wi(this.firestore,Sa(this._delegate,e))}catch(t){throw Tn(t,"doc()","CollectionReference.doc()")}}add(e){return Bv(this._delegate,e).then(t=>new wi(this.firestore,t))}isEqual(e){return Mv(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ma(n){return Pe(n,Ue)}var D0=class n{constructor(...e){this._delegate=new jr(...e)}static documentId(){return new n(Ct.keyField().canonicalString())}isEqual(e){return e=st(e),e instanceof jr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var C0=class n{static serverTimestamp(){let e=HV();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=s0();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=qV(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=zV(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=a0(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var B6={Firestore:e_,GeoPoint:yi,Timestamp:Be,Blob:Xv,Transaction:t_,WriteBatch:n_,DocumentReference:wi,DocumentSnapshot:Na,Query:Pa,QueryDocumentSnapshot:xa,QuerySnapshot:oh,CollectionReference:Xl,FieldPath:D0,FieldValue:C0,setLogLevel:j6,CACHE_SIZE_UNLIMITED:MV};function U6(n,e){n.INTERNAL.registerComponent(new ls("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B6)))}function $6(n){U6(n,(e,t)=>new e_(e,t,new w0)),n.registerVersion(F6,L6)}$6(yn);function H6(n,e=Du){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function s2(n,e){return H6(n,e)}function q6(n,e){return s2(n,e).pipe(gs(void 0),Su(),ne(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function A0(n,e){return s2(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var r_=class{ref;afs;injector=O(ze);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=d2(r,t);return new o_(i,o,this.afs)}snapshotChanges(){return q6(this.ref,this.afs.schedulers.outsideAngular).pipe(dn(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?de(U({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Se(this.ref.get(e)).pipe(dn(this.injector))}};function i_(n,e){return A0(n,e).pipe(gs(void 0),Su(),ne(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function a2(n,e,t){return i_(n,t).pipe(ms((r,i)=>z6(r,i.map(o=>o.payload),e),[]),uE(),ne(r=>r.map(i=>({type:i.type,payload:i}))))}function z6(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=G6(n,r))}),n}function T0(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function G6(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return T0(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return T0(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return T0(n,e.oldIndex,1);break}return n}function c2(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var o_=class{ref;query;afs;injector=O(ze);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=i_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(gs(void 0),Su(),Ot(([r,i])=>i.length>0||!r),ne(([,r])=>r),dn(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ms((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=c2(e);return a2(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn(this.injector))}valueChanges(e={}){return A0(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(r=>e.idField?de(U({},r.data()),{[e.idField]:r.id}):r.data())),dn(this.injector))}get(e){return Se(this.query.get(e)).pipe(dn(this.injector))}add(e){return this.ref.add(e)}doc(e){return new r_(this.ref.doc(e),this.afs)}},S0=class{query;afs;injector=O(ze);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?i_(this.query,this.afs.schedulers.outsideAngular).pipe(dn(this.injector)):i_(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ot(t=>t.length>0),dn(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ms((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=c2(e);return a2(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn(this.injector))}valueChanges(e={}){return A0(this.query,this.afs.schedulers.outsideAngular).pipe(ne(r=>r.payload.docs.map(i=>e.idField?U({[e.idField]:i.id},i.data()):i.data())),dn(this.injector))}get(e){return Se(this.query.get(e)).pipe(dn(this.injector))}},l2=new z("angularfire2.enableFirestorePersistence"),u2=new z("angularfire2.firestore.persistenceSettings"),W6=new z("angularfire2.firestore.settings"),K6=new z("angularfire2.firestore.use-emulator");function d2(n,e=t=>t){return{query:e(n),ref:n}}var Q6=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=O(he);constructor(t,r,i,o,s,a,c,u,d,h,m,g,_,D,T,F,G){this.schedulers=c;let B=ih(t,a,r),X=d;h&&v0(B,a,m,_,D,T,g,F),[this.firestore,this.persistenceEnabled$]=Jv(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{let ce=a.runOutsideAngular(()=>B.firestore());if(o&&ce.settings(o),X&&ce.useEmulator(...X),i&&!Fm(s)){let ae=()=>{try{return Se(ce.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ie(!1)}};return[ce,a.runOutsideAngular(ae)]}else return[ce,ie(!1)]},[o,X,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=d2(i,r),a=this.ngZone.run(()=>o);return new o_(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new S0(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new r_(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(q(Ql),q(Yl,8),q(l2,8),q(W6,8),q(Mn),q(he),q(dr),q(u2,8),q(K6,8),q(_0,8),q(f0,8),q(h0,8),q(p0,8),q(m0,8),q(g0,8),q(y0,8),q(ui,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),f2=(()=>{class n{constructor(){yn.registerVersion("angularfire",Dn.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:l2,useValue:!0},{provide:u2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=Ke({providers:[Q6]})}return n})();var R0={production:!0,firebaseConfig:{apiKey:"AIzaSyBJT8gP_DBGpfSM7hQDqaBPr8jEfh9bLPI",authDomain:"kshitij-portfolio-61623.firebaseapp.com",projectId:"kshitij-portfolio-61623",storageBucket:"kshitij-portfolio-61623.firebasestorage.app",messagingSenderId:"66798129578",appId:"1:66798129578:web:17d4b68aff9ac959ae9bd3",measurementId:"G-YYQ5ZQSQHK"}};var s_=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=tt({type:n,bootstrap:[Yv]});static \u0275inj=Ke({providers:[Zk(()=>Jk(R0.firebaseConfig)),pO(()=>gO()),WV(()=>QV())],imports:[Id,Qv,E1,Cg,Mc,Ul,$l,Hl,ql,zl,Gl,Wl,Kl,e2.initializeApp(R0.firebaseConfig),t2,f2]})};rD().bootstrapModule(s_,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
